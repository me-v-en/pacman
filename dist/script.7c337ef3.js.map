{"version":3,"sources":["script/canvas.js","script/data.json","script/utils.js","script/tile.js","script/state.js","script/board.js","script/ennemyBehaviour.js","script/ennemyAnimation.js","script/ennemy.js","script/pacmanBehaviour.js","script/pacmanAnimation.js","script/pacman.js","script/game.js","script/index.js","node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["CANVAS_ELEMENT","document","getElementById","SCORE_ELEMENT","CTX","canvas","getContext","imageSmoothingEnabled","BG_IMAGE","COIN_IMAGE","PILL_IMAGE","ISAAC_SPRITE","ENNEMY_HEAD","ENNEMY_BODY","module","exports","gameData","require","CANVAS_WIDTH","canvasWidth","CANVAS_HEIGHT","canvasHeight","DIRECTION_MATRICES","modulo","n","m","mod","Math","abs","moduloCoord","coord","getDirectionFromCoord","directionObject","Object","entries","find","direction","directionCoord","compareArrays","addCoord","coord1","coord2","map","value","index","substractCoord","distanceBetweenCoords","part1","pow","part2","sqrt","a","b","length","i","TILE_SIZE","tileSize","Tile","initialData","tileType","hasPoint","hasSuperPoint","drawImage","incrementConst","State","initState","score","gameState","board","pacman","ennemies","STATE","BOARD_ARRAY","boardArray","BOARD_WIDTH","BOARD_HEIGHT","Board","boardTiles","initBoard","y","line","x","tile","push","coordX","coordY","width","height","drawTiles","forEach","row","drawTile","currentCoord","directionMatrice","coordToMove","getTile","ANIMATION_DURATION","animationDuration","NORMAL_SPEED","normalEnnemySpeed","FLEE_SPEED","fleeEnnemySpeed","DIRECTIONS","EnnemyBehaviour","ennemy","init","timestamp","updateState","setSpeed","state","computePath","targetCoord","scatterCoord","speed","possibleTiles","getPossibleTiles","getTarget","tileToMove","computeFarthestTileToTarget","computeNearestTileToTarget","setMovingCoord","possibleDirections","filter","dir","getOppositeDirection","adjacentTiles","getNextTileInDirection","isTilePossible","justSpawned","includes","closestDistance","closestTile","distance","longestDistance","farthestTile","movingCoord","animTimestamp","Date","getTime","computeDirection","window","setTimeout","initialState","initInitialProperties","console","log","SPRITE_SIZE","spriteSize","STEP_DURATION","stepAnimationDuration","FRAMES_STEP","framesStep","EnnemyAnimation","stepAnimationTimeStamp","stepAnimation","characterIsOutOfScreen","getCoordToDraw","drawOnCanvas","isAnimationFinished","animationProgress","getProgressOfAnimation","deltaX","deltaY","currentTimeStamp","currentStepDuration","incrementStepAnimation","drawBody","drawHead","save","spriteIndex","isReversed","translate","scale","restore","findIndex","Ennemy","ennemyData","initPermanentProperties","ennemyBehaviour","ennemyAnimation","beginningGameTimestamp","initialCoord","initialTarget","scatterTarget","spawnTimeout","userInputDirection","setFleeMode","cancelFleeMode","canMove","update","draw","normalPacmanSpeed","POWERUP_DURATION","powerUpDuration","PacmanBehaviour","processTile","nextTile","computePathPacman","currentTile","startPowerUp","addScore","removePoint","setScore","clearTimeout","powerupTimeout","resetPowerUp","bind","isUserInputValid","nextTileUserDirection","confirmUserDirection","nextTileCurrentDirection","timeSinceLastInput","inputTimestamp","PacmanAnimation","isFrameAfterDeath","resetAnimation","drawDeath","decalageSource","decalageDestination","frameCoord","stepAnimationShift","stepAnimationModulo","Pacman","pacmanBehaviour","pacmanAnimation","textContent","ENNEMIES_DATA","ennemiesData","Game","initGame","initEnnemies","bindEventHandler","requestAnimationFrame","loop","progress","lastRender","updateGameState","updateEnnemies","killTouchedEnnemies","isPacmanDead","setDead","isKilled","pacmanIsDead","ennemyLoop","isPacmanKilled","fillStyle","fillRect","drawBoard","drawEnnemies","addEventListener","keydownEventHandler","removeEventListener","event","keycode","which","setUserInputDirection","preventDefault","docReady","fn","readyState","game","startGameLoop","OVERLAY_ID","OldModule","bundle","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","JSON","parse","type","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","body","appendChild","remove","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","Array","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAO,IAAMA,cAAc,GAAGC,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAvB;;AACA,IAAMC,aAAa,GAAGF,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAtB;;AACA,IAAME,GAAG,GAAGC,MAAM,CAACC,UAAP,CAAkB,IAAlB,CAAZ;;AACPF,GAAG,CAACG,qBAAJ,GAA4B,KAA5B;AAEO,IAAMC,QAAQ,GAAGP,QAAQ,CAACC,cAAT,CAAwB,SAAxB,CAAjB;;AACA,IAAMO,UAAU,GAAGR,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAAnB;;AACA,IAAMQ,UAAU,GAAGT,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAAnB;;AACA,IAAMS,YAAY,GAAGV,QAAQ,CAACC,cAAT,CAAwB,aAAxB,CAArB;;AACA,IAAMU,WAAW,GAAGX,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAApB;;AACA,IAAMW,WAAW,GAAGZ,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAApB;;;ACVPY,MAAM,CAACC,OAAP,GAAiB;AACb,uBAAqB,GADR;AAEb,uBAAqB,CAFR;AAGb,uBAAqB,GAHR;AAIb,qBAAmB,GAJN;AAKb,2BAAyB,EALZ;AAMb,gBAAc,EAND;AAOb,gBAAc,EAPD;AAQb,cAAY,EARC;AASb,gBAAc,EATD;AAUb,iBAAe,EAVF;AAWb,iBAAe,GAXF;AAYb,kBAAgB,GAZH;AAab,qBAAmB,KAbN;AAcb,kBAAe,CACX;AACI,oBAAiB,CAAC,EAAD,EAAI,EAAJ,CADrB;AAEI,qBAAkB,CAAC,EAAD,EAAI,EAAJ,CAFtB;AAGI,qBAAkB,CAAC,CAAD,EAAG,EAAH,CAHtB;AAII,oBAAiB;AAJrB,GADW,EAOX;AACI,oBAAiB,CAAC,EAAD,EAAI,EAAJ,CADrB;AAEI,qBAAkB,CAAC,EAAD,EAAI,EAAJ,CAFtB;AAGI,qBAAkB,CAAC,CAAD,EAAG,CAAH,CAHtB;AAII,oBAAiB;AAJrB,GAPW,EAaX;AACI,oBAAiB,CAAC,EAAD,EAAI,EAAJ,CADrB;AAEI,qBAAkB,CAAC,EAAD,EAAI,EAAJ,CAFtB;AAGI,qBAAkB,CAAC,EAAD,EAAI,CAAJ,CAHtB;AAII,oBAAiB;AAJrB,GAbW,EAoBX;AACI,oBAAiB,CAAC,EAAD,EAAI,EAAJ,CADrB;AAEI,qBAAkB,CAAC,EAAD,EAAI,EAAJ,CAFtB;AAGI,qBAAkB,CAAC,EAAD,EAAI,EAAJ,CAHtB;AAII,oBAAiB;AAJrB,GApBW,CAdF;AAyCb,gBAAc,CACV,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,EAA6D,GAA7D,EAAkE,GAAlE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,GAAjF,EAAsF,GAAtF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,GAArG,EAA0G,GAA1G,EAA+G,GAA/G,EAAoH,GAApH,EAAyH,GAAzH,EAA8H,GAA9H,EAAmI,GAAnI,EAAwI,GAAxI,CADU,EAEV,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,EAA6D,GAA7D,EAAkE,GAAlE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,GAAjF,EAAsF,GAAtF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,GAArG,EAA0G,GAA1G,EAA+G,GAA/G,EAAoH,GAApH,EAAyH,GAAzH,EAA8H,GAA9H,EAAmI,GAAnI,EAAwI,GAAxI,CAFU,EAGV,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,EAA6D,GAA7D,EAAkE,GAAlE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,GAAjF,EAAsF,GAAtF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,GAArG,EAA0G,GAA1G,EAA+G,GAA/G,EAAoH,GAApH,EAAyH,GAAzH,EAA8H,GAA9H,EAAmI,GAAnI,EAAwI,GAAxI,CAHU,EAIV,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,EAA6D,GAA7D,EAAkE,GAAlE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,GAAjF,EAAsF,GAAtF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,GAArG,EAA0G,GAA1G,EAA+G,GAA/G,EAAoH,GAApH,EAAyH,GAAzH,EAA8H,GAA9H,EAAmI,GAAnI,EAAwI,GAAxI,CAJU,EAKV,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,EAA6D,GAA7D,EAAkE,GAAlE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,GAAjF,EAAsF,GAAtF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,GAArG,EAA0G,GAA1G,EAA+G,GAA/G,EAAoH,GAApH,EAAyH,GAAzH,EAA8H,GAA9H,EAAmI,GAAnI,EAAwI,GAAxI,CALU,EAMV,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,EAA6D,GAA7D,EAAkE,GAAlE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,GAAjF,EAAsF,GAAtF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,GAArG,EAA0G,GAA1G,EAA+G,GAA/G,EAAoH,GAApH,EAAyH,GAAzH,EAA8H,GAA9H,EAAmI,GAAnI,EAAwI,GAAxI,CANU,EAOV,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,EAA6D,GAA7D,EAAkE,GAAlE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,GAAjF,EAAsF,GAAtF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,GAArG,EAA0G,GAA1G,EAA+G,GAA/G,EAAoH,GAApH,EAAyH,GAAzH,EAA8H,GAA9H,EAAmI,GAAnI,EAAwI,GAAxI,CAPU,EAQV,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,EAA6D,GAA7D,EAAkE,GAAlE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,GAAjF,EAAsF,GAAtF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,GAArG,EAA0G,GAA1G,EAA+G,GAA/G,EAAoH,GAApH,EAAyH,GAAzH,EAA8H,GAA9H,EAAmI,GAAnI,EAAwI,GAAxI,CARU,EASV,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,EAA6D,GAA7D,EAAkE,GAAlE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,GAAjF,EAAsF,GAAtF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,GAArG,EAA0G,GAA1G,EAA+G,GAA/G,EAAoH,GAApH,EAAyH,GAAzH,EAA8H,GAA9H,EAAmI,GAAnI,EAAwI,GAAxI,CATU,EAUV,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,EAA6D,GAA7D,EAAkE,GAAlE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,GAAjF,EAAsF,GAAtF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,GAArG,EAA0G,GAA1G,EAA+G,GAA/G,EAAoH,GAApH,EAAyH,GAAzH,EAA8H,GAA9H,EAAmI,GAAnI,EAAwI,GAAxI,CAVU,EAWV,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,EAA6D,GAA7D,EAAkE,GAAlE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,GAAjF,EAAsF,GAAtF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,GAArG,EAA0G,GAA1G,EAA+G,GAA/G,EAAoH,GAApH,EAAyH,GAAzH,EAA8H,GAA9H,EAAmI,GAAnI,EAAwI,GAAxI,CAXU,EAYV,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,EAA6D,GAA7D,EAAkE,GAAlE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,GAAjF,EAAsF,GAAtF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,GAArG,EAA0G,GAA1G,EAA+G,GAA/G,EAAoH,GAApH,EAAyH,GAAzH,EAA8H,GAA9H,EAAmI,GAAnI,EAAwI,GAAxI,CAZU,EAaV,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,EAA6D,GAA7D,EAAkE,GAAlE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,GAAjF,EAAsF,GAAtF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,GAArG,EAA0G,GAA1G,EAA+G,GAA/G,EAAoH,GAApH,EAAyH,GAAzH,EAA8H,GAA9H,EAAmI,GAAnI,EAAwI,GAAxI,CAbU,EAcV,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,EAA6D,GAA7D,EAAkE,GAAlE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,GAAjF,EAAsF,GAAtF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,GAArG,EAA0G,GAA1G,EAA+G,GAA/G,EAAoH,GAApH,EAAyH,GAAzH,EAA8H,GAA9H,EAAmI,GAAnI,EAAwI,GAAxI,CAdU,EAeV,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,EAA6D,GAA7D,EAAkE,GAAlE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,GAAjF,EAAsF,GAAtF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,GAArG,EAA0G,GAA1G,EAA+G,GAA/G,EAAoH,GAApH,EAAyH,GAAzH,EAA8H,GAA9H,EAAmI,GAAnI,EAAwI,GAAxI,CAfU,EAgBV,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,EAA6D,GAA7D,EAAkE,GAAlE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,GAAjF,EAAsF,GAAtF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,GAArG,EAA0G,GAA1G,EAA+G,GAA/G,EAAoH,GAApH,EAAyH,GAAzH,EAA8H,GAA9H,EAAmI,GAAnI,EAAwI,GAAxI,CAhBU,EAiBV,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,EAA6D,GAA7D,EAAkE,GAAlE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,GAAjF,EAAsF,GAAtF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,GAArG,EAA0G,GAA1G,EAA+G,GAA/G,EAAoH,GAApH,EAAyH,GAAzH,EAA8H,GAA9H,EAAmI,GAAnI,EAAwI,GAAxI,CAjBU,EAkBV,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,EAA6D,GAA7D,EAAkE,GAAlE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,GAAjF,EAAsF,GAAtF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,GAArG,EAA0G,GAA1G,EAA+G,GAA/G,EAAoH,GAApH,EAAyH,GAAzH,EAA8H,GAA9H,EAAmI,GAAnI,EAAwI,GAAxI,CAlBU,EAmBV,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,EAA6D,GAA7D,EAAkE,GAAlE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,GAAjF,EAAsF,GAAtF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,GAArG,EAA0G,GAA1G,EAA+G,GAA/G,EAAoH,GAApH,EAAyH,GAAzH,EAA8H,GAA9H,EAAmI,GAAnI,EAAwI,GAAxI,CAnBU,EAoBV,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,EAA6D,GAA7D,EAAkE,GAAlE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,GAAjF,EAAsF,GAAtF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,GAArG,EAA0G,GAA1G,EAA+G,GAA/G,EAAoH,GAApH,EAAyH,GAAzH,EAA8H,GAA9H,EAAmI,GAAnI,EAAwI,GAAxI,CApBU,EAqBV,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,EAA6D,GAA7D,EAAkE,GAAlE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,GAAjF,EAAsF,GAAtF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,GAArG,EAA0G,GAA1G,EAA+G,GAA/G,EAAoH,GAApH,EAAyH,GAAzH,EAA8H,GAA9H,EAAmI,GAAnI,EAAwI,GAAxI,CArBU,EAsBV,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,EAA6D,GAA7D,EAAkE,GAAlE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,GAAjF,EAAsF,GAAtF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,GAArG,EAA0G,GAA1G,EAA+G,GAA/G,EAAoH,GAApH,EAAyH,GAAzH,EAA8H,GAA9H,EAAmI,GAAnI,EAAwI,GAAxI,CAtBU,EAuBV,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,EAA6D,GAA7D,EAAkE,GAAlE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,GAAjF,EAAsF,GAAtF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,GAArG,EAA0G,GAA1G,EAA+G,GAA/G,EAAoH,GAApH,EAAyH,GAAzH,EAA8H,GAA9H,EAAmI,GAAnI,EAAwI,GAAxI,CAvBU,EAwBV,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,EAA6D,GAA7D,EAAkE,GAAlE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,GAAjF,EAAsF,GAAtF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,GAArG,EAA0G,GAA1G,EAA+G,GAA/G,EAAoH,GAApH,EAAyH,GAAzH,EAA8H,GAA9H,EAAmI,GAAnI,EAAwI,GAAxI,CAxBU,EAyBV,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,EAA6D,GAA7D,EAAkE,GAAlE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,GAAjF,EAAsF,GAAtF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,GAArG,EAA0G,GAA1G,EAA+G,GAA/G,EAAoH,GAApH,EAAyH,GAAzH,EAA8H,GAA9H,EAAmI,GAAnI,EAAwI,GAAxI,CAzBU,EA0BV,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,EAA6D,GAA7D,EAAkE,GAAlE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,GAAjF,EAAsF,GAAtF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,GAArG,EAA0G,GAA1G,EAA+G,GAA/G,EAAoH,GAApH,EAAyH,GAAzH,EAA8H,GAA9H,EAAmI,GAAnI,EAAwI,GAAxI,CA1BU,EA2BV,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,EAA6D,GAA7D,EAAkE,GAAlE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,GAAjF,EAAsF,GAAtF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,GAArG,EAA0G,GAA1G,EAA+G,GAA/G,EAAoH,GAApH,EAAyH,GAAzH,EAA8H,GAA9H,EAAmI,GAAnI,EAAwI,GAAxI,CA3BU,EA4BV,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,EAA6D,GAA7D,EAAkE,GAAlE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,GAAjF,EAAsF,GAAtF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,GAArG,EAA0G,GAA1G,EAA+G,GAA/G,EAAoH,GAApH,EAAyH,GAAzH,EAA8H,GAA9H,EAAmI,GAAnI,EAAwI,GAAxI,CA5BU,EA6BV,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,EAA6D,GAA7D,EAAkE,GAAlE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,GAAjF,EAAsF,GAAtF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,GAArG,EAA0G,GAA1G,EAA+G,GAA/G,EAAoH,GAApH,EAAyH,GAAzH,EAA8H,GAA9H,EAAmI,GAAnI,EAAwI,GAAxI,CA7BU,EA8BV,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,EAA6D,GAA7D,EAAkE,GAAlE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,GAAjF,EAAsF,GAAtF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,GAArG,EAA0G,GAA1G,EAA+G,GAA/G,EAAoH,GAApH,EAAyH,GAAzH,EAA8H,GAA9H,EAAmI,GAAnI,EAAwI,GAAxI,CA9BU,EA+BV,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,EAA6D,GAA7D,EAAkE,GAAlE,EAAuE,GAAvE,EAA4E,GAA5E,EAAiF,GAAjF,EAAsF,GAAtF,EAA2F,GAA3F,EAAgG,GAAhG,EAAqG,GAArG,EAA0G,GAA1G,EAA+G,GAA/G,EAAoH,GAApH,EAAyH,GAAzH,EAA8H,GAA9H,EAAmI,GAAnI,EAAwI,GAAxI,CA/BU;AAzCD,CAAjB;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA,IAAIC,QAAQ,GAAGC,OAAO,CAAC,aAAD,CAAtB;;AACA,IAAMC,YAAY,GAAGF,QAAQ,CAACG,WAA9B;AACA,IAAMC,aAAa,GAAGJ,QAAQ,CAACK,YAA/B;AAGO,IAAMC,kBAAkB,GAAG;AAC9B,UAAS,CAAC,CAAC,CAAF,EAAK,CAAL,CADqB;AAE9B,WAAU,CAAC,CAAD,EAAI,CAAJ,CAFoB;AAG9B,QAAO,CAAC,CAAD,EAAI,CAAC,CAAL,CAHuB;AAI9B,UAAS,CAAC,CAAD,EAAI,CAAJ;AAJqB,CAA3B;;;AAQA,SAASC,MAAT,CAAgBC,CAAhB,EAAmBC,CAAnB,EAAsB;AACzB,MAAIC,GAAG,GAAG,CAAEF,CAAC,GAAGC,CAAL,GAAUA,CAAX,IAAgBA,CAA1B;AACA,SAAOC,GAAG,GAAG,CAAN,GAAUA,GAAG,GAAGC,IAAI,CAACC,GAAL,CAASH,CAAT,CAAhB,GAA8BC,GAArC;AACH;;AAAA;;AAEM,SAASG,WAAT,CAAqBC,KAArB,EAA4B;AAC/B,SAAO,CAACP,MAAM,CAACO,KAAK,CAAC,CAAD,CAAN,EAAWZ,YAAX,CAAP,EAAiCK,MAAM,CAACO,KAAK,CAAC,CAAD,CAAN,EAAWV,aAAX,CAAvC,CAAP;AACH;;AAAA;;AAEM,SAASW,qBAAT,CAA+BD,KAA/B,EAAqC;AACxC,MAAME,eAAe,GAAGC,MAAM,CAACC,OAAP,CAAeZ,kBAAf,EAAmCa,IAAnC,CAAwC,gBAA+B;AAAA;AAAA,QAA7BC,SAA6B;AAAA,QAAlBC,cAAkB;;AAC3F,WAAOC,aAAa,CAACR,KAAD,EAAQO,cAAR,CAApB;AACH,GAFuB,CAAxB;;AAGA,MAAIL,eAAJ,EAAqB;AACrB,WAAOA,eAAe,CAAC,CAAD,CAAtB;AACC;AACJ;;AAGM,SAASO,QAAT,CAAkBC,MAAlB,EAA0BC,MAA1B,EAAkC;AACrC,SAAOD,MAAM,CAACE,GAAP,CAAW,UAACC,KAAD,EAAQC,KAAR;AAAA,WAAkBD,KAAK,IAAIF,MAAM,CAACG,KAAD,CAAjC;AAAA,GAAX,CAAP;AACH;;AAAA;;AAEM,SAASC,cAAT,CAAwBL,MAAxB,EAAgCC,MAAhC,EAAwC;AAC3C,SAAOD,MAAM,CAACE,GAAP,CAAW,UAACC,KAAD,EAAQC,KAAR;AAAA,WAAkBD,KAAK,IAAIF,MAAM,CAACG,KAAD,CAAjC;AAAA,GAAX,CAAP;AACH;;AAAA;;AAEM,SAASE,qBAAT,CAA+BN,MAA/B,EAAuCC,MAAvC,EAA+C;AAClD,MAAIM,KAAK,GAAGpB,IAAI,CAACqB,GAAL,CAASR,MAAM,CAAC,CAAD,CAAN,GAAYC,MAAM,CAAC,CAAD,CAA3B,EAAgC,CAAhC,CAAZ;AACA,MAAIQ,KAAK,GAAGtB,IAAI,CAACqB,GAAL,CAASR,MAAM,CAAC,CAAD,CAAN,GAAYC,MAAM,CAAC,CAAD,CAA3B,EAAgC,CAAhC,CAAZ;AACA,SAAOd,IAAI,CAACuB,IAAL,CAAUH,KAAK,GAAGE,KAAlB,CAAP;AACH;;AAAA;;AAEM,SAASX,aAAT,CAAuBa,CAAvB,EAA0BC,CAA1B,EAA4B;AACjC;AACA,MAAG,CAAAD,CAAC,SAAD,IAAAA,CAAC,WAAD,YAAAA,CAAC,CAAEE,MAAH,MAAaD,CAAb,aAAaA,CAAb,uBAAaA,CAAC,CAAEC,MAAhB,CAAH,EAA6B,OAAO,KAAP,CAFI,CAIjC;;AACC,OAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACH,CAAC,CAACE,MAAhB,EAAuBC,CAAC,EAAxB,EAA2B;AAC3B,QAAGH,CAAC,CAACG,CAAD,CAAD,IAAMF,CAAC,CAACE,CAAD,CAAV,EAAe,OAAO,KAAP;AACd;;AACA,SAAO,IAAP;AACD;;;;;;;;;ACvDH;;AACA;;;;;;;;AAEA,IAAItC,QAAQ,GAAGC,OAAO,CAAC,aAAD,CAAtB;;AACA,IAAMsC,SAAS,GAAGvC,QAAQ,CAACwC,QAA3B;;IACqBC;AACnB,gBAAYC,WAAZ,EAAyB5B,KAAzB,EAAgC;AAAA;;AAC9B;AACA,SAAK6B,QAAL,GAAgB,EAAhB;AACA,SAAK7B,KAAL,GAAaA,KAAb;AACA,SAAK8B,QAAL,GAAgB,KAAhB;AACA,SAAKC,aAAL,GAAqB,KAArB;;AAEA,YAAQH,WAAR;AACE,WAAK,GAAL;AACE,aAAKC,QAAL,GAAgB,MAAhB;AACA;;AACF,WAAK,GAAL;AACE,aAAKA,QAAL,GAAgB,MAAhB;AACA,aAAKC,QAAL,GAAgB,IAAhB;AACA;;AACF,WAAK,GAAL;AACE,aAAKD,QAAL,GAAgB,MAAhB;AACA,aAAKE,aAAL,GAAqB,IAArB;AACA;;AACF,WAAK,GAAL;AACE,aAAKF,QAAL,GAAgB,MAAhB;AACA;;AACF,WAAK,GAAL;AACE,aAAKA,QAAL,GAAgB,MAAhB;AACA;;AACF;AACE;AAnBJ;AAqBD;;;;WAED,uBAAc;AACZ,WAAKC,QAAL,GAAgB,KAAhB;AACA,WAAKC,aAAL,GAAqB,KAArB;AACD;;;WAED,oBAAW;AACT,UAAI,KAAKD,QAAT,EAAmB;AACnBxD,oBAAI0D,SAAJ,CACErD,kBADF,EAEE,KAAKqB,KAAL,CAAW,CAAX,IAAgByB,SAFlB,EAGE,KAAKzB,KAAL,CAAW,CAAX,IAAgByB,SAHlB,EAIEA,SAJF,EAKEA,SALF;AAOC;;AAED,UAAI,KAAKM,aAAT,EAAwB;AACtB,YAAME,cAAc,GAAG,EAAvB;;AAEA3D,oBAAI0D,SAAJ,CACEpD,kBADF,EAEE,KAAKoB,KAAL,CAAW,CAAX,IAAgByB,SAAhB,GAA4BQ,cAAc,GAAC,CAF7C,EAGE,KAAKjC,KAAL,CAAW,CAAX,IAAgByB,SAAhB,GAA4BQ,cAAc,GAAC,CAH7C,EAIER,SAAS,GAAGQ,cAJd,EAKER,SAAS,GAAGQ,cALd;AAOC;AACF;;;;;;;;;;;;;;;;;;;;;IC/DCC;AACJ,mBAAc;AAAA;;AACZ,SAAKC,SAAL;AACD;;;;WAED,qBAAY;AACV,WAAKC,KAAL,GAAa,CAAb;AACA,WAAKC,SAAL,GAAiB,OAAjB;AACA,WAAKC,KAAL;AACA,WAAKC,MAAL;AACA,WAAKC,QAAL;AACD;;;;;;AAGH,IAAMC,KAAK,GAAG,IAAIP,KAAJ,EAAd;eACe;AAACO,EAAAA,KAAK,EAALA;AAAD;;;;;;;;;;ACff;;AACA;;AACA;;AAEA;;;;;;;;;;AAEA,IAAIvD,QAAQ,GAAGC,OAAO,CAAC,aAAD,CAAtB;;AACA,IAAMuD,WAAW,GAAGxD,QAAQ,CAACyD,UAA7B;AACA,IAAMC,WAAW,GAAG1D,QAAQ,CAACyD,UAAT,CAAoB,CAApB,EAAuBpB,MAA3C;AACA,IAAMsB,YAAY,GAAG3D,QAAQ,CAACyD,UAAT,CAAoBpB,MAAzC;AACA,IAAMnC,YAAY,GAAGF,QAAQ,CAACG,WAA9B;AACA,IAAMC,aAAa,GAAGJ,QAAQ,CAACK,YAA/B;;IAEqBuD;AACnB,mBAAc;AAAA;;AACZ,SAAKC,UAAL,GAAkB,EAAlB;AACA,SAAKC,SAAL;AACD;;;;WAED,qBAAY;AACV,WAAKD,UAAL,GAAkB,EAAlB;;AACA,WAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,YAApB,EAAkCI,CAAC,EAAnC,EAAuC;AACrC,YAAIC,IAAI,GAAG,EAAX;;AACA,aAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGP,WAApB,EAAiCO,CAAC,EAAlC,EAAsC;AACpC,cAAIC,IAAI,GAAG,IAAIzB,aAAJ,CAASe,WAAW,CAACO,CAAD,CAAX,CAAeE,CAAf,CAAT,EAA4B,CAACA,CAAD,EAAIF,CAAJ,CAA5B,CAAX;AACAC,UAAAA,IAAI,CAACG,IAAL,CAAUD,IAAV;AACD;;AACD,aAAKL,UAAL,CAAgBM,IAAhB,CAAqBH,IAArB;AACD;AACF;;;WAED,iBAAQlD,KAAR,EAAe;AACb,UAAIA,KAAJ,EAAW;AACT,YAAIsD,MAAM,GAAG,mBAAOtD,KAAK,CAAC,CAAD,CAAZ,EAAiB4C,WAAjB,CAAb;AACA,YAAIW,MAAM,GAAG,mBAAOvD,KAAK,CAAC,CAAD,CAAZ,EAAiB6C,YAAjB,CAAb;AACA,eAAO,KAAKE,UAAL,CAAgBQ,MAAhB,EAAwBD,MAAxB,CAAP;AACD;AACF;;;WAED,qBAAY;AACVhF,kBAAI0D,SAAJ,CAActD,gBAAd,EAAwB,CAAxB,EAA2B,CAA3B,EAA8BR,uBAAesF,KAA7C,EAAoDtF,uBAAeuF,MAAnE;;AACA,WAAKC,SAAL;AACD;;;WAED,qBAAY;AACV,WAAKX,UAAL,CAAgBY,OAAhB,CAAwB,UAACC,GAAD,EAAS;AAC/BA,QAAAA,GAAG,CAACD,OAAJ,CAAY,UAACP,IAAD,EAAU;AACpBA,UAAAA,IAAI,CAACS,QAAL;AACD,SAFD;AAGD,OAJD;AAKD;;;WAED,gCAAuBC,YAAvB,EAAqCxD,SAArC,EAAgD;AAC9C,UAAI,CAACA,SAAD,IAAc,CAACwD,YAAnB,EAAiC;AAC/B,eAAO,KAAP;AACD;;AAED,UAAIC,gBAAgB,GAAGvE,0BAAmBc,SAAnB,CAAvB;AACA,UAAI0D,WAAW,GAAG,qBAASD,gBAAT,EAA2BD,YAA3B,CAAlB;AACA,aAAOrB,eAAMH,KAAN,CAAY2B,OAAZ,CAAoBD,WAApB,CAAP;AACD;;;;;;;;;;;;;;;ACtDH;;AAEA;;;;;;;;;;AARA,IAAM9E,QAAQ,GAAGC,OAAO,CAAC,aAAD,CAAxB;;AACA,IAAM+E,kBAAkB,GAAGhF,QAAQ,CAACiF,iBAApC;AACA,IAAMC,YAAY,GAAGlF,QAAQ,CAACmF,iBAA9B;AACA,IAAMC,UAAU,GAAGpF,QAAQ,CAACqF,eAA5B;AAaA,IAAMC,UAAU,GAAG,CAAC,MAAD,EAAS,IAAT,EAAe,OAAf,EAAwB,MAAxB,CAAnB;;IAEqBC;AACnB,2BAAYC,MAAZ,EAAoB;AAAA;;AAClB,SAAKC,IAAL,CAAUD,MAAV;AACD;;;;WAED,cAAKA,MAAL,EAAa;AACX,WAAKA,MAAL,GAAcA,MAAd;AACD;;;WAGD,gBAAOE,SAAP,EAAkB;AAChB,WAAKC,WAAL;AACA,WAAKC,QAAL;;AAEA,UAAI,KAAKJ,MAAL,CAAYK,KAAZ,KAAsB,MAA1B,EAAkC;AAChC,aAAKC,WAAL;AACD;AACF;;;WAED,uBAAc;AACZ,cAAQ,KAAKN,MAAL,CAAYK,KAApB;AACE,aAAK,OAAL;AACE,cAAI,0BAAc,KAAKL,MAAL,CAAYZ,YAA1B,EAAwC,KAAKY,MAAL,CAAYO,WAApD,CAAJ,EAAsE;AACpE,iBAAKP,MAAL,CAAYO,WAAZ,GAA0B,KAAKP,MAAL,CAAYQ,YAAtC;AACA,iBAAKR,MAAL,CAAYK,KAAZ,GAAoB,SAApB;AACD;;AAAA;AACD;;AACF,aAAK,SAAL;AACE,cAAI,0BAAc,KAAKL,MAAL,CAAYZ,YAA1B,EAAwC,KAAKY,MAAL,CAAYQ,YAApD,CAAJ,EAAuE;AACrE,iBAAKR,MAAL,CAAYK,KAAZ,GAAoB,OAApB;AACD;;AAAA;AACD;;AACF,aAAK,OAAL;AACE;AAbJ;AAeD;;;WAED,oBAAU;AACR,UAAI,KAAKL,MAAL,CAAYK,KAAZ,KAAsB,MAA1B,EAAkC;AAChC,aAAKL,MAAL,CAAYS,KAAZ,GAAoBjB,kBAAkB,IAAI,IAAEI,UAAN,CAAtC;AACD,OAFD,MAGK,KAAKI,MAAL,CAAYS,KAAZ,GAAoBjB,kBAAkB,IAAI,IAAEE,YAAN,CAAtC;AACN;;;WAED,uBAAc;AACZ;AACA,UAAMgB,aAAa,GAAG,KAAKC,gBAAL,EAAtB;;AACA,UAAID,aAAa,CAAC7D,MAAd,GAAuB,CAAvB,KAA6B,KAAKmD,MAAL,CAAYK,KAAZ,KAAsB,OAAtB,IAAiC,KAAKL,MAAL,CAAYK,KAAZ,KAAsB,MAApF,CAAJ,EAAiG;AAC/F,aAAKO,SAAL;AACD,OALW,CAMZ;;;AACA,UAAIC,UAAJ;;AACA,UAAI,KAAKb,MAAL,CAAYK,KAAZ,KAAsB,MAA1B,EAAkC;AAChCQ,QAAAA,UAAU,GAAG,KAAKC,2BAAL,CAAiCJ,aAAjC,CAAb;AACD,OAFD,MAGKG,UAAU,GAAG,KAAKE,0BAAL,CAAgCL,aAAhC,CAAb;;AACL,UAAI,CAACG,UAAL,EAAiB,OAZL,CAcZ;;AACA,WAAKG,cAAL,CAAoBH,UAAU,CAACvF,KAA/B;AACD;;;WAEH,4BAAmB;AAAA;;AACf,UAAI8D,YAAY,GAAG,KAAKY,MAAL,CAAYZ,YAA/B,CADe,CAEf;;AACA,UAAI6B,kBAAkB,GAAGnB,UAAU,CAACoB,MAAX,CAAkB,UAACC,GAAD;AAAA,eAASA,GAAG,IAAI,KAAI,CAACC,oBAAL,EAAhB;AAAA,OAAlB,CAAzB;AACA,UAAIC,aAAa,GAAGJ,kBAAkB,CAAC/E,GAAnB,CAAuB,UAACN,SAAD,EAAe;AACxD,eAAOmC,eAAMH,KAAN,CAAY0D,sBAAZ,CAAmClC,YAAnC,EAAiDxD,SAAjD,CAAP;AACD,OAFmB,CAApB;AAIA,aAAOyF,aAAa,CAACH,MAAd,CAAqB,UAACxC,IAAD,EAAU;AACpC,eAAO,KAAI,CAAC6C,cAAL,CAAoB7C,IAApB,CAAP;AACD,OAFM,CAAP;AAGD;;;WAGD,wBAAeA,IAAf,EAAqB;AACnB,UAAI,KAAKsB,MAAL,CAAYwB,WAAhB,EAA6B;AAC3B,eAAO,CAAC,MAAD,EAAS,MAAT,EAAiB,MAAjB,EAAyBC,QAAzB,CAAkC/C,IAAI,CAACvB,QAAvC,CAAP;AACD;;AACD,aAAO,CAAAuB,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAGvB,QAAP,MAAoB,MAA3B;AACD;;;WAED,oCAA2BuD,aAA3B,EAA0C;AACxC,UAAIH,WAAW,GAAG,KAAKP,MAAL,CAAYO,WAA9B;AACA,UAAImB,eAAe,GAAG,IAAtB;AACA,UAAIC,WAAW,GAAG,IAAlB;AAEAjB,MAAAA,aAAa,CAACzB,OAAd,CAAsB,UAACP,IAAD,EAAU;AAC9B,YAAIkD,QAAQ,GAAG,kCAAsBlD,IAAI,CAACpD,KAA3B,EAAkCiF,WAAlC,CAAf;;AACA,YAAImB,eAAe,KAAK,IAApB,IAA4BE,QAAQ,GAAGF,eAA3C,EAA4D;AAC1DA,UAAAA,eAAe,GAAGE,QAAlB;AACAD,UAAAA,WAAW,GAAGjD,IAAd;AACD;AACF,OAND;AAOA,aAAOiD,WAAP;AACD;;;WAGD,qCAA4BjB,aAA5B,EAA2C;AACzC,UAAIH,WAAW,GAAG,KAAKP,MAAL,CAAYO,WAA9B;AACA,UAAIsB,eAAe,GAAG,IAAtB;AACA,UAAIC,YAAY,GAAG,IAAnB;AAEApB,MAAAA,aAAa,CAACzB,OAAd,CAAsB,UAACP,IAAD,EAAU;AAC9B,YAAIkD,QAAQ,GAAG,kCAAsBlD,IAAI,CAACpD,KAA3B,EAAkCiF,WAAlC,CAAf;;AACA,YAAIsB,eAAe,KAAK,IAApB,IAA4BD,QAAQ,GAAGC,eAA3C,EAA4D;AAC1DA,UAAAA,eAAe,GAAGD,QAAlB;AACAE,UAAAA,YAAY,GAAGpD,IAAf;AACD;AACF,OAND;AAOA,aAAOoD,YAAP;AACD;;;WAGD,qBAAY;AACV,UAAI,CAAC,KAAK9B,MAAL,CAAYK,KAAb,KAAuB,OAA3B,EAAoC;AACpC,WAAKL,MAAL,CAAYwB,WAAZ,GAA0B,KAA1B;AACA,WAAKxB,MAAL,CAAYO,WAAZ,GAA0BxC,eAAMF,MAAN,CAAakE,WAAvC;AACD;;;WAED,4BAAmB;AACjB,UAAMlG,cAAc,GAAG,2BAAe,KAAKmE,MAAL,CAAY+B,WAA3B,EAAwC,KAAK/B,MAAL,CAAYZ,YAApD,CAAvB;AACA,aAAO,kCAAsBvD,cAAtB,CAAP;AACD;;;WAGD,gCAAsB;AACpB,cAAQ,KAAKmE,MAAL,CAAYpE,SAApB;AACE,aAAK,IAAL;AACE,iBAAO,MAAP;AACA;;AACF,aAAK,MAAL;AACE,iBAAO,IAAP;AACA;;AACF,aAAK,MAAL;AACE,iBAAO,OAAP;AACA;;AACF,aAAK,OAAL;AACE,iBAAO,MAAP;AACA;;AACF;AACE,iBAAO,EAAP;AAdJ;AAgBD;;;WAED,wBAAeN,KAAf,EAAsB;AAAA;;AACpB,WAAK0E,MAAL,CAAY+B,WAAZ,GAA0BzG,KAA1B;AACA,WAAK0E,MAAL,CAAYgC,aAAZ,GAA4B,IAAIC,IAAJ,GAAWC,OAAX,EAA5B;AACA,WAAKlC,MAAL,CAAYpE,SAAZ,GAAwB,KAAKuG,gBAAL,EAAxB;AACAC,MAAAA,MAAM,CAACC,UAAP,CAAkB,YAAM;AACtB,QAAA,MAAI,CAACrC,MAAL,CAAYZ,YAAZ,GAA2B9D,KAA3B;AACD,OAFD,EAEG,KAAK0E,MAAL,CAAYS,KAFf;AAGD;;;WAED,uBAAc;AACZ,UAAI,KAAKT,MAAL,CAAYK,KAAZ,KAAsB,SAAtB,IAAmC,KAAKL,MAAL,CAAYK,KAAZ,KAAsB,OAA7D,EAAsE;AACpE,aAAKL,MAAL,CAAYK,KAAZ,GAAoB,MAApB;AACA,aAAKzE,SAAL,GAAiB,EAAjB;AACD;AACF;;;WAED,0BAAiB;AACf,UAAI0G,YAAY,GAAG,KAAKtC,MAAL,CAAYK,KAA/B;;AACA,UAAI,KAAKL,MAAL,CAAYK,KAAZ,KAAsB,MAA1B,EAAkC;AAChC,aAAKzE,SAAL,GAAiB,EAAjB;AACA,aAAKoE,MAAL,CAAYK,KAAZ,GAAoB,OAApB;AACD;;AACD,UAAI,KAAKL,MAAL,CAAYK,KAAZ,KAAsB,MAA1B,EAAkC;AAChC,aAAKL,MAAL,CAAYuC,qBAAZ;AACD;;AACDC,MAAAA,OAAO,CAACC,GAAR,CAAYH,YAAZ,EAA0B,MAA1B,EAAkC,KAAKtC,MAAL,CAAYK,KAA9C;AACD;;;WAED,gCAAuB;AACrB,WAAKL,MAAL,CAAYpE,SAAZ,GAAwB,KAAKwF,oBAAL,EAAxB;AACD;;;;;;;;;;;;;;;AC1LH;;AAEA;;;;;;;;;;;;;;;;;;;;;;AAVA,IAAM5G,QAAQ,GAAGC,OAAO,CAAC,aAAD,CAAxB;;AACA,IAAMsC,SAAS,GAAGvC,QAAQ,CAACwC,QAA3B;AACA,IAAM0F,WAAW,GAAGlI,QAAQ,CAACmI,UAA7B;AACA,IAAMC,aAAa,GAAGpI,QAAQ,CAACqI,qBAA/B;AACA,IAAMC,WAAW,GAAGtI,QAAQ,CAACuI,UAA7B;AAEA,IAAMjD,UAAU,GAAG,CAAC,MAAD,EAAS,OAAT,EAAkB,IAAlB,EAAwB,MAAxB,CAAnB;;IAMqBkD;AACnB,2BAAYhD,MAAZ,EAAoB;AAAA;;AAClB,SAAKC,IAAL,CAAUD,MAAV;AACD;;;;WAED,cAAKA,MAAL,EAAa;AACX,WAAKA,MAAL,GAAcA,MAAd;AACA,WAAKiD,sBAAL,GAA8B,IAA9B;AACA,WAAKC,aAAL,GAAqB,CAArB;AACD;;;WAGD,cAAKhD,SAAL,EAAgB;AACd,UAAI,KAAKiD,sBAAL,MAAiC,KAAKnD,MAAL,CAAYK,KAAZ,KAAsB,MAA3D,EAAmE;AACjE;AACD;;AACD,UAAG,CAAC,KAAK4C,sBAAT,EAAgC;AAC9B,aAAKA,sBAAL,GAA8B/C,SAA9B;AACD;;AACD,UAAIzB,CAAJ,EAAOF,CAAP;;AAPc,iCAQL,KAAK6E,cAAL,EARK;;AAAA;;AAQb3E,MAAAA,CARa;AAQVF,MAAAA,CARU;AASd,WAAK8E,YAAL,CAAkB5E,CAAlB,EAAqBF,CAArB,EAAwB2B,SAAxB;AACD;;;WAED,kCAAyB;AACvB,UAAI,KAAKF,MAAL,CAAY+B,WAAZ,CAAwB,CAAxB,MAA+B,EAA/B,IAAqC,KAAK/B,MAAL,CAAYZ,YAAZ,CAAyB,CAAzB,MAAgC,CAAzE,EAA4E;AAC1E,eAAO,IAAP;AACD;;AACD,UAAI,KAAKY,MAAL,CAAY+B,WAAZ,CAAwB,CAAxB,MAA+B,CAA/B,IAAoC,KAAK/B,MAAL,CAAYZ,YAAZ,CAAyB,CAAzB,MAAgC,EAAxE,EAA4E;AAC1E,eAAO,IAAP;AACD;;AACD,aAAO,KAAP;AACD;;;WAED,+BAAsB;AACpB,aAAO,KAAKY,MAAL,CAAYZ,YAAZ,KAA6B,KAAKY,MAAL,CAAY+B,WAAhD;AACD;;;WAED,0BAAgB;AACd,UAAItD,CAAJ,EAAOF,CAAP;;AAEA,UAAI,KAAK+E,mBAAL,EAAJ,EAAgC;AAC9B,eAAO,KAAKtD,MAAL,CAAYZ,YAAnB;AACD,OALa,CAMd;;;AACA,UAAImE,iBAAiB,GAAG,KAAKC,sBAAL,EAAxB,CAPc,CASd;;AACA,UAAIC,MAAM,GAAG,KAAKzD,MAAL,CAAY+B,WAAZ,CAAwB,CAAxB,IAA6B,KAAK/B,MAAL,CAAYZ,YAAZ,CAAyB,CAAzB,CAA1C;AACA,UAAIsE,MAAM,GAAG,KAAK1D,MAAL,CAAY+B,WAAZ,CAAwB,CAAxB,IAA6B,KAAK/B,MAAL,CAAYZ,YAAZ,CAAyB,CAAzB,CAA1C,CAXc,CAad;;AACAX,MAAAA,CAAC,GAAG,KAAKuB,MAAL,CAAYZ,YAAZ,CAAyB,CAAzB,IAA8BqE,MAAM,GAAGF,iBAA3C;AACAhF,MAAAA,CAAC,GAAG,KAAKyB,MAAL,CAAYZ,YAAZ,CAAyB,CAAzB,IAA8BsE,MAAM,GAAGH,iBAA3C,CAfc,CAkBd;;AACA,aAAO,CAAC9E,CAAD,EAAIF,CAAJ,CAAP;AACD;;;WAED,gCAAuB2B,SAAvB,EAAiC;AAC/B,WAAKgD,aAAL;AACA,WAAKA,aAAL,GAAqB,KAAKA,aAAL,GAAqBJ,WAA1C;AACA,WAAKG,sBAAL,GAA8B/C,SAA9B;AACD;;;WAED,kCAAyB;AACvB,UAAIyD,gBAAgB,GAAG,IAAI1B,IAAJ,GAAWC,OAAX,EAAvB;AACA,aAAO,CAACyB,gBAAgB,GAAG,KAAK3D,MAAL,CAAYgC,aAAhC,IAAiD,KAAKhC,MAAL,CAAYS,KAApE;AACD;;;WAGD,sBAAahC,CAAb,EAAgBF,CAAhB,EAAmB2B,SAAnB,EAA8B;AAC5B,UAAI0D,mBAAmB,GAAG1D,SAAS,GAAG,KAAK+C,sBAA3C;;AACA,UAAGW,mBAAmB,GAAGhB,aAAzB,EAAuC;AACrC,aAAKiB,sBAAL,CAA4B3D,SAA5B;AACD;;AAED,WAAK4D,QAAL,CAAcrF,CAAd,EAAiBF,CAAjB;AACA,WAAKwF,QAAL,CAActF,CAAd,EAAiBF,CAAjB;AACD;;;WAGD,kBAASE,CAAT,EAAYF,CAAZ,EAAc;AACZ,UAAMhB,cAAc,GAAG,CAAvB;;AAEA3D,kBAAIoK,IAAJ;;AAEAvF,MAAAA,CAAC,GAAGA,CAAC,GAAG1B,SAAJ,GAAgBQ,cAAc,GAAG,CAArC;AACAgB,MAAAA,CAAC,GAAG,CAACA,CAAC,GAAG,GAAL,IAAYxB,SAAZ,GAAwBQ,cAAc,GAAG,CAA7C;AAEA,UAAI0G,WAAW,GAAG,CAAlB;AACA,UAAIf,aAAa,GAAG,KAAKA,aAAzB;AACA,UAAIgB,UAAU,GAAG,KAAjB;;AAEA,UAAG,KAAKlE,MAAL,CAAYpE,SAAZ,KAA0B,MAA1B,IAAoC,KAAKoE,MAAL,CAAYpE,SAAZ,KAA0B,OAAjE,EAAyE;AACvEqI,QAAAA,WAAW,GAAG,CAAd;AACD;;AAED,UAAI,KAAKjE,MAAL,CAAYpE,SAAZ,KAA0B,MAA9B,EAAsC;AACpCsI,QAAAA,UAAU,GAAG,IAAb;AACD;;AAED,UAAGhB,aAAa,GAAG,CAAnB,EAAqB;AACnBe,QAAAA,WAAW;AACXf,QAAAA,aAAa,GAAGA,aAAa,GAAG,CAAhC;AACD;;AAED,UAAIgB,UAAJ,EAAgB;AACdtK,oBAAIuK,SAAJ,CAAe1F,CAAC,GAAG1B,SAAnB,EAA8BwB,CAA9B;;AACA3E,oBAAIwK,KAAJ,CAAU,CAAC,CAAX,EAAc,CAAd;;AACA3F,QAAAA,CAAC,GAAG,CAAJ;AACAF,QAAAA,CAAC,GAAE,CAAH;AACD;;AAED3E,kBAAI0D,SAAJ,CACEjD,mBADF,EAEE6I,aAAa,GAAGR,WAFlB,EAGEuB,WAAW,GAAGvB,WAHhB,EAIE3F,SAJF,EAKEA,SALF,EAME0B,CANF,EAOEF,CAPF,EAQExB,SAAS,GAAGQ,cARd,EASER,SAAS,GAAGQ,cATd;;AAYA3D,kBAAIyK,OAAJ;AAGD;;;WAED,kBAAS5F,CAAT,EAAYF,CAAZ,EAAe;AAAA;;AACb,UAAMhB,cAAc,GAAG,CAAvB;;AAEA3D,kBAAIoK,IAAJ;;AAEAvF,MAAAA,CAAC,GAAGA,CAAC,GAAG1B,SAAJ,GAAgBQ,cAAc,GAAG,CAArC;AACAgB,MAAAA,CAAC,GAAG,CAACA,CAAC,GAAG,GAAL,IAAYxB,SAAZ,GAAwBQ,cAAc,GAAG,CAA7C;AAEE,UAAI0G,WAAW,GAAGnE,UAAU,CAACwE,SAAX,CAAqB,UAAC1I,SAAD;AAAA,eAAeA,SAAS,KAAK,KAAI,CAACoE,MAAL,CAAYpE,SAAzC;AAAA,OAArB,CAAlB;AACF,UAAIqI,WAAW,KAAK,CAAC,CAArB,EAAwBA,WAAW,GAAG,CAAd;AACxB,UAAIC,UAAU,GAAG,KAAjB;;AACA,UAAI,KAAKlE,MAAL,CAAYpE,SAAZ,KAA0B,MAA9B,EAAsC;AACpCsI,QAAAA,UAAU,GAAG,IAAb;AACAD,QAAAA,WAAW,GAAG,CAAd;AACD;;AAED,UAAIC,UAAJ,EAAgB;AACdtK,oBAAIuK,SAAJ,CAAe1F,CAAC,GAAG1B,SAAnB,EAA8BwB,CAA9B;;AACA3E,oBAAIwK,KAAJ,CAAU,CAAC,CAAX,EAAc,CAAd;;AACA3F,QAAAA,CAAC,GAAG,CAAJ;AACAF,QAAAA,CAAC,GAAE,CAAH;AACD;;AAED3E,kBAAI0D,SAAJ,CACElD,mBADF,EAEE6J,WAAW,GAAGvB,WAFhB,EAGE,CAHF,EAIE3F,SAJF,EAKEA,SALF,EAME0B,CANF,EAOEF,CAPF,EAQExB,SAAS,GAAGQ,cARd,EASER,SAAS,GAAGQ,cATd;;AAYA3D,kBAAIyK,OAAJ;AACD;;;;;;;;;;;;;;;ACpLH;;AAIA;;AACA;;;;;;;;;;AAEA,IAAM7J,QAAQ,GAAGC,OAAO,CAAC,aAAD,CAAxB,EAEA;;;IACqB8J;AACnB,kBAAYC,UAAZ,EAAwB;AAAA;;AACtB,SAAKA,UAAL,GAAkBA,UAAlB;AACA,SAAKC,uBAAL;AACA,SAAKlC,qBAAL;AAEA,SAAKmC,eAAL,GAAuB,IAAI3E,wBAAJ,CAAoB,IAApB,CAAvB;AACA,SAAK4E,eAAL,GAAuB,IAAI3B,wBAAJ,CAAoB,IAApB,CAAvB;AACD;;;;WAED,mCAA0B;AACxB,WAAK4B,sBAAL,GAA8B,IAA9B;AACD;;;WAED,iCAAwB;AACtB;AACA,WAAKxF,YAAL,GAAoB,KAAKoF,UAAL,CAAgBK,YAApC,CAFsB,CAItB;;AACA,WAAK9C,WAAL,GAAmB,KAAK3C,YAAxB,CALsB,CAOtB;;AACA,WAAKmB,WAAL,GAAmB,KAAKiE,UAAL,CAAgBM,aAAnC;AACA,WAAKtE,YAAL,GAAoB,KAAKgE,UAAL,CAAgBO,aAApC;AACA,WAAKC,YAAL,GAAoB,KAAKR,UAAL,CAAgBQ,YAApC;AACA,WAAKxD,WAAL,GAAmB,IAAnB,CAXsB,CAatB;;AACA,WAAK5F,SAAL,GAAiB,EAAjB;AACA,WAAKqJ,kBAAL,GAA0B,EAA1B;AAGA,WAAKL,sBAAL,GAA8B,IAA9B;AACA,WAAK5C,aAAL,GAAqB,IAArB;AAEA,WAAK3B,KAAL,GAAa,OAAb;AACD;;;WAED,uBAAc;AACZ,WAAKqE,eAAL,CAAqBQ,WAArB;AACD;;;WAED,0BAAiB;AACf,WAAKR,eAAL,CAAqBS,cAArB;AAED;;;WAED,iBAAQjF,SAAR,EAAmB;AACjB,UAAI,CAAC,KAAK0E,sBAAV,EAAkC;AAChC,aAAKA,sBAAL,GAA8B1E,SAA9B;AACA,eAAO,KAAP;AACD;;AAED,aAAQA,SAAS,GAAG,KAAK0E,sBAAlB,GAA4C,KAAKI,YAAxD;AACD;;;WAED,sBAAapJ,SAAb,EAAwB;AACtB,WAAKA,SAAL,GAAiBA,SAAjB;AACD;;;WAGD,gBAAOsE,SAAP,EAAkB;AAChB,UAAI,CAAC,KAAKoD,mBAAL,EAAL,EAAiC;AACjC,UAAI,CAAC,KAAK8B,OAAL,CAAalF,SAAb,CAAL,EAA8B;AAE9B,WAAKwE,eAAL,CAAqBW,MAArB,CAA4BnF,SAA5B;AACD;;;WAED,wBAAeK,WAAf,EAA4B;AAC1B,UAAI,KAAKF,KAAL,KAAe,MAAf,IAAyB,KAAKA,KAAL,KAAe,MAA5C,EAAoD,OAAO,KAAP;AACpD,aAAO,0BAAcE,WAAd,EAA2B,KAAKnB,YAAhC,CAAP;AACD;;;WAED,kBAASmB,WAAT,EAAsB;AACpB,UAAI,KAAKF,KAAL,KAAe,MAAnB,EAA2B,OAAO,KAAP;AAC3B,aAAO,0BAAcE,WAAd,EAA2B,KAAKnB,YAAhC,CAAP;AACD;;;WAED,+BAAsB;AACpB,aAAO,KAAKA,YAAL,KAAsB,KAAK2C,WAAlC;AACD;;;WAED,2BAAkB;AAChB,aAAO,IAAP;AACD;;;WAED,cAAK7B,SAAL,EAAgB;AACd,WAAKyE,eAAL,CAAqBW,IAArB,CAA0BpF,SAA1B;AACD;;;WAED,mBAAU;AACR,WAAKG,KAAL,GAAa,MAAb,CADQ,CAER;AACD;;;;;;;;;;;;;;;ACjGH;;;;;;;;;;AANA,IAAM7F,QAAQ,GAAGC,OAAO,CAAC,aAAD,CAAxB;;AACA,IAAM+E,kBAAkB,GAAGhF,QAAQ,CAACiF,iBAApC;AACA,IAAMC,YAAY,GAAGlF,QAAQ,CAAC+K,iBAA9B;AACA,IAAMC,gBAAgB,GAAGhL,QAAQ,CAACiL,eAAlC;;IAKqBC;AACnB,2BAAY7H,MAAZ,EAAoB;AAAA;;AAClB,SAAKoC,IAAL,CAAUpC,MAAV;AACD;;;;WAED,cAAKA,MAAL,EAAa;AACX,WAAKA,MAAL,GAAcA,MAAd;AACD;;;WAGD,kBAAS;AACP,WAAK8H,WAAL;AACA,WAAKvF,QAAL,GAFO,CAGP;;AACA,UAAIwF,QAAQ,GAAG,KAAKC,iBAAL,EAAf;;AACA,UAAID,QAAJ,EAAc;AACZ,aAAK5E,cAAL,CAAoB4E,QAAQ,CAACtK,KAA7B;AACD,OAFD,MAEO;AACL;AACA,aAAKuC,MAAL,CAAYjC,SAAZ,GAAwB,EAAxB;AACD;AACF;;;WAED,oBAAW;AACT,WAAKiC,MAAL,CAAY4C,KAAZ,GAAoBjB,kBAAkB,IAAI,IAAEE,YAAN,CAAtC;AACD;;;WAED,uBAAc;AACZ,UAAIoG,WAAW,GAAG/H,eAAMH,KAAN,CAAY2B,OAAZ,CAAoB,KAAK1B,MAAL,CAAYuB,YAAhC,CAAlB;;AAEA,UAAI0G,WAAW,CAACzI,aAAhB,EAA+B;AAC7B,aAAK0I,YAAL;AACD;;AACD,UAAID,WAAW,CAAC1I,QAAZ,IAAwB0I,WAAW,CAACzI,aAAxC,EAAuD;AACrD,aAAK2I,QAAL,CAAc,EAAd;AACAF,QAAAA,WAAW,CAACG,WAAZ;AACD;AAEF;;;WAED,kBAAS9J,KAAT,EAAgB;AACd,WAAK0B,MAAL,CAAYqI,QAAZ,CAAqBnI,eAAML,KAAN,GAAcvB,KAAnC;AACD;;;WAED,wBAAe;AACb,WAAK0B,MAAL,CAAYwC,KAAZ,GAAoB,SAApB;;AAEAtC,qBAAMD,QAAN,CAAemB,OAAf,CAAuB,UAACe,MAAD,EAAY;AACjCA,QAAAA,MAAM,CAACkF,WAAP;AACD,OAFD;;AAKAiB,MAAAA,YAAY,CAAC,KAAKtI,MAAL,CAAYuI,cAAb,CAAZ;AACA,WAAKvI,MAAL,CAAYuI,cAAZ,GAA6B/D,UAAU,CAAC,KAAKgE,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAAD,EAA+Bd,gBAA/B,CAAvC;AACD;;;WAED,wBAAe;AACbhD,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;;AACA,UAAI,KAAK5E,MAAL,CAAYwC,KAAZ,KAAsB,SAA1B,EAAqC;AACnC,aAAKxC,MAAL,CAAYwC,KAAZ,GAAoB,QAApB;;AACAtC,uBAAMD,QAAN,CAAemB,OAAf,CAAuB,UAACe,MAAD,EAAS5D,KAAT,EAAmB;AACxCoG,UAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBrG,KAAzB;AACA4D,UAAAA,MAAM,CAACmF,cAAP;AACD,SAHD;AAID;AACF;;;WAED,6BAAoB;AAClB;AACA,UAAI,CAAC,KAAKtH,MAAL,CAAYjC,SAAb,IAA0B,CAAC,KAAK2K,gBAAL,EAA/B,EAAwD;AACtD;AACD,OAJiB,CAMlB;;;AACA,UAAIC,qBAAqB,GAAGzI,eAAMH,KAAN,CAAY0D,sBAAZ,CAC1B,KAAKzD,MAAL,CAAYuB,YADc,EAE1B,KAAKvB,MAAL,CAAYoH,kBAFc,CAA5B,CAPkB,CAYlB;;;AACA,UAAI,CAAAuB,qBAAqB,SAArB,IAAAA,qBAAqB,WAArB,YAAAA,qBAAqB,CAAErJ,QAAvB,MAAoC,MAAxC,EAAgD;AAC9C,aAAKsJ,oBAAL;AACA,eAAOD,qBAAP;AACD,OAhBiB,CAkBlB;;;AACA,UAAIE,wBAAwB,GAAG3I,eAAMH,KAAN,CAAY0D,sBAAZ,CAC7B,KAAKzD,MAAL,CAAYuB,YADiB,EAE7B,KAAKvB,MAAL,CAAYjC,SAFiB,CAA/B,CAnBkB,CAwBlB;;;AACA,UAAI,CAAA8K,wBAAwB,SAAxB,IAAAA,wBAAwB,WAAxB,YAAAA,wBAAwB,CAAEvJ,QAA1B,MAAuC,MAA3C,EAAmD;AACjD,aAAK6D,cAAL,CAAoB0F,wBAAwB,CAACpL,KAA7C;AACA,eAAOoL,wBAAP;AACD;AACF;;;WAGD,wBAAepL,KAAf,EAAsB;AAAA;;AACpB,WAAKuC,MAAL,CAAYkE,WAAZ,GAA0BzG,KAA1B;AACA,WAAKuC,MAAL,CAAYmE,aAAZ,GAA4B,IAAIC,IAAJ,GAAWC,OAAX,EAA5B;AACAE,MAAAA,MAAM,CAACC,UAAP,CAAkB,YAAM;AACtB,QAAA,KAAI,CAACxE,MAAL,CAAYuB,YAAZ,GAA2B9D,KAA3B;AACD,OAFD,EAEG,KAAKuC,MAAL,CAAY4C,KAFf;AAGD;;;WAID,4BAAkB;AAChB,UAAIkG,kBAAkB,GAAG,IAAI1E,IAAJ,GAAWC,OAAX,KAAuB,KAAKrE,MAAL,CAAY+I,cAA5D;AACA,UAAGD,kBAAkB,GAAG,IAAxB,EAA8B,OAAO,IAAP;AAC9B,aAAO,KAAK9I,MAAL,CAAYoH,kBAAnB;AACD;;;WAED,gCAAuB;AACrB,WAAKpH,MAAL,CAAYjC,SAAZ,GAAwB,KAAKiC,MAAL,CAAYoH,kBAApC;AACD;;;;;;;;;;;;;;;ACvHH;;AAEA;;;;;;;;;;;;;;;;;;;;;;AARA,IAAMzK,QAAQ,GAAGC,OAAO,CAAC,aAAD,CAAxB;;AACA,IAAMsC,SAAS,GAAGvC,QAAQ,CAACwC,QAA3B;AACA,IAAM0F,WAAW,GAAGlI,QAAQ,CAACmI,UAA7B;AACA,IAAMC,aAAa,GAAGpI,QAAQ,CAACqI,qBAA/B;AACA,IAAMC,WAAW,GAAGtI,QAAQ,CAACuI,UAA7B;;IAMqB8D;AACnB,2BAAYhJ,MAAZ,EAAoB;AAAA;;AAClB,SAAKoC,IAAL,CAAUpC,MAAV;AACD;;;;WAED,cAAKA,MAAL,EAAa;AACX,WAAKA,MAAL,GAAcA,MAAd;AACA,WAAKoF,sBAAL,GAA8B,IAA9B;AACA,WAAKC,aAAL,GAAqB,CAArB;AACA,WAAKzC,KAAL,GAAa,CAAb;AACA,WAAKqG,iBAAL,GAAyB,KAAzB;AACD;;;WAGD,cAAK5G,SAAL,EAAgB;AACd,UAAI,KAAKiD,sBAAL,EAAJ,EAAmC;AACjC;AACD;;AAED,UAAI,KAAKtF,MAAL,CAAYwC,KAAZ,KAAsB,MAAtB,IAAgC,CAAC,KAAKyG,iBAA1C,EAA6D;AAC3D,aAAKA,iBAAL,GAAyB,IAAzB;AACA,aAAKC,cAAL,CAAoB7G,SAApB;AACD;;AAED,UAAG,CAAC,KAAK+C,sBAAT,EAAgC;AAC9B,aAAKA,sBAAL,GAA8B/C,SAA9B;AACD;;AACD,UAAIzB,CAAJ,EAAOF,CAAP;;AAbc,iCAcL,KAAK6E,cAAL,EAdK;;AAAA;;AAcb3E,MAAAA,CAda;AAcVF,MAAAA,CAdU;AAed,WAAK8E,YAAL,CAAkB5E,CAAlB,EAAqBF,CAArB,EAAwB2B,SAAxB;AACD;;;WAED,wBAAeA,SAAf,EAA0B;AACxB,WAAKgD,aAAL,GAAqB,CAArB;AACA,WAAKD,sBAAL,GAA8B/C,SAA9B;AACD;;;WAED,kCAAyB;AACvB,UAAI,KAAKrC,MAAL,CAAYkE,WAAZ,CAAwB,CAAxB,MAA+B,EAA/B,IAAqC,KAAKlE,MAAL,CAAYuB,YAAZ,CAAyB,CAAzB,MAAgC,CAAzE,EAA4E;AAC1E,eAAO,IAAP;AACD;;AACD,UAAI,KAAKvB,MAAL,CAAYkE,WAAZ,CAAwB,CAAxB,MAA+B,CAA/B,IAAoC,KAAKlE,MAAL,CAAYuB,YAAZ,CAAyB,CAAzB,MAAgC,EAAxE,EAA4E;AAC1E,eAAO,IAAP;AACD;;AACD,aAAO,KAAP;AACD;;;WAED,0BAAgB;AACd,UAAIX,CAAJ,EAAOF,CAAP;;AACA,UAAI,CAAC,KAAKV,MAAL,CAAYjC,SAAb,IAA0B,KAAKiC,MAAL,CAAYwC,KAAZ,KAAsB,MAApD,EAA4D;AAC1D;AACA5B,QAAAA,CAAC,GAAG,KAAKZ,MAAL,CAAYuB,YAAZ,CAAyB,CAAzB,CAAJ;AACAb,QAAAA,CAAC,GAAG,KAAKV,MAAL,CAAYuB,YAAZ,CAAyB,CAAzB,CAAJ;AACD,OAJD,MAKI;AACF;AACA,YAAImE,iBAAiB,GAAG,KAAKC,sBAAL,EAAxB,CAFE,CAGF;;AACA,YAAIC,MAAM,GAAG,KAAK5F,MAAL,CAAYkE,WAAZ,CAAwB,CAAxB,IAA6B,KAAKlE,MAAL,CAAYuB,YAAZ,CAAyB,CAAzB,CAA1C;AACA,YAAIsE,MAAM,GAAG,KAAK7F,MAAL,CAAYkE,WAAZ,CAAwB,CAAxB,IAA6B,KAAKlE,MAAL,CAAYuB,YAAZ,CAAyB,CAAzB,CAA1C,CALE,CAOF;;AACAX,QAAAA,CAAC,GAAG,KAAKZ,MAAL,CAAYuB,YAAZ,CAAyB,CAAzB,IAA8BqE,MAAM,GAAGF,iBAA3C;AACAhF,QAAAA,CAAC,GAAG,KAAKV,MAAL,CAAYuB,YAAZ,CAAyB,CAAzB,IAA8BsE,MAAM,GAAGH,iBAA3C,CATE,CAWF;AACD;;AAED,aAAM,CAAC9E,CAAD,EAAGF,CAAH,CAAN;AACD;;;WAED,gCAAuB2B,SAAvB,EAAiC;AAC/B,UAAI,KAAKrC,MAAL,CAAYwC,KAAZ,KAAsB,MAAtB,IAAgC,KAAK6C,aAAL,GAAqB,CAAzD,EAA4D;AAC1D,aAAKA,aAAL,GAAqB,CAArB;AACA,aAAKD,sBAAL,GAA8B/C,SAA9B;AACD,OAHD,MAIK;AACH,aAAKgD,aAAL;AAEA,aAAKA,aAAL,GAAqB,KAAKA,aAAL,GAAqBJ,WAA1C;AACA,aAAKG,sBAAL,GAA8B/C,SAA9B;AACD;AACF;;;WAED,kCAAyB;AACvB,UAAIyD,gBAAgB,GAAG,IAAI1B,IAAJ,GAAWC,OAAX,EAAvB;AACA,aAAO,CAACyB,gBAAgB,GAAG,KAAK9F,MAAL,CAAYmE,aAAhC,IAAiD,KAAKnE,MAAL,CAAY4C,KAApE;AACD;;;WAGD,sBAAahC,CAAb,EAAgBF,CAAhB,EAAmB2B,SAAnB,EAA8B;AAC5B,UAAI0D,mBAAmB,GAAG1D,SAAS,GAAG,KAAK+C,sBAA3C;;AACA,UAAGW,mBAAmB,GAAGhB,aAAzB,EAAuC;AACrC,aAAKiB,sBAAL,CAA4B3D,SAA5B;AACD;;AACD,UAAI,KAAKrC,MAAL,CAAYwC,KAAZ,KAAsB,MAA1B,EAAkC;AAChC,aAAK2G,SAAL,CAAevI,CAAf,EAAkBF,CAAlB;AACD,OAFD,MAGK;AACH,aAAKuF,QAAL,CAAcrF,CAAd,EAAiBF,CAAjB;AACA,aAAKwF,QAAL,CAActF,CAAd,EAAiBF,CAAjB;AACD;AACF;;;WAED,mBAAUE,CAAV,EAAaF,CAAb,EAAgB;AACd,UAAM0I,cAAc,GAAG,CAAvB;AACA,UAAMC,mBAAmB,GAAG,EAA5B;AACA,UAAMC,UAAU,GAAG,CACjB;AAAE1I,QAAAA,CAAC,EAAE,CAAL;AAAQF,QAAAA,CAAC,EAAE;AAAX,OADiB,EAEjB;AAAEE,QAAAA,CAAC,EAAE,CAAL;AAAQF,QAAAA,CAAC,EAAE;AAAX,OAFiB,EAGjB;AAAEE,QAAAA,CAAC,EAAE,CAAL;AAAQF,QAAAA,CAAC,EAAE;AAAX,OAHiB,EAIjB;AAAEE,QAAAA,CAAC,EAAE,CAAL;AAAQF,QAAAA,CAAC,EAAE;AAAX,OAJiB,CAAnB;;AAMA3E,kBAAIoK,IAAJ;;AAEA,UAAMpF,MAAM,GAAGH,CAAC,GAAG1B,SAAJ,GAAgBmK,mBAAmB,GAAG,CAArD;AACA,UAAMrI,MAAM,GAAG,CAACN,CAAC,GAAG,EAAL,IAAYxB,SAAZ,GAAwBmK,mBAAmB,GAAG,CAA7D;;AAEAtN,kBAAI0D,SAAJ,CACEnD,oBADF,EAEEgN,UAAU,CAAC,KAAKjE,aAAN,CAAV,CAA+BzE,CAA/B,GAAmCiE,WAAnC,GAAiD,CAAjD,GAAqDuE,cAFvD,EAGAE,UAAU,CAAC,KAAKjE,aAAN,CAAV,CAA+B3E,CAA/B,GAAmCmE,WAAnC,GAAiD,CAAjD,GAAqDuE,cAAc,GAAG,GAHtE,EAIElK,SAAS,GAAG,CAAZ,GAAgBkK,cAAc,GAAG,CAJnC,EAKElK,SAAS,GAAG,CAAZ,GAAekK,cAAc,GAAG,CALlC,EAMErI,MANF,EAOEC,MAPF,EAQE9B,SAAS,GAAG,CARd,EASEA,SAAS,GAAG,CATd;;AAYAnD,kBAAIyK,OAAJ;AAED;;;WAGD,kBAAS5F,CAAT,EAAYF,CAAZ,EAAc;AACZ,UAAMhB,cAAc,GAAG,CAAvB;;AAEA3D,kBAAIoK,IAAJ;;AAEAvF,MAAAA,CAAC,GAAGA,CAAC,GAAG1B,SAAJ,GAAgBQ,cAAc,GAAG,CAArC;AACAgB,MAAAA,CAAC,GAAG,CAACA,CAAC,GAAG,GAAL,IAAYxB,SAAZ,GAAwBQ,cAAc,GAAG,CAA7C;AAEA,UAAI0G,WAAW,GAAG,CAAlB;AACA,UAAIf,aAAa,GAAG,KAAKA,aAAzB;AACA,UAAIkE,kBAAkB,GAAG,CAAzB;AACA,UAAIC,mBAAmB,GAAG,CAA1B;AACA,UAAInD,UAAU,GAAG,KAAjB;;AAEA,UAAG,KAAKrG,MAAL,CAAYjC,SAAZ,KAA0B,MAA1B,IAAoC,KAAKiC,MAAL,CAAYjC,SAAZ,KAA0B,OAAjE,EAAyE;AACvEqI,QAAAA,WAAW,GAAG,CAAd;AACAmD,QAAAA,kBAAkB,GAAG,CAArB;AAED;;AAED,UAAI,KAAKvJ,MAAL,CAAYjC,SAAZ,KAA0B,MAA9B,EAAsC;AACpCsI,QAAAA,UAAU,GAAG,IAAb;AACD;;AAEDhB,MAAAA,aAAa,IAAIkE,kBAAjB;;AAEA,UAAGlE,aAAa,IAAImE,mBAApB,EAAwC;AACtCpD,QAAAA,WAAW;AACXf,QAAAA,aAAa,GAAGA,aAAa,GAAGmE,mBAAhC;AACD;;AAED,UAAInD,UAAJ,EAAgB;AACdtK,oBAAIuK,SAAJ,CAAe1F,CAAC,GAAG1B,SAAnB,EAA8BwB,CAA9B;;AACA3E,oBAAIwK,KAAJ,CAAU,CAAC,CAAX,EAAc,CAAd;;AACA3F,QAAAA,CAAC,GAAG,CAAJ;AACAF,QAAAA,CAAC,GAAE,CAAH;AACD;;AAED3E,kBAAI0D,SAAJ,CACEnD,oBADF,EAEE+I,aAAa,GAAGR,WAFlB,EAGEuB,WAAW,GAAGvB,WAHhB,EAIE3F,SAJF,EAKEA,SALF,EAME0B,CANF,EAOEF,CAPF,EAQExB,SAAS,GAAGQ,cARd,EASER,SAAS,GAAGQ,cATd;;AAYA3D,kBAAIyK,OAAJ;AAED;;;WAED,kBAAS5F,CAAT,EAAYF,CAAZ,EAAe;AACb,UAAMhB,cAAc,GAAG,CAAvB;;AAEA3D,kBAAIoK,IAAJ;;AAEAvF,MAAAA,CAAC,GAAGA,CAAC,GAAG1B,SAAJ,GAAgBQ,cAAc,GAAG,CAArC;AACAgB,MAAAA,CAAC,GAAG,CAACA,CAAC,GAAG,IAAL,IAAaxB,SAAb,GAAyBQ,cAAc,GAAG,CAA9C;AAEA,UAAI0G,WAAW,GAAG,CAAlB;AACA,UAAIf,aAAa,GAAG,KAAKA,aAAL,IAAsB,CAAtB,GAA0B,CAA1B,GAA8B,CAAlD;AACA,UAAIgB,UAAU,GAAG,KAAjB;AACA,UAAIkD,kBAAkB,GAAG,CAAzB;;AAEA,UAAI,KAAKvJ,MAAL,CAAYjC,SAAZ,KAA0B,IAA9B,EAAoC;AAClCwL,QAAAA,kBAAkB,GAAG,CAArB;AACD;;AACD,UAAI,KAAKvJ,MAAL,CAAYjC,SAAZ,KAA0B,OAA9B,EAAuC;AACrCwL,QAAAA,kBAAkB,GAAG,CAArB;AACD;;AACD,UAAI,KAAKvJ,MAAL,CAAYjC,SAAZ,KAA0B,MAA9B,EAAsC;AACpCwL,QAAAA,kBAAkB,GAAG,CAArB;AACAlD,QAAAA,UAAU,GAAG,IAAb;AACD;;AAIDhB,MAAAA,aAAa,IAAIkE,kBAAjB;;AAEA,UAAIlD,UAAJ,EAAgB;AACdtK,oBAAIuK,SAAJ,CAAe1F,CAAC,GAAG1B,SAAnB,EAA8BwB,CAA9B;;AACA3E,oBAAIwK,KAAJ,CAAU,CAAC,CAAX,EAAc,CAAd;;AACA3F,QAAAA,CAAC,GAAG,CAAJ;AACAF,QAAAA,CAAC,GAAE,CAAH;AACD;;AAED3E,kBAAI0D,SAAJ,CACEnD,oBADF,EAEE+I,aAAa,GAAGR,WAFlB,EAGE,CAHF,EAIE3F,SAJF,EAKEA,SALF,EAME0B,CANF,EAOEF,CAPF,EAQExB,SAAS,GAAGQ,cARd,EASER,SAAS,GAAGQ,cATd;;AAYA3D,kBAAIyK,OAAJ;AACD;;;;;;;;;;;;;;;ACvPH;;AAEA;;AACA;;AAEA;;;;;;;;;;IACqBiD;AACnB,kBAAYhM,KAAZ,EAAmB;AAAA;;AACjB,SAAK2E,IAAL,CAAU3E,KAAV;AACA,SAAKiM,eAAL,GAAuB,IAAI7B,wBAAJ,CAAoB,IAApB,CAAvB;AACA,SAAK8B,eAAL,GAAuB,IAAIX,wBAAJ,CAAoB,IAApB,CAAvB;AACD;;;;WAED,gBAAsB;AAAA,UAAjBvL,KAAiB,uEAAT,CAAC,CAAD,EAAI,EAAJ,CAAS;AACpB;AACF,WAAK8D,YAAL,GAAoB9D,KAApB,CAFsB,CAIpB;;AACF,WAAKyG,WAAL,GAAmBzG,KAAnB,CALsB,CAOpB;AAEA;;AAEA,WAAKM,SAAL,GAAiB,EAAjB;AAEA,WAAKqJ,kBAAL,GAA0B,EAA1B;AACA,WAAK2B,cAAL,GAAsB,IAAtB;AACA,WAAKR,cAAL;AACA,WAAK/F,KAAL,GAAa,QAAb;AACD;;;WAGD,kBAAS;AACP,UAAI,CAAC,KAAKiD,mBAAL,EAAL,EAAiC;AAC/B;AACD;;AAED,WAAKiE,eAAL,CAAqBlC,MAArB;AACD;;;WAKD,kBAAS3H,KAAT,EAAgB;AACdK,qBAAML,KAAN,GAAcA,KAAd;AACA/D,4BAAc8N,WAAd,GAA4B1J,eAAML,KAAlC;AACD;;;WAED,+BAAsB9B,SAAtB,EAAiC;AAC/B,WAAKqJ,kBAAL,GAA0BrJ,SAA1B;AACA,WAAKgL,cAAL,GAAsB,IAAI3E,IAAJ,GAAWC,OAAX,EAAtB;AACD;;;WAED,+BAAsB;AACpB,aAAO,KAAK9C,YAAL,KAAsB,KAAK2C,WAAlC;AACD;;;WAED,mBAAU;AACR,WAAK1B,KAAL,GAAa,MAAb;AACD;;;WAED,cAAKH,SAAL,EAAgB;AACd,WAAKsH,eAAL,CAAqBlC,IAArB,CAA0BpF,SAA1B;AACD;;;;;;;;;;;;;;;AChEH;;AACA;;AAIA;;AACA;;AACA;;;;;;;;;;AAEA,IAAM1F,QAAQ,GAAGC,OAAO,CAAC,aAAD,CAAxB;;AACA,IAAMiN,aAAa,GAAGlN,QAAQ,CAACmN,YAA/B;;IAEqBC;AACnB,kBAAc;AAAA;;AAEZ7J,mBAAML,KAAN,GAAc,CAAd,CAFY,CAGZ;;AACAK,mBAAMJ,SAAN,GAAkB,OAAlB;AAEA,SAAKkK,QAAL;AACD;;;;WAED,oBAAW;AACT9J,qBAAMH,KAAN,GAAc,IAAIQ,cAAJ,EAAd;AACAL,qBAAMF,MAAN,GAAe,IAAIyJ,eAAJ,EAAf;AACAvJ,qBAAMD,QAAN,GAAiB,KAAKgK,YAAL,EAAjB,CAHS,CAKT;;AACA/J,qBAAMJ,SAAN,GAAkB,OAAlB;AAEA,WAAK2H,IAAL;AACD;;;WAED,yBAAgB;AACd,WAAKyC,gBAAL;AACA3F,MAAAA,MAAM,CAAC4F,qBAAP,CAA6B,KAAKC,IAAL,CAAU3B,IAAV,CAAe,IAAf,CAA7B;AACD;;;WAED,cAAKpG,SAAL,EAAgB;AACd,UAAIgI,QAAQ,GAAGhI,SAAS,GAAG,KAAKiI,UAAhC;AACA,WAAKA,UAAL,GAAkBjI,SAAlB;AAEA,WAAKoF,IAAL,CAAU4C,QAAV,EAAoBhI,SAApB;AACA,WAAKmF,MAAL,CAAY6C,QAAZ,EAAsBhI,SAAtB;AAEAkC,MAAAA,MAAM,CAAC4F,qBAAP,CAA6B,KAAKC,IAAL,CAAU3B,IAAV,CAAe,IAAf,CAA7B;AACD;;;WAED,gBAAO4B,QAAP,EAAiBhI,SAAjB,EAA4B;AAC1B;AACA,WAAKkI,eAAL;;AACA,UAAIrK,eAAMJ,SAAN,KAAoB,KAAxB,EAA+B;AAC7BI,uBAAMF,MAAN,CAAawH,MAAb;;AACA,aAAKgD,cAAL,CAAoBnI,SAApB;AACD;AACF;;;WAED,2BAAkB;AAChB,UAAInC,eAAMF,MAAN,CAAawC,KAAb,KAAuB,SAA3B,EAAsC;AACpC,aAAKiI,mBAAL;AACD;;AACD,UAAI,KAAKC,YAAL,EAAJ,EAAyB;AACvBxK,uBAAMF,MAAN,CAAa2K,OAAb;;AACAzK,uBAAMJ,SAAN,GAAkB,KAAlB;AACD;AACF;;;WAED,+BAAsB;AACpB,WAAK,IAAIb,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGiB,eAAMD,QAAN,CAAejB,MAAnC,EAA2CC,CAAC,EAA5C,EAA+C;AAC7C,YAAIkD,MAAM,GAAGjC,eAAMD,QAAN,CAAehB,CAAf,CAAb;;AACA,YAAIkD,MAAM,CAACyI,QAAP,CAAgB1K,eAAMF,MAAN,CAAauB,YAA7B,CAAJ,EAAgD;AAC9CY,UAAAA,MAAM,CAACwI,OAAP;AACD;AACF;AAEF;;;WAED,wBAAe;AACb,UAAIE,YAAY,GAAG,KAAnB;;AACAC,MAAAA,UAAU,EAAG,KAAK,IAAI7L,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGiB,eAAMD,QAAN,CAAejB,MAAnC,EAA2CC,CAAC,EAA5C,EAA+C;AAC1D,YAAIkD,MAAM,GAAGjC,eAAMD,QAAN,CAAehB,CAAf,CAAb;;AACA,YAAIkD,MAAM,CAAC4I,cAAP,CAAsB7K,eAAMF,MAAN,CAAauB,YAAnC,CAAJ,EAAsD;AACpDsJ,UAAAA,YAAY,GAAG,IAAf;AACA,gBAAMC,UAAN;AACD;AACF;;AACD,aAAOD,YAAP;AACD;;;WAED,cAAKR,QAAL,EAAehI,SAAf,EAA0B;AACxB;AACAtG,kBAAIiP,SAAJ,GAAgB,SAAhB;;AACAjP,kBAAIkP,QAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmBtP,uBAAesF,KAAlC,EAAyCtF,uBAAeuF,MAAxD,EAHwB,CAIxB;;;AACAhB,qBAAMH,KAAN,CAAYmL,SAAZ;;AACA,WAAKC,YAAL,CAAkB9I,SAAlB;;AACAnC,qBAAMF,MAAN,CAAayH,IAAb,CAAkBpF,SAAlB;AACD,MAGD;AACA;AACA;;;;WACA,wBAAe;AACb,UAAMpC,QAAQ,GAAG,EAAjB;AACA4J,MAAAA,aAAa,CAACzI,OAAd,CAAsB,UAACuF,UAAD,EAAgB;AACpC1G,QAAAA,QAAQ,CAACa,IAAT,CAAc,IAAI4F,eAAJ,CAAWC,UAAX,CAAd;AACD,OAFD;AAGA,aAAO1G,QAAP;AACD;;;WAED,wBAAeoC,SAAf,EAA0B;AACxBnC,qBAAMD,QAAN,CAAemB,OAAf,CAAuB,UAACe,MAAD,EAAY;AACjCA,QAAAA,MAAM,CAACqF,MAAP,CAAcnF,SAAd;AACD,OAFD;AAGD;;;WAED,sBAAaA,SAAb,EAAwB;AACtBnC,qBAAMD,QAAN,CAAemB,OAAf,CAAuB,UAACe,MAAD,EAAY;AACjCA,QAAAA,MAAM,CAACsF,IAAP,CAAYpF,SAAZ;AACD,OAFD;AAGD;;;WAGD,4BAAmB;AACjBzG,MAAAA,QAAQ,CAACwP,gBAAT,CAA0B,SAA1B,EAAqC,KAAKC,mBAAL,CAAyB5C,IAAzB,CAA8B,IAA9B,CAArC;AACD;;;WAED,8BAAqB;AACnB7M,MAAAA,QAAQ,CAAC0P,mBAAT,CAA6B,SAA7B,EAAwC,KAAKD,mBAA7C;AACD;;;WAED,6BAAoBE,KAApB,EAA2B;AACzB,UAAIC,OAAO,GAAGD,KAAK,CAACE,KAApB,CADyB,CAGzB;;AACA,UAAID,OAAO,KAAK,EAAZ,IAAkBA,OAAO,KAAK,EAAlC,EAAsC;AACpCtL,uBAAMF,MAAN,CAAa0L,qBAAb,CAAmC,MAAnC;;AACAH,QAAAA,KAAK,CAACI,cAAN;AACD,OAPwB,CAQzB;;;AACA,UAAIH,OAAO,KAAK,EAAZ,IAAkBA,OAAO,KAAK,EAAlC,EAAsC;AACpCtL,uBAAMF,MAAN,CAAa0L,qBAAb,CAAmC,OAAnC;;AACFH,QAAAA,KAAK,CAACI,cAAN;AACC,OAZwB,CAazB;;;AACA,UAAIH,OAAO,KAAK,EAAZ,IAAkBA,OAAO,KAAK,EAAlC,EAAsC;AACpCtL,uBAAMF,MAAN,CAAa0L,qBAAb,CAAmC,IAAnC;;AACFH,QAAAA,KAAK,CAACI,cAAN;AACC,OAjBwB,CAkBzB;;;AACA,UAAIH,OAAO,KAAK,EAAZ,IAAkBA,OAAO,KAAK,EAAlC,EAAsC;AACpCtL,uBAAMF,MAAN,CAAa0L,qBAAb,CAAmC,MAAnC;;AACFH,QAAAA,KAAK,CAACI,cAAN;AACC;AACF;;;;;;;;;;AC3JH;;;;AAEA,SAASC,QAAT,CAAkBC,EAAlB,EAAsB;AAClB;AACA,MAAIjQ,QAAQ,CAACkQ,UAAT,KAAwB,UAAxB,IAAsClQ,QAAQ,CAACkQ,UAAT,KAAwB,aAAlE,EAAiF;AAC7E;AACAtH,IAAAA,UAAU,CAACqH,EAAD,EAAK,CAAL,CAAV;AACH,GAHD,MAGO;AACHjQ,IAAAA,QAAQ,CAACwP,gBAAT,CAA0B,kBAA1B,EAA8CS,EAA9C;AACH;AACJ;;AAGDD,QAAQ,CAAC,YAAI;AACT,MAAMG,IAAI,GAAG,IAAIhC,aAAJ,EAAb;AACAgC,EAAAA,IAAI,CAAC/B,QAAL;AACA+B,EAAAA,IAAI,CAACC,aAAL;AACH,CAJO,CAAR;;;ACbA,IAAIC,UAAU,GAAG,4BAAjB;AAEA,IAAIC,SAAS,GAAGzP,MAAM,CAAC0P,MAAP,CAAcC,MAA9B;;AAEA,SAASA,MAAT,CAAgBC,UAAhB,EAA4B;AAC1BH,EAAAA,SAAS,CAACI,IAAV,CAAe,IAAf,EAAqBD,UAArB;AACA,OAAKE,GAAL,GAAW;AACTC,IAAAA,IAAI,EAAE/P,MAAM,CAAC0P,MAAP,CAAcM,OADX;AAETC,IAAAA,gBAAgB,EAAE,EAFT;AAGTC,IAAAA,iBAAiB,EAAE,EAHV;AAITC,IAAAA,MAAM,EAAE,UAAUf,EAAV,EAAc;AACpB,WAAKa,gBAAL,CAAsB5L,IAAtB,CAA2B+K,EAAE,IAAI,YAAY,CAAE,CAA/C;AACD,KANQ;AAOTgB,IAAAA,OAAO,EAAE,UAAUhB,EAAV,EAAc;AACrB,WAAKc,iBAAL,CAAuB7L,IAAvB,CAA4B+K,EAA5B;AACD;AATQ,GAAX;AAYApP,EAAAA,MAAM,CAAC0P,MAAP,CAAcM,OAAd,GAAwB,IAAxB;AACD;;AAEDhQ,MAAM,CAAC0P,MAAP,CAAcC,MAAd,GAAuBA,MAAvB;AACA,IAAIU,aAAJ,EAAmBC,cAAnB;AAEA,IAAIC,MAAM,GAAGvQ,MAAM,CAAC0P,MAAP,CAAca,MAA3B;;AACA,IAAI,CAAC,CAACA,MAAD,IAAW,CAACA,MAAM,CAACC,eAApB,KAAwC,OAAOC,SAAP,KAAqB,WAAjE,EAA8E;AAC5E,MAAIC,QAAQ,GAAG,MAA4BC,QAAQ,CAACD,QAApD;AACA,MAAIE,QAAQ,GAAGD,QAAQ,CAACC,QAAT,KAAsB,QAAtB,GAAiC,KAAjC,GAAyC,IAAxD;AACA,MAAIC,EAAE,GAAG,IAAIJ,SAAJ,CAAcG,QAAQ,GAAG,KAAX,GAAmBF,QAAnB,GAA8B,GAA9B,aAA2D,GAAzE,CAAT;;AACAG,EAAAA,EAAE,CAACC,SAAH,GAAe,UAAShC,KAAT,EAAgB;AAC7BuB,IAAAA,aAAa,GAAG,EAAhB;AACAC,IAAAA,cAAc,GAAG,EAAjB;AAEA,QAAIP,IAAI,GAAGgB,IAAI,CAACC,KAAL,CAAWlC,KAAK,CAACiB,IAAjB,CAAX;;AAEA,QAAIA,IAAI,CAACkB,IAAL,KAAc,QAAlB,EAA4B;AAC1B,UAAIC,OAAO,GAAG,KAAd;AACAnB,MAAAA,IAAI,CAACoB,MAAL,CAAYxM,OAAZ,CAAoB,UAASyM,KAAT,EAAgB;AAClC,YAAI,CAACA,KAAK,CAACC,KAAX,EAAkB;AAChB,cAAIC,SAAS,GAAGC,cAAc,CAACC,MAAM,CAACC,aAAR,EAAuBL,KAAK,CAACM,EAA7B,CAA9B;;AACA,cAAIJ,SAAJ,EAAe;AACbJ,YAAAA,OAAO,GAAG,IAAV;AACD;AACF;AACF,OAPD,EAF0B,CAW1B;;AACAA,MAAAA,OAAO,GAAGA,OAAO,IAAInB,IAAI,CAACoB,MAAL,CAAYQ,KAAZ,CAAkB,UAASP,KAAT,EAAgB;AACrD,eAAOA,KAAK,CAACH,IAAN,KAAe,KAAf,IAAwBG,KAAK,CAACQ,SAAN,CAAgBC,EAA/C;AACD,OAFoB,CAArB;;AAIA,UAAIX,OAAJ,EAAa;AACXhJ,QAAAA,OAAO,CAAC4J,KAAR;AAEA/B,QAAAA,IAAI,CAACoB,MAAL,CAAYxM,OAAZ,CAAoB,UAAUyM,KAAV,EAAiB;AACnCW,UAAAA,QAAQ,CAACP,MAAM,CAACC,aAAR,EAAuBL,KAAvB,CAAR;AACD,SAFD;AAIAd,QAAAA,cAAc,CAAC3L,OAAf,CAAuB,UAAUqN,CAAV,EAAa;AAClCC,UAAAA,YAAY,CAACD,CAAC,CAAC,CAAD,CAAF,EAAOA,CAAC,CAAC,CAAD,CAAR,CAAZ;AACD,SAFD;AAGD,OAVD,MAUO,IAAIrB,QAAQ,CAACuB,MAAb,EAAqB;AAAE;AAC5BvB,QAAAA,QAAQ,CAACuB,MAAT;AACD;AACF;;AAED,QAAInC,IAAI,CAACkB,IAAL,KAAc,QAAlB,EAA4B;AAC1BJ,MAAAA,EAAE,CAACsB,KAAH;;AACAtB,MAAAA,EAAE,CAACuB,OAAH,GAAa,YAAY;AACvBzB,QAAAA,QAAQ,CAACuB,MAAT;AACD,OAFD;AAGD;;AAED,QAAInC,IAAI,CAACkB,IAAL,KAAc,gBAAlB,EAAoC;AAClC/I,MAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;AAEAkK,MAAAA,kBAAkB;AACnB;;AAED,QAAItC,IAAI,CAACkB,IAAL,KAAc,OAAlB,EAA2B;AACzB/I,MAAAA,OAAO,CAACoK,KAAR,CAAc,kBAAkBvC,IAAI,CAACuC,KAAL,CAAWC,OAA7B,GAAuC,IAAvC,GAA8CxC,IAAI,CAACuC,KAAL,CAAWE,KAAvE;AAEAH,MAAAA,kBAAkB;AAElB,UAAII,OAAO,GAAGC,kBAAkB,CAAC3C,IAAD,CAAhC;AACA5Q,MAAAA,QAAQ,CAACwT,IAAT,CAAcC,WAAd,CAA0BH,OAA1B;AACD;AACF,GA1DD;AA2DD;;AAED,SAASJ,kBAAT,GAA8B;AAC5B,MAAII,OAAO,GAAGtT,QAAQ,CAACC,cAAT,CAAwBoQ,UAAxB,CAAd;;AACA,MAAIiD,OAAJ,EAAa;AACXA,IAAAA,OAAO,CAACI,MAAR;AACD;AACF;;AAED,SAASH,kBAAT,CAA4B3C,IAA5B,EAAkC;AAChC,MAAI0C,OAAO,GAAGtT,QAAQ,CAAC2T,aAAT,CAAuB,KAAvB,CAAd;AACAL,EAAAA,OAAO,CAACf,EAAR,GAAalC,UAAb,CAFgC,CAIhC;;AACA,MAAI+C,OAAO,GAAGpT,QAAQ,CAAC2T,aAAT,CAAuB,KAAvB,CAAd;AACA,MAAIC,UAAU,GAAG5T,QAAQ,CAAC2T,aAAT,CAAuB,KAAvB,CAAjB;AACAP,EAAAA,OAAO,CAACS,SAAR,GAAoBjD,IAAI,CAACuC,KAAL,CAAWC,OAA/B;AACAQ,EAAAA,UAAU,CAACC,SAAX,GAAuBjD,IAAI,CAACuC,KAAL,CAAWE,KAAlC;AAEAC,EAAAA,OAAO,CAACQ,SAAR,GACE,2NACE,mFADF,GAEE,yEAFF,GAGE,qEAHF,GAG0EV,OAAO,CAACU,SAHlF,GAG8F,QAH9F,GAIE,OAJF,GAIYF,UAAU,CAACE,SAJvB,GAImC,QAJnC,GAKA,QANF;AASA,SAAOR,OAAP;AAED;;AAED,SAASS,UAAT,CAAoBxD,MAApB,EAA4BgC,EAA5B,EAAgC;AAC9B,MAAIyB,OAAO,GAAGzD,MAAM,CAACyD,OAArB;;AACA,MAAI,CAACA,OAAL,EAAc;AACZ,WAAO,EAAP;AACD;;AAED,MAAIC,OAAO,GAAG,EAAd;AACA,MAAIC,CAAJ,EAAOC,CAAP,EAAUC,GAAV;;AAEA,OAAKF,CAAL,IAAUF,OAAV,EAAmB;AACjB,SAAKG,CAAL,IAAUH,OAAO,CAACE,CAAD,CAAP,CAAW,CAAX,CAAV,EAAyB;AACvBE,MAAAA,GAAG,GAAGJ,OAAO,CAACE,CAAD,CAAP,CAAW,CAAX,EAAcC,CAAd,CAAN;;AACA,UAAIC,GAAG,KAAK7B,EAAR,IAAe8B,KAAK,CAACC,OAAN,CAAcF,GAAd,KAAsBA,GAAG,CAACA,GAAG,CAAChR,MAAJ,GAAa,CAAd,CAAH,KAAwBmP,EAAjE,EAAsE;AACpE0B,QAAAA,OAAO,CAAC/O,IAAR,CAAagP,CAAb;AACD;AACF;AACF;;AAED,MAAI3D,MAAM,CAACa,MAAX,EAAmB;AACjB6C,IAAAA,OAAO,GAAGA,OAAO,CAACM,MAAR,CAAeR,UAAU,CAACxD,MAAM,CAACa,MAAR,EAAgBmB,EAAhB,CAAzB,CAAV;AACD;;AAED,SAAO0B,OAAP;AACD;;AAED,SAASrB,QAAT,CAAkBrC,MAAlB,EAA0B0B,KAA1B,EAAiC;AAC/B,MAAI+B,OAAO,GAAGzD,MAAM,CAACyD,OAArB;;AACA,MAAI,CAACA,OAAL,EAAc;AACZ;AACD;;AAED,MAAIA,OAAO,CAAC/B,KAAK,CAACM,EAAP,CAAP,IAAqB,CAAChC,MAAM,CAACa,MAAjC,EAAyC;AACvC,QAAInB,EAAE,GAAG,IAAIuE,QAAJ,CAAa,SAAb,EAAwB,QAAxB,EAAkC,SAAlC,EAA6CvC,KAAK,CAACQ,SAAN,CAAgBC,EAA7D,CAAT;AACAT,IAAAA,KAAK,CAACC,KAAN,GAAc,CAAC8B,OAAO,CAAC/B,KAAK,CAACM,EAAP,CAAtB;AACAyB,IAAAA,OAAO,CAAC/B,KAAK,CAACM,EAAP,CAAP,GAAoB,CAACtC,EAAD,EAAKgC,KAAK,CAACwC,IAAX,CAApB;AACD,GAJD,MAIO,IAAIlE,MAAM,CAACa,MAAX,EAAmB;AACxBwB,IAAAA,QAAQ,CAACrC,MAAM,CAACa,MAAR,EAAgBa,KAAhB,CAAR;AACD;AACF;;AAED,SAASG,cAAT,CAAwB7B,MAAxB,EAAgCgC,EAAhC,EAAoC;AAClC,MAAIyB,OAAO,GAAGzD,MAAM,CAACyD,OAArB;;AACA,MAAI,CAACA,OAAL,EAAc;AACZ;AACD;;AAED,MAAI,CAACA,OAAO,CAACzB,EAAD,CAAR,IAAgBhC,MAAM,CAACa,MAA3B,EAAmC;AACjC,WAAOgB,cAAc,CAAC7B,MAAM,CAACa,MAAR,EAAgBmB,EAAhB,CAArB;AACD;;AAED,MAAIrB,aAAa,CAACqB,EAAD,CAAjB,EAAuB;AACrB;AACD;;AACDrB,EAAAA,aAAa,CAACqB,EAAD,CAAb,GAAoB,IAApB;AAEA,MAAImC,MAAM,GAAGnE,MAAM,CAACoE,KAAP,CAAapC,EAAb,CAAb;AAEApB,EAAAA,cAAc,CAACjM,IAAf,CAAoB,CAACqL,MAAD,EAASgC,EAAT,CAApB;;AAEA,MAAImC,MAAM,IAAIA,MAAM,CAAC/D,GAAjB,IAAwB+D,MAAM,CAAC/D,GAAP,CAAWG,gBAAX,CAA4B1N,MAAxD,EAAgE;AAC9D,WAAO,IAAP;AACD;;AAED,SAAO2Q,UAAU,CAAC1B,MAAM,CAACC,aAAR,EAAuBC,EAAvB,CAAV,CAAqCqC,IAArC,CAA0C,UAAUrC,EAAV,EAAc;AAC7D,WAAOH,cAAc,CAACC,MAAM,CAACC,aAAR,EAAuBC,EAAvB,CAArB;AACD,GAFM,CAAP;AAGD;;AAED,SAASO,YAAT,CAAsBvC,MAAtB,EAA8BgC,EAA9B,EAAkC;AAChC,MAAImC,MAAM,GAAGnE,MAAM,CAACoE,KAAP,CAAapC,EAAb,CAAb;AACAhC,EAAAA,MAAM,CAACM,OAAP,GAAiB,EAAjB;;AACA,MAAI6D,MAAJ,EAAY;AACVA,IAAAA,MAAM,CAAC/D,GAAP,CAAWC,IAAX,GAAkBL,MAAM,CAACM,OAAzB;AACD;;AAED,MAAI6D,MAAM,IAAIA,MAAM,CAAC/D,GAAjB,IAAwB+D,MAAM,CAAC/D,GAAP,CAAWI,iBAAX,CAA6B3N,MAAzD,EAAiE;AAC/DsR,IAAAA,MAAM,CAAC/D,GAAP,CAAWI,iBAAX,CAA6BvL,OAA7B,CAAqC,UAAUqP,EAAV,EAAc;AACjDA,MAAAA,EAAE,CAACtE,MAAM,CAACM,OAAR,CAAF;AACD,KAFD;AAGD;;AAED,SAAON,MAAM,CAACoE,KAAP,CAAapC,EAAb,CAAP;AACAhC,EAAAA,MAAM,CAACgC,EAAD,CAAN;AAEAmC,EAAAA,MAAM,GAAGnE,MAAM,CAACoE,KAAP,CAAapC,EAAb,CAAT;;AACA,MAAImC,MAAM,IAAIA,MAAM,CAAC/D,GAAjB,IAAwB+D,MAAM,CAAC/D,GAAP,CAAWG,gBAAX,CAA4B1N,MAAxD,EAAgE;AAC9DsR,IAAAA,MAAM,CAAC/D,GAAP,CAAWG,gBAAX,CAA4BtL,OAA5B,CAAoC,UAAUqP,EAAV,EAAc;AAChDA,MAAAA,EAAE;AACH,KAFD;;AAGA,WAAO,IAAP;AACD;AACF","file":"script.7c337ef3.js","sourceRoot":"..","sourcesContent":["export const CANVAS_ELEMENT = document.getElementById(\"canvas\");\nexport const SCORE_ELEMENT = document.getElementById(\"score\");\nexport const CTX = canvas.getContext(\"2d\");\nCTX.imageSmoothingEnabled = false;\n\nexport const BG_IMAGE = document.getElementById(\"bgBoard\");\nexport const COIN_IMAGE = document.getElementById(\"coin\");\nexport const PILL_IMAGE = document.getElementById(\"pill\");\nexport const ISAAC_SPRITE = document.getElementById(\"isaacSprite\");\nexport const ENNEMY_HEAD = document.getElementById(\"ennemyHead\");\nexport const ENNEMY_BODY = document.getElementById(\"ennemyBody\");\n","module.exports = {\n    \"animationDuration\": 200,\n    \"normalPacmanSpeed\": 1,\n    \"normalEnnemySpeed\": 0.9,\n    \"fleeEnnemySpeed\": 0.5,\n    \"stepAnimationDuration\": 80,\n    \"framesStep\": 10,\n    \"spriteSize\": 32,\n    \"tileSize\": 32,\n    \"boardWidth\": 28,\n    \"boardHeight\": 31,\n    \"canvasWidth\": 840,\n    \"canvasHeight\": 930,\n    \"powerUpDuration\": 10000,\n    \"ennemiesData\":[\n        {\n            \"initialCoord\" : [12,13],\n            \"initialTarget\" : [13,11],\n            \"scatterTarget\" : [1,26],\n            \"spawnTimeout\" : 2000\n        },\n        {\n            \"initialCoord\" : [13,13],\n            \"initialTarget\" : [13,11],\n            \"scatterTarget\" : [1,1],\n            \"spawnTimeout\" : 4000\n        },\n        {\n            \"initialCoord\" : [14,13],\n            \"initialTarget\" : [13,11],\n            \"scatterTarget\" : [26,1],\n            \"spawnTimeout\" : 6000\n        }, \n       \n        {\n            \"initialCoord\" : [15,13],\n            \"initialTarget\" : [14,11],\n            \"scatterTarget\" : [26,29],\n            \"spawnTimeout\" : 8000\n        }\n    ],\n    \"boardArray\": [\n        [\"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\"],\n        [\"X\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \"X\", \"X\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \"X\"],\n        [\"X\", \".\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\"],\n        [\"X\", \"O\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"O\", \"X\"],\n        [\"X\", \".\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\"],\n        [\"X\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \"X\"],\n        [\"X\", \".\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\"],\n        [\"X\", \".\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\"],\n        [\"X\", \".\", \".\", \".\", \".\", \".\", \".\", \"X\", \"X\", \".\", \".\", \".\", \".\", \"X\", \"X\", \".\", \".\", \".\", \".\", \"X\", \"X\", \".\", \".\", \".\", \".\", \".\", \".\", \"X\"],\n        [\"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\"],\n        [\"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\"],\n        [\"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\"],\n        [\"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"-\", \"-\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\"],\n        [\"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"h\", \"h\", \"h\", \"h\", \"h\", \"h\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\"],\n        [\".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \"X\", \"h\", \"h\", \"h\", \"h\", \"h\", \"h\", \"X\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\"],\n        [\"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"h\", \"h\", \"h\", \"h\", \"h\", \"h\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\"],\n        [\"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\"],\n        [\"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\"],\n        [\"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\"],\n        [\"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\"],\n        [\"X\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \"X\", \"X\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \"X\"],\n        [\"X\", \".\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\"],\n        [\"X\", \".\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\"],\n        [\"X\", \"O\", \".\", \".\", \"X\", \"X\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \"X\", \"X\", \".\", \".\", \"O\", \"X\"],\n        [\"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\"],\n        [\"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\"],\n        [\"X\", \".\", \".\", \".\", \".\", \".\", \".\", \"X\", \"X\", \".\", \".\", \".\", \".\", \"X\", \"X\", \".\", \".\", \".\", \".\", \"X\", \"X\", \".\", \".\", \".\", \".\", \".\", \".\", \"X\"],\n        [\"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\"],\n        [\"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\"],\n        [\"X\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \"X\"],\n        [\"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\"]\n    ]\n};","let gameData = require(\"./data.json\");\nconst CANVAS_WIDTH = gameData.canvasWidth;\nconst CANVAS_HEIGHT = gameData.canvasHeight;\n\n\nexport const DIRECTION_MATRICES = {\n    'LEFT' : [-1, 0],\n    'RIGHT' : [1, 0],\n    'UP' : [0, -1],\n    'DOWN' : [0, 1]\n\n}\n\nexport function modulo(n, m) {\n    var mod = ((n % m) + m) % m;\n    return mod < 0 ? mod + Math.abs(m) : mod;\n};\n\nexport function moduloCoord(coord) {\n    return [modulo(coord[0], CANVAS_WIDTH), modulo(coord[1], CANVAS_HEIGHT)]\n};\n\nexport function getDirectionFromCoord(coord){\n    const directionObject = Object.entries(DIRECTION_MATRICES).find(([direction, directionCoord])=>{\n        return compareArrays(coord, directionCoord);\n    });\n    if (directionObject) {\n    return directionObject[0];\n    }    \n}\n    \n\nexport function addCoord(coord1, coord2) {\n    return coord1.map((value, index) => value += coord2[index]);\n};\n\nexport function substractCoord(coord1, coord2) {\n    return coord1.map((value, index) => value -= coord2[index]);\n};\n\nexport function distanceBetweenCoords(coord1, coord2) {\n    let part1 = Math.pow(coord1[0] - coord2[0], 2);\n    let part2 = Math.pow(coord1[1] - coord2[1], 2);\n    return Math.sqrt(part1 + part2);\n};\n\nexport function compareArrays(a, b){\n  // if length is not equal\n  if(a?.length != b?.length)   return false;\n\n  // comapring each element of array\n   for(var i=0;i<a.length;i++){\n   if(a[i]!=b[i]) return false;\n   }\n    return true;\n  }","import { CTX, COIN_IMAGE, PILL_IMAGE } from \"./canvas\";\nimport {compareArrays} from \"./utils\";\n\nlet gameData = require(\"./data.json\");\nconst TILE_SIZE = gameData.tileSize;\nexport default class Tile {\n  constructor(initialData, coord) {\n    //possible tileType : 'PATH', 'WALL', 'GATE', 'HOME'\n    this.tileType = \"\";\n    this.coord = coord;\n    this.hasPoint = false;\n    this.hasSuperPoint = false;\n\n    switch (initialData) {\n      case \"X\":\n        this.tileType = \"WALL\";\n        break;\n      case \".\":\n        this.tileType = \"PATH\";\n        this.hasPoint = true;\n        break;\n      case \"O\":\n        this.tileType = \"PATH\";\n        this.hasSuperPoint = true;\n        break;\n      case \"-\":\n        this.tileType = \"GATE\";\n        break;\n      case \"h\":\n        this.tileType = \"HOME\";\n        break;\n      default:\n        break;\n    }\n  }\n\n  removePoint() {\n    this.hasPoint = false;\n    this.hasSuperPoint = false;\n  }\n\n  drawTile() {\n    if (this.hasPoint) {\n    CTX.drawImage(\n      COIN_IMAGE,\n      this.coord[0] * TILE_SIZE,\n      this.coord[1] * TILE_SIZE,\n      TILE_SIZE,\n      TILE_SIZE\n    );\n    }\n\n    if (this.hasSuperPoint) {\n      const incrementConst = 16;\n\n      CTX.drawImage(\n        PILL_IMAGE,\n        this.coord[0] * TILE_SIZE - incrementConst/2,\n        this.coord[1] * TILE_SIZE - incrementConst/2,\n        TILE_SIZE + incrementConst,\n        TILE_SIZE + incrementConst\n      );\n      }\n    }\n  }\n\n","class State {\n  constructor() {\n    this.initState();\n  }\n\n  initState() {\n    this.score = 0;\n    this.gameState = 'START';\n    this.board;\n    this.pacman;\n    this.ennemies;\n  }\n}\n\nconst STATE = new State();\nexport default {STATE};\n","import Tile from \"./tile\";\nimport { CANVAS_ELEMENT, CTX, BG_IMAGE } from \"./canvas\";\nimport { modulo, addCoord,  DIRECTION_MATRICES } from \"./utils\";\n\nimport STATE from \"./state\";\n\nlet gameData = require(\"./data.json\");\nconst BOARD_ARRAY = gameData.boardArray;\nconst BOARD_WIDTH = gameData.boardArray[0].length;\nconst BOARD_HEIGHT = gameData.boardArray.length;\nconst CANVAS_WIDTH = gameData.canvasWidth;\nconst CANVAS_HEIGHT = gameData.canvasHeight;\n\nexport default class Board {\n  constructor() {\n    this.boardTiles = [];\n    this.initBoard();\n  }\n\n  initBoard() {\n    this.boardTiles = [];\n    for (let y = 0; y < BOARD_HEIGHT; y++) {\n      let line = [];\n      for (let x = 0; x < BOARD_WIDTH; x++) {\n        let tile = new Tile(BOARD_ARRAY[y][x], [x, y]);\n        line.push(tile);\n      }\n      this.boardTiles.push(line);\n    }\n  }\n\n  getTile(coord) {\n    if (coord) {\n      let coordX = modulo(coord[0], BOARD_WIDTH);\n      let coordY = modulo(coord[1], BOARD_HEIGHT);\n      return this.boardTiles[coordY][coordX];\n    }\n  }\n\n  drawBoard() {\n    CTX.drawImage(BG_IMAGE, 0, 0, CANVAS_ELEMENT.width, CANVAS_ELEMENT.height);\n    this.drawTiles();\n  }\n\n  drawTiles() {\n    this.boardTiles.forEach((row) => {\n      row.forEach((tile) => {\n        tile.drawTile();\n      });\n    });\n  }\n\n  getNextTileInDirection(currentCoord, direction) {\n    if (!direction || !currentCoord) {\n      return false;\n    }\n\n    let directionMatrice = DIRECTION_MATRICES[direction];\n    let coordToMove = addCoord(directionMatrice, currentCoord);\n    return STATE.board.getTile(coordToMove);\n  }\n}\n","const gameData = require(\"./data.json\");\nconst ANIMATION_DURATION = gameData.animationDuration;\nconst NORMAL_SPEED = gameData.normalEnnemySpeed;\nconst FLEE_SPEED = gameData.fleeEnnemySpeed;\n\n\nimport STATE from \"./state\";\n\nimport {\n  getDirectionFromCoord,\n  compareArrays,\n  substractCoord,\n  distanceBetweenCoords\n} from \"./utils\";\n\n\nconst DIRECTIONS = ['DOWN', 'UP', 'RIGHT', 'LEFT'];\n\nexport default class EnnemyBehaviour {\n  constructor(ennemy) {\n    this.init(ennemy);\n  }\n\n  init(ennemy) {\n    this.ennemy = ennemy;\n  }\n\n\n  update(timestamp) {\n    this.updateState();\n    this.setSpeed();\n\n    if (this.ennemy.state !== 'DEAD') {\n      this.computePath();      \n    }\n  }\n\n  updateState() {\n    switch (this.ennemy.state) {\n      case 'SPAWN':\n        if (compareArrays(this.ennemy.currentCoord, this.ennemy.targetCoord)) {\n          this.ennemy.targetCoord = this.ennemy.scatterCoord;\n          this.ennemy.state = 'SCATTER'\n        };\n        break;\n      case 'SCATTER':\n        if (compareArrays(this.ennemy.currentCoord, this.ennemy.scatterCoord)) {\n          this.ennemy.state = 'CHASE'\n        };\n        break;\n      case 'CHASE':\n        break;\n    }\n  }\n\n  setSpeed(){\n    if (this.ennemy.state === 'FLEE') {\n      this.ennemy.speed = ANIMATION_DURATION * (1/FLEE_SPEED);\n    }\n    else this.ennemy.speed = ANIMATION_DURATION * (1/NORMAL_SPEED);\n  }\n\n  computePath() {\n    // get all possible tiles for the ennemy\n    const possibleTiles = this.getPossibleTiles();\n    if (possibleTiles.length > 1 && (this.ennemy.state === 'CHASE' || this.ennemy.state === 'FLEE')) {\n      this.getTarget();\n    }\n    // Compute what is the closest possible tile to the target coord\n    let tileToMove;\n    if (this.ennemy.state === \"FLEE\") {\n      tileToMove = this.computeFarthestTileToTarget(possibleTiles);\n    }\n    else tileToMove = this.computeNearestTileToTarget(possibleTiles);\n    if (!tileToMove) return;\n\n    // Set the target coord\n    this.setMovingCoord(tileToMove.coord);\n  }\n\ngetPossibleTiles() {\n    let currentCoord = this.ennemy.currentCoord;\n    // Ennemies can't go backwards\n    let possibleDirections = DIRECTIONS.filter((dir) => dir != this.getOppositeDirection());\n    let adjacentTiles = possibleDirections.map((direction) => {\n      return STATE.board.getNextTileInDirection(currentCoord, direction);\n    });\n\n    return adjacentTiles.filter((tile) => {\n      return this.isTilePossible(tile);\n    })\n  }\n\n\n  isTilePossible(tile) {\n    if (this.ennemy.justSpawned) {\n      return ['PATH', 'GATE', 'HOME'].includes(tile.tileType);\n    }\n    return tile ?.tileType === \"PATH\";\n  }\n\n  computeNearestTileToTarget(possibleTiles) {\n    let targetCoord = this.ennemy.targetCoord;\n    let closestDistance = null;\n    let closestTile = null;\n\n    possibleTiles.forEach((tile) => {\n      let distance = distanceBetweenCoords(tile.coord, targetCoord);\n      if (closestDistance === null || distance < closestDistance) {\n        closestDistance = distance;\n        closestTile = tile;\n      }\n    });\n    return closestTile;\n  }\n\n\n  computeFarthestTileToTarget(possibleTiles) {\n    let targetCoord = this.ennemy.targetCoord;\n    let longestDistance = null;\n    let farthestTile = null;\n\n    possibleTiles.forEach((tile) => {\n      let distance = distanceBetweenCoords(tile.coord, targetCoord);\n      if (longestDistance === null || distance > longestDistance) {\n        longestDistance = distance;\n        farthestTile = tile;\n      }\n    });\n    return farthestTile;\n  }\n\n\n  getTarget() {\n    if (!this.ennemy.state === 'CHASE') return;\n    this.ennemy.justSpawned = false;\n    this.ennemy.targetCoord = STATE.pacman.movingCoord;\n  }\n\n  computeDirection() {\n    const directionCoord = substractCoord(this.ennemy.movingCoord, this.ennemy.currentCoord);\n    return getDirectionFromCoord(directionCoord);\n  }\n\n\n  getOppositeDirection(){\n    switch (this.ennemy.direction){\n      case 'UP':\n        return 'DOWN';\n        break;\n      case 'DOWN':\n        return 'UP';\n        break;\n      case 'LEFT':\n        return 'RIGHT';\n        break;\n      case 'RIGHT':\n        return 'LEFT';\n        break;\n      default:\n        return '';\n    }\n  }\n\n  setMovingCoord(coord) {\n    this.ennemy.movingCoord = coord;\n    this.ennemy.animTimestamp = new Date().getTime();\n    this.ennemy.direction = this.computeDirection();\n    window.setTimeout(() => {\n      this.ennemy.currentCoord = coord;\n    }, this.ennemy.speed);\n  }\n\n  setFleeMode() {\n    if (this.ennemy.state === 'SCATTER' || this.ennemy.state === 'CHASE') {\n      this.ennemy.state = 'FLEE';\n      this.direction = '';\n    }\n  }\n\n  cancelFleeMode() {\n    var initialState = this.ennemy.state;\n    if (this.ennemy.state === 'FLEE') {\n      this.direction = '';\n      this.ennemy.state = 'CHASE';\n    }\n    if (this.ennemy.state === 'DEAD') {\n      this.ennemy.initInitialProperties();\n    }\n    console.log(initialState, ' => ', this.ennemy.state);\n  }\n\n  setOppositeDirection() {\n    this.ennemy.direction = this.getOppositeDirection();\n  }\n}","const gameData = require(\"./data.json\");\nconst TILE_SIZE = gameData.tileSize;\nconst SPRITE_SIZE = gameData.spriteSize;\nconst STEP_DURATION = gameData.stepAnimationDuration;\nconst FRAMES_STEP = gameData.framesStep;\n\nconst DIRECTIONS = ['DOWN', 'RIGHT', 'UP', 'LEFT'];\n\nimport { CTX, ENNEMY_HEAD, ENNEMY_BODY } from \"./canvas\";\n\nimport STATE from \"./state\";\n\nexport default class EnnemyAnimation {\n  constructor(ennemy) {\n    this.init(ennemy);\n  }\n\n  init(ennemy) {\n    this.ennemy = ennemy;\n    this.stepAnimationTimeStamp = null;\n    this.stepAnimation = 0;\n  }\n\n\n  draw(timestamp) {\n    if (this.characterIsOutOfScreen() || this.ennemy.state === 'DEAD') {\n      return;\n    }\n    if(!this.stepAnimationTimeStamp){\n      this.stepAnimationTimeStamp = timestamp;\n    }\n    let x, y;\n    [x, y] = this.getCoordToDraw();\n    this.drawOnCanvas(x, y, timestamp);\n  }\n\n  characterIsOutOfScreen() {\n    if (this.ennemy.movingCoord[0] === 27 && this.ennemy.currentCoord[0] === 0) {\n      return true;\n    }\n    if (this.ennemy.movingCoord[0] === 0 && this.ennemy.currentCoord[0] === 27) {\n      return true;\n    }\n    return false;\n  }\n\n  isAnimationFinished() {\n    return this.ennemy.currentCoord === this.ennemy.movingCoord;\n  }\n\n  getCoordToDraw(){\n    let x, y;\n    \n    if (this.isAnimationFinished()) {\n      return this.ennemy.currentCoord;\n    }\n    // Get the percentage of progress of the anim\n    let animationProgress = this.getProgressOfAnimation();\n\n    //Delta of the current tile and target tiles\n    let deltaX = this.ennemy.movingCoord[0] - this.ennemy.currentCoord[0];\n    let deltaY = this.ennemy.movingCoord[1] - this.ennemy.currentCoord[1];\n\n    // Position based on the progress of the animation\n    x = this.ennemy.currentCoord[0] + deltaX * animationProgress;\n    y = this.ennemy.currentCoord[1] + deltaY * animationProgress;\n\n\n    // Setting the position of the pacman\n    return [x, y];\n  }\n\n  incrementStepAnimation(timestamp){\n    this.stepAnimation++;\n    this.stepAnimation = this.stepAnimation % FRAMES_STEP;\n    this.stepAnimationTimeStamp = timestamp;\n  }\n\n  getProgressOfAnimation() {\n    let currentTimeStamp = new Date().getTime();\n    return (currentTimeStamp - this.ennemy.animTimestamp) / this.ennemy.speed;\n  }\n\n\n  drawOnCanvas(x, y, timestamp) {\n    let currentStepDuration = timestamp - this.stepAnimationTimeStamp;\n    if(currentStepDuration > STEP_DURATION){\n      this.incrementStepAnimation(timestamp);\n    }\n\n    this.drawBody(x, y);\n    this.drawHead(x, y);\n  }\n\n\n  drawBody(x, y){\n    const incrementConst = 6;\n\n    CTX.save();\n\n    x = x * TILE_SIZE - incrementConst / 2;\n    y = (y - 0.2) * TILE_SIZE - incrementConst / 2;\n\n    let spriteIndex = 0;\n    let stepAnimation = this.stepAnimation;\n    let isReversed = false;\n\n    if(this.ennemy.direction === 'LEFT' || this.ennemy.direction === 'RIGHT'){\n      spriteIndex = 2;\n    }\n\n    if (this.ennemy.direction === 'LEFT') {\n      isReversed = true;\n    }\n\n    if(stepAnimation > 7){\n      spriteIndex++;\n      stepAnimation = stepAnimation % 8;\n    }\n\n    if (isReversed) {\n      CTX.translate( x + TILE_SIZE, y);\n      CTX.scale(-1, 1);\n      x = 0;\n      y= 0\n    }\n\n    CTX.drawImage(\n      ENNEMY_BODY,\n      stepAnimation * SPRITE_SIZE,\n      spriteIndex * SPRITE_SIZE,\n      TILE_SIZE,\n      TILE_SIZE,\n      x,\n      y,\n      TILE_SIZE + incrementConst,\n      TILE_SIZE + incrementConst,\n    );\n\n    CTX.restore();\n\n\n  }\n\n  drawHead(x, y) {\n    const incrementConst = 6;\n\n    CTX.save();\n\n    x = x * TILE_SIZE - incrementConst / 2;\n    y = (y - 0.6) * TILE_SIZE - incrementConst / 2;\n\n      let spriteIndex = DIRECTIONS.findIndex((direction) => direction === this.ennemy.direction);\n    if (spriteIndex === -1) spriteIndex = 0;\n    let isReversed = false;\n    if (this.ennemy.direction === 'LEFT') {\n      isReversed = true;\n      spriteIndex = 1;\n    }\n\n    if (isReversed) {\n      CTX.translate( x + TILE_SIZE, y);\n      CTX.scale(-1, 1);\n      x = 0;\n      y= 0\n    }\n\n    CTX.drawImage(\n      ENNEMY_HEAD,\n      spriteIndex * SPRITE_SIZE,\n      0,\n      TILE_SIZE,\n      TILE_SIZE,\n      x,\n      y,\n      TILE_SIZE + incrementConst,\n      TILE_SIZE + incrementConst,\n    );\n\n    CTX.restore();\n  }\n}\n","import {\n  compareArrays\n} from \"./utils\";\n\nimport EnnemyBehaviour from \"./ennemyBehaviour\";\nimport EnnemyAnimation from \"./ennemyAnimation\";\n\nconst gameData = require(\"./data.json\");\n\n//STATE : SPAWN, SCATTER, CHASE, FLEE, DEAD\nexport default class Ennemy {\n  constructor(ennemyData) {\n    this.ennemyData = ennemyData;\n    this.initPermanentProperties();\n    this.initInitialProperties();\n\n    this.ennemyBehaviour = new EnnemyBehaviour(this);\n    this.ennemyAnimation = new EnnemyAnimation(this);\n  }\n\n  initPermanentProperties() {\n    this.beginningGameTimestamp = null;\n  }\n\n  initInitialProperties() {\n    // Actual coord\n    this.currentCoord = this.ennemyData.initialCoord;\n\n    // Coord where the pacman is moving to\n    this.movingCoord = this.currentCoord;\n\n    // Position of the gate to move to\n    this.targetCoord = this.ennemyData.initialTarget;\n    this.scatterCoord = this.ennemyData.scatterTarget;\n    this.spawnTimeout = this.ennemyData.spawnTimeout;\n    this.justSpawned = true;\n\n    // Timestamp fo the start of the animation\n    this.direction = \"\";\n    this.userInputDirection = \"\";\n\n\n    this.beginningGameTimestamp = null;\n    this.animTimestamp = null;\n\n    this.state = 'SPAWN';\n  }\n\n  setFleeMode() {\n    this.ennemyBehaviour.setFleeMode();\n  }\n\n  cancelFleeMode() {\n    this.ennemyBehaviour.cancelFleeMode();\n\n  }\n\n  canMove(timestamp) {\n    if (!this.beginningGameTimestamp) {\n      this.beginningGameTimestamp = timestamp;\n      return false;\n    }\n\n    return (timestamp - this.beginningGameTimestamp) > this.spawnTimeout;\n  }\n\n  setDirection(direction) {\n    this.direction = direction;\n  }\n\n\n  update(timestamp) {\n    if (!this.isAnimationFinished()) return;\n    if (!this.canMove(timestamp)) return;\n\n    this.ennemyBehaviour.update(timestamp);\n  }\n\n  isPacmanKilled(targetCoord) {\n    if (this.state === 'FLEE' || this.state === 'DEAD') return false;\n    return compareArrays(targetCoord, this.currentCoord);\n  }\n\n  isKilled(targetCoord) {\n    if (this.state === 'DEAD') return false;\n    return compareArrays(targetCoord, this.currentCoord);\n  }\n\n  isAnimationFinished() {\n    return this.currentCoord === this.movingCoord;\n  }\n\n  updateAnimation() {\n    return null;\n  }\n\n  draw(timestamp) {\n    this.ennemyAnimation.draw(timestamp);\n  }\n\n  setDead() {\n    this.state = 'DEAD';\n    // console.log('SET ENNEMY DEAD : ', this.state);\n  }\n}","const gameData = require(\"./data.json\");\nconst ANIMATION_DURATION = gameData.animationDuration;\nconst NORMAL_SPEED = gameData.normalPacmanSpeed;\nconst POWERUP_DURATION = gameData.powerUpDuration;\n\n\nimport STATE from \"./state\";\n\nexport default class PacmanBehaviour {\n  constructor(pacman) {\n    this.init(pacman);\n  }\n\n  init(pacman) {\n    this.pacman = pacman;\n  }\n\n\n  update() {\n    this.processTile();\n    this.setSpeed();\n    // If animation still happening, leave\n    let nextTile = this.computePathPacman();\n    if (nextTile) {\n      this.setMovingCoord(nextTile.coord);\n    } else {\n      // If no valid target tile, stop pacman\n      this.pacman.direction = \"\";\n    }\n  }\n\n  setSpeed() {\n    this.pacman.speed = ANIMATION_DURATION * (1/NORMAL_SPEED);\n  }\n\n  processTile() {\n    let currentTile = STATE.board.getTile(this.pacman.currentCoord);\n\n    if (currentTile.hasSuperPoint) {\n      this.startPowerUp();\n    }\n    if (currentTile.hasPoint || currentTile.hasSuperPoint) {\n      this.addScore(10);\n      currentTile.removePoint();\n    }\n\n  }\n\n  addScore(value) {\n    this.pacman.setScore(STATE.score + value);\n  }\n\n  startPowerUp() {  \n    this.pacman.state = \"POWERUP\";\n\n    STATE.ennemies.forEach((ennemy) => {\n      ennemy.setFleeMode();\n    })\n\n    \n    clearTimeout(this.pacman.powerupTimeout);\n    this.pacman.powerupTimeout = setTimeout(this.resetPowerUp.bind(this), POWERUP_DURATION);\n  }\n\n  resetPowerUp() {\n    console.log(\"resetPowerup\");\n    if (this.pacman.state === \"POWERUP\") {\n      this.pacman.state = \"NORMAL\";\n      STATE.ennemies.forEach((ennemy, index) => {\n        console.log('ennemy =>', index);\n        ennemy.cancelFleeMode();\n      })\n    }\n  }\n  \n  computePathPacman() {\n    // If no direction given, leave\n    if (!this.pacman.direction && !this.isUserInputValid()) {\n      return;\n    }\n\n    // Get the next tile in the user given direction\n    let nextTileUserDirection = STATE.board.getNextTileInDirection(\n      this.pacman.currentCoord,\n      this.pacman.userInputDirection\n    );\n\n    // If the user direction is valid\n    if (nextTileUserDirection?.tileType === \"PATH\") {\n      this.confirmUserDirection();\n      return nextTileUserDirection;\n    }\n\n    // Get the next tile in the initial direction\n    let nextTileCurrentDirection = STATE.board.getNextTileInDirection(\n      this.pacman.currentCoord,\n      this.pacman.direction\n    );\n\n    // If the initial direction is valid\n    if (nextTileCurrentDirection?.tileType === \"PATH\") {\n      this.setMovingCoord(nextTileCurrentDirection.coord);\n      return nextTileCurrentDirection;\n    }\n  }\n\n\n  setMovingCoord(coord) {\n    this.pacman.movingCoord = coord;\n    this.pacman.animTimestamp = new Date().getTime();\n    window.setTimeout(() => {\n      this.pacman.currentCoord = coord;\n    }, this.pacman.speed);\n  }\n\n\n\n  isUserInputValid(){\n    let timeSinceLastInput = new Date().getTime() - this.pacman.inputTimestamp;\n    if(timeSinceLastInput > 2000) return null;\n    return this.pacman.userInputDirection;\n  }\n\n  confirmUserDirection() {\n    this.pacman.direction = this.pacman.userInputDirection;\n  }\n\n}\n","const gameData = require(\"./data.json\");\nconst TILE_SIZE = gameData.tileSize;\nconst SPRITE_SIZE = gameData.spriteSize;\nconst STEP_DURATION = gameData.stepAnimationDuration;\nconst FRAMES_STEP = gameData.framesStep;\n\nimport { CTX, ISAAC_SPRITE } from \"./canvas\";\n\nimport STATE from \"./state\";\n\nexport default class PacmanAnimation {\n  constructor(pacman) {\n    this.init(pacman);\n  }\n\n  init(pacman) {\n    this.pacman = pacman;\n    this.stepAnimationTimeStamp = null;\n    this.stepAnimation = 0;\n    this.speed = 0;\n    this.isFrameAfterDeath = false;\n  }\n\n\n  draw(timestamp) {\n    if (this.characterIsOutOfScreen()) {\n      return;\n    }\n\n    if (this.pacman.state === \"DEAD\" && !this.isFrameAfterDeath) {\n      this.isFrameAfterDeath = true;\n      this.resetAnimation(timestamp);\n    }\n\n    if(!this.stepAnimationTimeStamp){\n      this.stepAnimationTimeStamp = timestamp;\n    }\n    let x, y;\n    [x, y] = this.getCoordToDraw();\n    this.drawOnCanvas(x, y, timestamp);\n  }\n\n  resetAnimation(timestamp) {\n    this.stepAnimation = 0;\n    this.stepAnimationTimeStamp = timestamp;\n  }\n\n  characterIsOutOfScreen() {\n    if (this.pacman.movingCoord[0] === 27 && this.pacman.currentCoord[0] === 0) {\n      return true;\n    }\n    if (this.pacman.movingCoord[0] === 0 && this.pacman.currentCoord[0] === 27) {\n      return true;\n    }\n    return false;\n  }\n\n  getCoordToDraw(){\n    let x, y;\n    if (!this.pacman.direction || this.pacman.state === \"DEAD\") {\n      // If idle, set the pacman at the position of the tile\n      x = this.pacman.currentCoord[0];\n      y = this.pacman.currentCoord[1];\n    }\n    else{\n      // Get the percentage of progress of the anim\n      let animationProgress = this.getProgressOfAnimation();\n      //Delta of the current tile and target tiles\n      let deltaX = this.pacman.movingCoord[0] - this.pacman.currentCoord[0];\n      let deltaY = this.pacman.movingCoord[1] - this.pacman.currentCoord[1];\n\n      // Position based on the progress of the animation\n      x = this.pacman.currentCoord[0] + deltaX * animationProgress;\n      y = this.pacman.currentCoord[1] + deltaY * animationProgress;\n\n      // Setting the position of the pacman\n    }\n\n    return[x,y];\n  }\n\n  incrementStepAnimation(timestamp){\n    if (this.pacman.state === \"DEAD\" && this.stepAnimation > 2) {\n      this.stepAnimation = 3;\n      this.stepAnimationTimeStamp = timestamp;\n    }\n    else {\n      this.stepAnimation++;\n\n      this.stepAnimation = this.stepAnimation % FRAMES_STEP;\n      this.stepAnimationTimeStamp = timestamp;\n    }\n  }\n\n  getProgressOfAnimation() {\n    let currentTimeStamp = new Date().getTime();\n    return (currentTimeStamp - this.pacman.animTimestamp) / this.pacman.speed;\n  }\n\n\n  drawOnCanvas(x, y, timestamp) {\n    let currentStepDuration = timestamp - this.stepAnimationTimeStamp;\n    if(currentStepDuration > STEP_DURATION){\n      this.incrementStepAnimation(timestamp);\n    }\n    if (this.pacman.state === \"DEAD\") {\n      this.drawDeath(x, y);\n    }\n    else {\n      this.drawBody(x, y);\n      this.drawHead(x, y);\n    }\n  }\n\n  drawDeath(x, y) {\n    const decalageSource = 6\n    const decalageDestination = 32;\n    const frameCoord = [\n      { x: 0, y: 3 },\n      { x: 0, y: 4 },\n      { x: 2, y: 3 },\n      { x: 3, y: 2 }]\n\n    CTX.save();\n\n    const coordX = x * TILE_SIZE - decalageDestination / 2;\n    const coordY = (y - .5)  * TILE_SIZE - decalageDestination / 2;\n    \n    CTX.drawImage(\n      ISAAC_SPRITE,\n      frameCoord[this.stepAnimation].x * SPRITE_SIZE * 2 + decalageSource,\n    frameCoord[this.stepAnimation].y * SPRITE_SIZE * 2 + decalageSource * 1.5,\n      TILE_SIZE * 2 - decalageSource * 2,\n      TILE_SIZE * 2 -decalageSource * 2,\n      coordX,\n      coordY,\n      TILE_SIZE * 2,\n      TILE_SIZE * 2,\n    );\n\n    CTX.restore();\n    \n  }\n\n\n  drawBody(x, y){\n    const incrementConst = 6;\n\n    CTX.save();\n\n    x = x * TILE_SIZE - incrementConst / 2;\n    y = (y - 0.1) * TILE_SIZE - incrementConst / 2;\n\n    let spriteIndex = 0;\n    let stepAnimation = this.stepAnimation;\n    let stepAnimationShift = 7;\n    let stepAnimationModulo = 8;\n    let isReversed = false;\n\n    if(this.pacman.direction === 'LEFT' || this.pacman.direction === 'RIGHT'){\n      spriteIndex = 2;\n      stepAnimationShift = 0;\n\n    }\n\n    if (this.pacman.direction === 'LEFT') {\n      isReversed = true;\n    }\n\n    stepAnimation += stepAnimationShift;\n\n    if(stepAnimation >= stepAnimationModulo){\n      spriteIndex++;\n      stepAnimation = stepAnimation % stepAnimationModulo;\n    }\n\n    if (isReversed) {\n      CTX.translate( x + TILE_SIZE, y);\n      CTX.scale(-1, 1);\n      x = 0;\n      y= 0\n    }\n\n    CTX.drawImage(\n      ISAAC_SPRITE,\n      stepAnimation * SPRITE_SIZE,\n      spriteIndex * SPRITE_SIZE,\n      TILE_SIZE,\n      TILE_SIZE,\n      x,\n      y,\n      TILE_SIZE + incrementConst,\n      TILE_SIZE + incrementConst,\n    );\n\n    CTX.restore();\n\n  }\n\n  drawHead(x, y) {\n    const incrementConst = 6;\n\n    CTX.save();\n\n    x = x * TILE_SIZE - incrementConst / 2;\n    y = (y - 0.50) * TILE_SIZE - incrementConst / 2;\n\n    let spriteIndex = 0;\n    let stepAnimation = this.stepAnimation >= 8 ? 1 : 0;\n    let isReversed = false;\n    let stepAnimationShift = 0;\n\n    if (this.pacman.direction === 'UP') {\n      stepAnimationShift = 4;\n    }\n    if (this.pacman.direction === 'RIGHT') {\n      stepAnimationShift = 2;\n    }\n    if (this.pacman.direction === 'LEFT') {\n      stepAnimationShift = 2;\n      isReversed = true;\n    }\n\n\n\n    stepAnimation += stepAnimationShift;\n\n    if (isReversed) {\n      CTX.translate( x + TILE_SIZE, y);\n      CTX.scale(-1, 1);\n      x = 0;\n      y= 0\n    }\n\n    CTX.drawImage(\n      ISAAC_SPRITE,\n      stepAnimation * SPRITE_SIZE,\n      0,\n      TILE_SIZE,\n      TILE_SIZE,\n      x,\n      y,\n      TILE_SIZE + incrementConst,\n      TILE_SIZE + incrementConst,\n    );\n\n    CTX.restore();\n  }\n}\n","import { SCORE_ELEMENT } from \"./canvas\";\n\nimport PacmanBehaviour from \"./pacmanBehaviour\";\nimport PacmanAnimation from \"./pacmanAnimation\";\n\nimport STATE from \"./state\";\nexport default class Pacman {\n  constructor(coord) {\n    this.init(coord);\n    this.pacmanBehaviour = new PacmanBehaviour(this);\n    this.pacmanAnimation = new PacmanAnimation(this);\n  }\n\n  init(coord = [1, 14]) {\n    // Actual coord of the pacman\n  this.currentCoord = coord;\n\n    // Coord where the pacman is moving to\n  this.movingCoord = coord;\n\n    // Possible state : NORMAL, POWERUP, DEAD\n\n    // Timestamp fo the start of the animation\n\n    this.direction = \"\";\n\n    this.userInputDirection = \"\";\n    this.inputTimestamp = null;\n    this.powerupTimeout;\n    this.state = 'NORMAL';\n  }\n\n\n  update() {\n    if (!this.isAnimationFinished()) {\n      return;\n    }\n\n    this.pacmanBehaviour.update();\n  }\n\n  \n  \n\n  setScore(score) {\n    STATE.score = score;\n    SCORE_ELEMENT.textContent = STATE.score;\n  }\n\n  setUserInputDirection(direction) {\n    this.userInputDirection = direction;\n    this.inputTimestamp = new Date().getTime();\n  }\n\n  isAnimationFinished() {\n    return this.currentCoord === this.movingCoord;\n  }\n\n  setDead() {\n    this.state = \"DEAD\";\n  }\n\n  draw(timestamp) {\n    this.pacmanAnimation.draw(timestamp);\n  }\n\n}\n","import Board from \"./board\";\nimport {\n  CANVAS_ELEMENT,\n  CTX\n} from \"./canvas\";\nimport Ennemy from \"./ennemy\";\nimport Pacman from \"./pacman\";\nimport STATE from \"./state\";\n\nconst gameData = require(\"./data.json\");\nconst ENNEMIES_DATA = gameData.ennemiesData;\n\nexport default class Game {\n  constructor() {\n\n    STATE.score = 0;\n    // Possible state : STOPPED, START, GAME, CHASE\n    STATE.gameState = \"START\";\n\n    this.initGame();\n  }\n\n  initGame() {\n    STATE.board = new Board();\n    STATE.pacman = new Pacman();\n    STATE.ennemies = this.initEnnemies();\n\n    // START, END\n    STATE.gameState = 'START';\n\n    this.draw();\n  }\n\n  startGameLoop() {\n    this.bindEventHandler();\n    window.requestAnimationFrame(this.loop.bind(this));\n  }\n\n  loop(timestamp) {\n    let progress = timestamp - this.lastRender;\n    this.lastRender = timestamp;\n\n    this.draw(progress, timestamp);\n    this.update(progress, timestamp);\n\n    window.requestAnimationFrame(this.loop.bind(this));\n  }\n\n  update(progress, timestamp) {\n    // Update the state of the world for the elapsed time since last render\n    this.updateGameState();\n    if (STATE.gameState !== 'END') {\n      STATE.pacman.update();\n      this.updateEnnemies(timestamp);\n    }\n  }\n  \n  updateGameState() {\n    if (STATE.pacman.state === 'POWERUP') {\n      this.killTouchedEnnemies();\n    }\n    if (this.isPacmanDead()) {\n      STATE.pacman.setDead();\n      STATE.gameState = 'END';\n    }\n  }\n\n  killTouchedEnnemies() {\n    for (let i = 0; i < STATE.ennemies.length; i++){\n      let ennemy = STATE.ennemies[i];\n      if (ennemy.isKilled(STATE.pacman.currentCoord)) {\n        ennemy.setDead();\n      }\n    }\n    \n  }\n\n  isPacmanDead() {\n    let pacmanIsDead = false;\n    ennemyLoop : for (let i = 0; i < STATE.ennemies.length; i++){\n      let ennemy = STATE.ennemies[i];\n      if (ennemy.isPacmanKilled(STATE.pacman.currentCoord)) {\n        pacmanIsDead = true;\n        break ennemyLoop;\n      }\n    }\n    return pacmanIsDead;    \n  }\n\n  draw(progress, timestamp) {\n    // Reinit the canvas\n    CTX.fillStyle = \"#2c2a2a\";\n    CTX.fillRect(0, 0, CANVAS_ELEMENT.width, CANVAS_ELEMENT.height);\n    // Update the state of the world for the elapsed time since last render\n    STATE.board.drawBoard();\n    this.drawEnnemies(timestamp);\n    STATE.pacman.draw(timestamp);\n  }\n\n\n  ////////////////////////////////////\n  // ENNEMIES\n  ////////////////////////////////////\n  initEnnemies() {\n    const ennemies = [];\n    ENNEMIES_DATA.forEach((ennemyData) => {\n      ennemies.push(new Ennemy(ennemyData));\n    });\n    return ennemies;\n  }\n\n  updateEnnemies(timestamp) {\n    STATE.ennemies.forEach((ennemy) => {\n      ennemy.update(timestamp);\n    });\n  }\n\n  drawEnnemies(timestamp) {\n    STATE.ennemies.forEach((ennemy) => {\n      ennemy.draw(timestamp);\n    });\n  }\n\n\n  bindEventHandler() {\n    document.addEventListener(\"keydown\", this.keydownEventHandler.bind(this));\n  }\n\n  unbindEventHandler() {\n    document.removeEventListener(\"keydown\", this.keydownEventHandler);\n  }\n\n  keydownEventHandler(event) {\n    let keycode = event.which;\n\n    // LEFT : ARROW_LEFT or Q\n    if (keycode === 37 || keycode === 81) {\n      STATE.pacman.setUserInputDirection(\"LEFT\");\n      event.preventDefault();\n    }\n    // RIGHT : ARROW_RIGHT or D\n    if (keycode === 39 || keycode === 68) {\n      STATE.pacman.setUserInputDirection(\"RIGHT\");\n    event.preventDefault();\n    }\n    // UP : ARROW_UP or Z\n    if (keycode === 38 || keycode === 90) {\n      STATE.pacman.setUserInputDirection(\"UP\");\n    event.preventDefault();\n    }\n    // DOWN : ARROW_DOWN or S\n    if (keycode === 40 || keycode === 83) {\n      STATE.pacman.setUserInputDirection(\"DOWN\");\n    event.preventDefault();\n    }\n  }\n}","import Game from \"./game\";\n\nfunction docReady(fn) {\n    // see if DOM is already available\n    if (document.readyState === \"complete\" || document.readyState === \"interactive\") {\n        // call on next available tick\n        setTimeout(fn, 1);\n    } else {\n        document.addEventListener(\"DOMContentLoaded\", fn);\n    }\n}    \n\n\ndocReady(()=>{\n    const game = new Game();\n    game.initGame();\n    game.startGameLoop();\n})\n\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}