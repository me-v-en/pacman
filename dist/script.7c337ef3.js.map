{"version":3,"sources":["script/tile.js","script/utils.js","script/data.json","script/board.js","script/pacman.js","script/game.js","script/index.js"],"names":["Tile","initialData","coord","tileType","hasPoint","DOMElement","createTileElement","tileElement","document","createElement","className","toLowerCase","id","getElementById","appendChild","classList","remove","modulo","n","m","mod","Math","abs","DIRECTION_MATRICES","addCoord","coord1","coord2","length","map","value","index","module","exports","gameData","require","BOARD_ARRAY","boardArray","BOARD_WIDTH","BOARD_HEIGHT","Board","boardTiles","i","line","createRowElement","j","tile","push","DOMrow","coordY","coordX","TILE_SIZE","tileSize","ANIMATION_DURATION","animationDuration","Pacman","reinitPacman","currentCoord","targetCoord","state","animTimestamp","direction","userInputDirection","DOMPacman","DOMPacmanHead","querySelector","DOMPacmanBody","drawPacman","window","setTimeout","changePacmanSprite","Date","getTime","animationProgress","getProgressOfAnimation","deltaY","deltaX","top","left","style","currentTimeStamp","src","add","Game","board","pacman","scoreElement","score","lastRender","GAME_STATE","buildBoard","bindEventHandler","requestAnimationFrame","loop","bind","timestamp","progress","update","draw","updatePacman","addEventListener","keyupEventHandler","removeEventListener","event","preventDefault","keycode","which","setUserInputDirection","coordIsTargetCoord","addPointOfCurrentPacmanTile","nextTile","getNextTileInDirection","confirmUserDirection","setTargetCoord","currentTile","getTile","addScore","removePoint","directionMatrice","coordToMove","textContent","docReady","fn","readyState","game","initGame","startGameLoop"],"mappings":"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AACkH,UAAT,KAAwB,aAAlE,EAAiF;AHCrF,AEJA,ACIQ,ALLD,SAASzG,MAAT,CAAgBC,CAAhB,EAAmBC,CAAnB,EAAsB;AKMrBiD,ALLJ,IKKIA,ELLAhD,GAAG,GAAG,CAAEF,CKKE,ALLD,CKKEuG,EAAD,ALLEtG,CAAL,CKKQ,CAAL,CAAV,ALLiBA,CAAX,IAAgBA,CAA1B;AICJ,ACKK,ALLD,GKEA,MAGO,ALLAC,GAAG,GAAG,CAAN,GAAUA,GAAG,GAAGC,IAAI,CAACC,GAAL,CAASH,CAAT,CAAhB,GAA8BC,GAArC;AKMIZ,ALLP,IKKOA,QAAQ,CAAC2F,gBAAT,CAA0B,kBAA1B,EAA8CsB,EAA9C;ADJR,ACKK,AFTL,AJAA,IIAIxF,QAAQ,GAAGC,OAAO,CAAC,aAAD,CAAtB;AEUC,ANTD,ACEC;AGFD,AJCA,ACGO,IGJDgB,AHIO3B,SGJE,GAAGU,MHIa,EGJL,CAACkB,AHIO,QGJlC;AEYAqE,AFXA,AJCA,ACGI,IGJEpE,IEWE,CAAC,CLPI,CAAC,CAAD,EAAI,CAAC,CAAL,CADqB,IKQrB,CFXW,GAAGnB,QAAQ,CAACoB,iBAApC;AEYI,ALPA,IDFiBrD,EMSX2H,IAAI,CLPA,CAAC,CKOE,ALPH,EAAI,CAAJ,CKOOzC,ALTa,aKSjB,EAAb;AACAyC,ANTA,ACEA,EKOAA,EFXiBrE,EEWb,CAACsE,CLPE,CAAC,CAAC,CAAF,EAAK,CAAL,CKOP,ALV8B,CDClB3H,WAAZ,EAAyBC,KAAzB,EAAgC;AGCpC,AGSIyH,AFXA,AJCgC,ACGhC,EKOAA,EHTA1F,EGSI,CAAC4F,GLPI,CAAC,CEFF,AFEC,EAAI,CEFF3F,AFEF,GGJGhC,EEWZ,EHTkB,CAAC,ACFnB,EAAmB,WDED,CAAtB;AGUC,AFZsB,AHAW,CKQ1B,ALRD,CKQP;AHLA,AHDQ,IGCFiC,WAAW,GAAGF,QAAQ,CAACG,UAA7B;AACA,ACHQ,AJEA,IGCFC,KCHOkB,AJEApD,MGCI,EHDT,CGCY8B,EHDI,CIFhB,CJEA,IGCoB,CAACG,UAAT,CAAoB,CAApB,EAAuBT,MAA3C;AACA,ACHK,AJEG,ACID,IEHDW,AECe4C,KLFRhF,ACIGsB,KDJR,EGCU,CHDGtB,ACId,CAAkBuB,CEHJQ,GHDb,ECID,EAA0BP,CEHJ,CAACU,IFGvB,EAAkC,IEHpB,CAAoBT,MAAzC;AEGI,ALHI,ACIJ,MAAIF,GDJKrB,GCIC,CAACuB,IDJP,CKGU,CJCV,CDJgB,ICIED,CDJlB,KCIwB,CAACC,MAA7B,EAAqC;AIDvB,AJEV,IEHaY,OFGNd,MAAM,CAACG,GAAP,CAAW,UAACC,KAAD,EAAQC,KAAR;AEFtB,AHDI,ACGkB,YDHV7B,CCG4B4B,KAAK,CEF/B,GFEmCH,CDH7C,KCGmD,CAACI,KAAD,CAAjC;AEFR,AECV,ALDI,ACEc,KAAX,CAAP,GIDKqD,EDLT,AJIa,GKCT,ALDI,GKCS,IAAI5C,cAAJ,ADLa,ECK1B;AACA,ADN0B,AJKlB,ACEX,SIDQ6C,CDNIlF,GJKIC,EKCb,ADN0B,GCMZ,GLDN,CKCUmD,ELDM,MAAhB,OKCM,EAAd,+CDNiB,CAAC,EAAD,EAAK,CAAL,CAAS;ADK1B,AEGA,ADPA,AJKQ,ACEf,SEHYd,AEGA6C,UFHL,EEGA,CFHkB,EAAlB,AEGoB7E,QAAQ,CAACK,cAAT,CAAwB,OAAxB,CAApB;AFFH,AEIG,ADRA,SCQKyE,EDRA9B,GCQL,GAAa,CAAb,CANU,CAOV,GDTA,GAAoBtD,KAApB,CAF0B,CAG1B;AJII,ACCX,WDDgB,GAAL;AKKJ,ADRA,AJIQ,SKIHqF,EDRA9B,EJIQtD,MKIb,ELJQ,CKIU,ADRlB,CCQA,CARU,ALIc,CKKxB,ADTmBD,KAAnB,AJIQ,CIRkB,CAK1B;AJIQ,aAAKE,QAAL,GAAgB,IAAhB;AKKR,ADRA,AJIQ,SKIHoF,EFNT,ACFS9B,KAAL,GCQA,ADRa,GCQK,GDRlB,CAN0B,CAO1B,ECOA,IFNS;AACT,AEMH,WFNQlB,UAAL,GAAkB,EAAlB;ACDA,AJGI,WIHCmB,AJGI,GAAL,UIHJ,GAAqB,IAArB;ADEA,ACDA,AJGQ,WGFH,ACDAC,EJGQzD,EGFJsC,CAAC,GAAG,CAAb,ACDA,CJGQ,CGFQA,CAAC,ACDA,CJGO,CIHxB,CDCoBH,IHEZ,QGFR,EAAkCG,CAAC,EAAnC,EAAuC;AACnC,ACDJ,AJGQ,WIHHoB,CDCGnB,IAAI,GAAG,EAAX,QCDJ,GAA0B,EAA1B;ADEI,ACDJ,WCMJ,ADNSoB,EDCInB,OCDT,GAAiBnC,MDCb,CAAsBiC,CAAtB,AEKG,ADNkB,CAAC5B,cAAT,CAAwB,QAAxB,CAAjB;ACOA,ADNA,AJEI,WKICsE,ADNApB,AJEI,GAAL,EKIJ,CAAW0B,ODNX,GCMA,ADNqBjF,QAAQ,CAACwD,aAAT,CAAuB,eAAvB,CAArB;ADCI,AEMP,ADNG,AJEQ,WIFHC,EDAI,AHEI9D,IGFAyC,CAAC,GAAG,AHET,CGFJ,EAAgBA,ACApB,AJEwB,CGFH,ECAApC,CDAG6B,EHEhB,KIFqB,CAAC2B,GDA1B,EAAiCpB,CAAC,EAAlC,EAAsC,GCArB,CAAuB,eAAvB,CAArB;ADCQ,ACAR,AJEQ,WIFHsB,GDAOrB,IAAI,GAAG,ACAnB,IDAuB7C,aAAJ,CAASmC,WAAW,CAACM,CAAD,CAAX,CAAeG,CAAf,CAAT,EAA4B,CAACH,CAAD,EAAIG,CAAJ,CAA5B,CAAX;AACAF,ACAX,MAED,IDFYA,IAAI,CAACI,IAAL,CAAUD,IAAV;AACH,ACET,AJDQ,WKIR,yBAAgB;AACZ,ADHJ,AJDY,WKIHuC,MAAL,CAAY7B,YAAZ;AFLI,AEMJ,ADHJ,AJjBI,WKoBKmC,EFNIlD,UAAL,CAAgBM,GEMpB,CFNI,CAAqBJ,IAArB;AACH,AEMD,ADHJ,WCGS6C,UAAL,GAAkB,CAAlB;AFLH,AEMGpB,ADHJ,AJDI,MKIAA,GLJK9D,GKIC,CAACsF,MLJP,GAAkB,KAAKrF,OKIvB,CAA6B,KAAKsF,IAAL,ALJX,CKIqBC,CLJvC,GKI6B,CAAe,IAAf,CAA7B;AACH,ALJA;;WGDD,0BAAiBpD,CAAjB,EAAoB;AAChB,UAAIM,CEMR,ADJA,KDFc,GAAGvC,MEMZsF,EFNoB,CAACrF,MEM1B,EAAgB,KFNC,CAAuB,ACElBmD,KDFL,CAAb,GCEJ,EAAiC;ADD7Bb,AEMA,ADL6B,MDD7BA,IEMIgD,CLLR,CGDU,CAAChF,KEMK,GAAG+E,CFNf,GAAmB,KEMK,GAAG,EFN3B,GEMgCP,ELLjB,QKKf;AFLAxC,AEMA,ALLA,MGDAA,IHCIxC,CKKCyF,CFNC,CAACpF,EAAP,EEMA,CFNY,AEMAmF,GLLG,GAAGvF,EKKlB,MFN0BiC,AHCA,CGD1B,AHC2BhC,aAAT,CAAuB,KAAvB,CAAlB;AGAAD,AEMA,ADNA,AJCAD,MGDAC,AHCAD,KKKK0F,ADNApC,GDAG,CAAChD,AEMT,ELLW,CAACH,SAAZ,EGDA,ACAA,CDAwB,ECAEkD,KDA1B,EAAiC9C,ECAjC,IJCgC,KGDhC,AHCqCX,CGDQ4C,MAA7C,CHCgC,CAAcpC,WAAd,EAAhC,cAA+D,KAAKP,QAAL,GAAiB,OAAjB,GAA2B,EAA1F;AGAH,ACAG+D,AJCA5D,MIDA4D,AJCA5D,MIDM,CAAC6D,IJCI,CAACxD,EAAZ,GIDA,CAAkB,YAAM,EJCC,KAAKV,KAAL,CAAW,CAAX,CAAzB,cAA0C,KAAKA,KAAL,CAAW,CAAX,CAA1C;AKMA,ADNI,AJEJM,MAAAA,EIFI,ECMA,GDNI,CAACqD,AJED,CKIC2B,ALJA3E,UKIL,ILJJ,CKIwB,ALJA,EIFpB,GAA0B,EAA1B,ECMJ,EAAmC,GLJC,KAAKX,KAAL,CAAW,CAAX,CAApC,EAAmDY,WAAnD,CAA+DP,WAA/D;AKKI,ADNH,AJED,OIJA,EAEG,GAFH,CCQSgF,ALJFhF,UKIH,CLJJ,EKIsBuF,SAAlB;AACA3B,ADNP,AJEA,QKIOA,GFPR,GEOc,CAACwB,aFPPzF,KAAR,EAAc,CEON,CAA6B,KAAK0F,IAAL,CAAUC,IAAV,CAAe,IAAf,CAA7B;AFNJ,AEOC,UFPE3F,KAAH,EAAS;AACL,AEQP,YFRW8C,MAAM,GAAG,mBAAO9C,KAAK,CAAC,CAAD,CAAZ,EAAiBoC,YAAjB,CAAb;AACA,WCAR,AJEA,CGFYW,MAAM,GAAG,aHER,MGFe/C,GCAL,EDAU,CAAC,CAAD,CAAZ,EAAiBmC,WAAjB,CAAb;AACJ,ACAA,AJEA,WIFKuB,AJEAxD,IGFE,IHEP,CGFYoC,ACAZ,EJEgB,CIFC,IJEjB,CIFsBqB,EDAf,CAAgBb,MAAhB,EAAwBC,MAAxB,CAAP,ACAA;ADCC,ACAD,AJEA,WKKJ,ADPSoB,AJEAhE,UAAL,CAAgBU,KKKbgF,EDPH,EJEA,CAA0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","file":"script.7c337ef3.js","sourceRoot":"..","sourcesContent":["// coordX\r\n// coordY\r\n// hasPoint\r\n// hasBonusPoints\r\n\r\nexport default class Tile {\r\n    constructor(initialData, coord) {\r\n        //possible tileType : 'PATH', 'WALL', 'GATE', 'HOME'\r\n        this.tileType = '';\r\n        this.coord = coord;\r\n        this.hasPoint = false;\r\n        \r\n        switch (initialData) {\r\n            case 'X':\r\n                this.tileType = 'WALL';\r\n                break;\r\n            case '.':\r\n                this.tileType = 'PATH';\r\n                this.hasPoint = true;\r\n                break;\r\n            case '-':\r\n                this.tileType = 'GATE';\r\n                break;\r\n            case 'h':\r\n                this.tileType = 'HOME';\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        this.DOMElement = this.createTileElement();\r\n    }\r\n\r\n    createTileElement(){\r\n        let tileElement = document.createElement(\"div\");\r\n        tileElement.className = `tile ${this.tileType.toLowerCase()} ${this.hasPoint ?  'point' : ''}`;\r\n        tileElement.id = `tile-${this.coord[0]}-${this.coord[1]}`;\r\n\r\n        document.getElementById(\"tile-row-\"+this.coord[0]).appendChild(tileElement);\r\n        return tileElement;\r\n    }\r\n\r\n    removePoint(){\r\n        this.hasPoint = false;\r\n        this.DOMElement.classList.remove('point');\r\n    }\r\n}","export function modulo(n, m) {\r\n    var mod = ((n % m) + m) % m;\r\n    return mod < 0 ? mod + Math.abs(m) : mod;\r\n};\r\n\r\nexport const DIRECTION_MATRICES = {\r\n    'LEFT' : [0, -1],\r\n    'RIGHT' : [0, 1],\r\n    'UP' : [-1, 0],\r\n    'DOWN' : [1, 0]\r\n\r\n}\r\n\r\nexport function addCoord(coord1, coord2) {\r\n    if (coord1.length === coord2.length) {\r\n        return coord1.map((value, index) => value += coord2[index]);\r\n    }\r\n};","module.exports = {\r\n    \"animationDuration\": 100,\r\n    \"tileSize\": 30,\r\n    \"boardWidth\": 28,\r\n    \"boardHeight\": 31,\r\n    \"boardArray\": [\r\n        [\"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\"],\r\n        [\"X\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \"X\", \"X\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \"X\"],\r\n        [\"X\", \".\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\"],\r\n        [\"X\", \".\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\"],\r\n        [\"X\", \".\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\"],\r\n        [\"X\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \"X\"],\r\n        [\"X\", \".\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\"],\r\n        [\"X\", \".\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\"],\r\n        [\"X\", \".\", \".\", \".\", \".\", \".\", \".\", \"X\", \"X\", \".\", \".\", \".\", \".\", \"X\", \"X\", \".\", \".\", \".\", \".\", \"X\", \"X\", \".\", \".\", \".\", \".\", \".\", \".\", \"X\"],\r\n        [\"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\"],\r\n        [\"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\"],\r\n        [\"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\"],\r\n        [\"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"-\", \"-\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\"],\r\n        [\"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"h\", \"h\", \"h\", \"h\", \"h\", \"h\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\"],\r\n        [\".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \"X\", \"h\", \"h\", \"h\", \"h\", \"h\", \"h\", \"X\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\"],\r\n        [\"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"h\", \"h\", \"h\", \"h\", \"h\", \"h\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\"],\r\n        [\"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\"],\r\n        [\"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\"],\r\n        [\"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\"],\r\n        [\"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\"],\r\n        [\"X\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \"X\", \"X\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \"X\"],\r\n        [\"X\", \".\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\"],\r\n        [\"X\", \".\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\"],\r\n        [\"X\", \".\", \".\", \".\", \"X\", \"X\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \"X\", \"X\", \".\", \".\", \".\", \"X\"],\r\n        [\"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\"],\r\n        [\"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\"],\r\n        [\"X\", \".\", \".\", \".\", \".\", \".\", \".\", \"X\", \"X\", \".\", \".\", \".\", \".\", \"X\", \"X\", \".\", \".\", \".\", \".\", \"X\", \"X\", \".\", \".\", \".\", \".\", \".\", \".\", \"X\"],\r\n        [\"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\"],\r\n        [\"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\", \"X\", \".\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \".\", \"X\"],\r\n        [\"X\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \"X\"],\r\n        [\"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\", \"X\"]\r\n    ]\r\n};","// BOARD = [TILE]\r\n// Dimensions : 28 x 31\r\n// COORD [x,y]\r\nimport Tile from './tile';\r\n\r\nimport {modulo} from './utils';\r\n\r\nlet gameData = require(\"./data.json\");\r\nconst BOARD_ARRAY = gameData.boardArray;\r\nconst BOARD_WIDTH = gameData.boardArray[0].length;\r\nconst BOARD_HEIGHT = gameData.boardArray.length;\r\n\r\nexport default class Board {\r\n    constructor() {\r\n        this.boardTiles = [];\r\n    }\r\n\r\n    buildBoard() {\r\n        this.boardTiles = [];\r\n        for (let i = 0; i < BOARD_HEIGHT; i++) {\r\n            let line = [];\r\n            this.createRowElement(i);\r\n            for (let j = 0; j < BOARD_WIDTH; j++) {\r\n                let tile = new Tile(BOARD_ARRAY[i][j], [i, j]);\r\n                line.push(tile);\r\n            }\r\n            this.boardTiles.push(line);\r\n        }\r\n    }\r\n\r\n    createRowElement(i) {\r\n        let DOMrow = document.createElement(\"div\");\r\n        DOMrow.classList = \"tile-row\";\r\n        DOMrow.id = \"tile-row-\" + i;\r\n        document.getElementById(\"board\").appendChild(DOMrow);\r\n    }\r\n\r\n    getTile(coord){\r\n        if(coord){\r\n            let coordY = modulo(coord[0], BOARD_HEIGHT);\r\n            let coordX = modulo(coord[1], BOARD_WIDTH);\r\n        return this.boardTiles[coordY][coordX];\r\n        }\r\n    }\r\n\r\n}","let gameData = require(\"./data.json\");\r\nconst TILE_SIZE = gameData.tileSize;\r\nconst ANIMATION_DURATION = gameData.animationDuration;\r\n\r\nexport default class Pacman {\r\n    constructor(coord) {\r\n        this.reinitPacman();\r\n    }\r\n\r\n    reinitPacman(coord = [14, 1]) {\r\n        // Actual coord of the pacman\r\n        this.currentCoord = coord;\r\n        // Coord where the pacman is moving to\r\n        this.targetCoord = coord;\r\n        // Possible state : IDLE, MOVING, DEAD\r\n        this.state = 'IDLE';\r\n        // Timestamp fo the start of the animation\r\n        this.animTimestamp = null;\r\n        this.direction = '';\r\n        this.userInputDirection = '';\r\n        this.DOMPacman = document.getElementById('pacman');\r\n        this.DOMPacmanHead = document.querySelector('#pacman .head');\r\n        this.DOMPacmanBody = document.querySelector('#pacman .body');\r\n        this.drawPacman();\r\n    }\r\n\r\n    // animationIsPending(){    \r\n    //     if(this.state ==='MOVING'){\r\n    //     return this.getProgressOfAnimation() < 1;\r\n    //     }\r\n    //     else return false;\r\n    // }\r\n\r\n    setUserInputDirection(direction) {\r\n        this.userInputDirection = direction;\r\n        window.setTimeout(() => {\r\n            this.userInputDirection = '';\r\n        }, 500);\r\n    }\r\n\r\n    confirmUserDirection() {\r\n        this.direction = this.userInputDirection;\r\n        this.changePacmanSprite();\r\n    }\r\n\r\n    setDirection(direction) {\r\n        this.direction = direction;\r\n    }\r\n\r\n    setTargetCoord(coord) {\r\n        this.state = 'MOVING';\r\n        this.targetCoord = coord;\r\n        this.animTimestamp = new Date().getTime();\r\n        window.setTimeout(() => {\r\n            this.currentCoord = coord;\r\n        }, ANIMATION_DURATION);\r\n    }\r\n\r\n    coordIsTargetCoord() {\r\n        return this.currentCoord === this.targetCoord;\r\n    }\r\n\r\n    updateAnimation() {\r\n        return null;\r\n    }\r\n\r\n    drawPacman() {\r\n        if (this.state === 'MOVING') {\r\n            // Get the percentage of progress of the anim\r\n            let animationProgress = this.getProgressOfAnimation();\r\n            //Delta of the current tile and target tiles\r\n            let deltaY = this.targetCoord[0] - this.currentCoord[0];\r\n            let deltaX = this.targetCoord[1] - this.currentCoord[1];\r\n\r\n            // Position based on the progress of the animation\r\n            let top = this.currentCoord[0] + deltaY * animationProgress;\r\n            let left = this.currentCoord[1] + deltaX * animationProgress;\r\n\r\n            // Setting the position of the pacman\r\n            this.DOMPacman.style.top = top * TILE_SIZE + 'px';\r\n            this.DOMPacman.style.left = left * TILE_SIZE + 'px';\r\n        }\r\n        if (this.state === 'IDLE') {\r\n            // If idle, set the pacman at the position of the tile\r\n            this.DOMPacman.style.top = this.currentCoord[0] * TILE_SIZE + 'px';\r\n            this.DOMPacman.style.left = this.currentCoord[1] * TILE_SIZE + 'px';\r\n        }\r\n    }\r\n\r\n    getProgressOfAnimation() {\r\n        let currentTimeStamp = new Date().getTime();\r\n        return (currentTimeStamp - this.animTimestamp) / ANIMATION_DURATION;\r\n    }\r\n\r\n    changePacmanSprite(){\r\n        if(this.direction !== 'LEFT'){\r\n            this.DOMPacman.classList.remove('left');            \r\n        }\r\n        if(this.state === 'IDLE'){\r\n            this.DOMPacmanHead.src = \"/img/head.png\";\r\n            this.DOMPacmanBody.src = \"/img/body.png\";\r\n        }\r\n        else{\r\n        if(this.direction === 'UP'){\r\n            this.DOMPacmanHead.src = \"/img/head-up.png\";\r\n            this.DOMPacmanBody.src = \"/img/body.png\";\r\n        }\r\n        if(this.direction === 'DOWN'){\r\n            this.DOMPacmanHead.src = \"/img/head.png\";\r\n            this.DOMPacmanBody.src = \"/img/body.png\";\r\n        }\r\n        if(this.direction === 'RIGHT' || this.direction === 'LEFT'){\r\n            this.DOMPacmanHead.src = \"/img/head-right.png\";\r\n            this.DOMPacmanBody.src = \"/img/body-right.png\";\r\n            \r\n        }\r\n        if(this.direction === 'LEFT'){\r\n            this.DOMPacman.classList.add('left');            \r\n        }\r\n    }\r\n        \r\n    }\r\n}","import Board from \"./board\";\r\nimport Pacman from \"./pacman\";\r\nimport Tile from \"./tile\";\r\n\r\nimport {\r\n    modulo,\r\n    DIRECTION_MATRICES,\r\n    addCoord\r\n} from './utils';\r\n\r\n\r\nexport default class Game {\r\n\r\n    constructor() {\r\n        this.board = new Board();\r\n        this.pacman = new Pacman();\r\n\r\n        this.scoreElement = document.getElementById('score');\r\n\r\n        this.score = 0;\r\n        // time since the start of the game loop\r\n        this.lastRender = 0;\r\n        // Possible state : STOPPED, START, GAME, CHASE\r\n        this.GAME_STATE = 'START';\r\n    }\r\n\r\n    initGame() {\r\n        this.board.buildBoard();\r\n    }\r\n\r\n    startGameLoop() {\r\n        this.pacman.reinitPacman();\r\n        this.bindEventHandler();\r\n        this.lastRender = 0;\r\n        window.requestAnimationFrame(this.loop.bind(this));\r\n    }\r\n\r\n    loop(timestamp) {\r\n        let progress = timestamp - this.lastRender;\r\n        this.update(progress);\r\n        this.draw();\r\n\r\n        if (this.GAME_STATE !== 'STOPPED') {\r\n            this.lastRender = timestamp;\r\n            window.requestAnimationFrame(this.loop.bind(this));\r\n        }\r\n\r\n    }\r\n\r\n    update(progress) {\r\n        // Update the state of the world for the elapsed time since last render\r\n        this.updatePacman();\r\n    }\r\n\r\n    draw() {\r\n        // Update the state of the world for the elapsed time since last render\r\n        this.pacman.drawPacman();\r\n    }\r\n\r\n    bindEventHandler() {\r\n        document.addEventListener(\"keyup\", this.keyupEventHandler.bind(this));\r\n    }\r\n\r\n    unbindEventHandler() {\r\n        document.removeEventListener(\"keyup\", this.keyupEventHandler);\r\n    }\r\n\r\n    keyupEventHandler(event) {\r\n        event.preventDefault();\r\n        let keycode = event.which;\r\n\r\n        // LEFT : ARROW_LEFT or Q\r\n        if (keycode === 37 || keycode === 81) {\r\n            this.pacman.setUserInputDirection(\"LEFT\");\r\n        }\r\n        // RIGHT : ARROW_RIGHT or D\r\n        if (keycode === 39 || keycode === 68) {\r\n            this.pacman.setUserInputDirection(\"RIGHT\");\r\n        }\r\n        // UP : ARROW_UP or Z\r\n        if (keycode === 38 || keycode === 90) {\r\n            this.pacman.setUserInputDirection(\"UP\");\r\n        }\r\n        // DOWN : ARROW_DOWN or S\r\n        if (keycode === 40 || keycode === 83) {\r\n            this.pacman.setUserInputDirection(\"DOWN\");\r\n        }\r\n    }\r\n\r\n    updatePacman() {\r\n        if (this.pacman.coordIsTargetCoord()) {\r\n            this.addPointOfCurrentPacmanTile();\r\n            // If animation is still happening\r\n            if (this.pacman.direction || this.pacman.userInputDirection) {\r\n                // if (!this.pacman.animationIsPending()) {\r\n                // Calcul of the next tile in the direction\r\n                let nextTile = this.getNextTileInDirection(this.pacman.currentCoord, this.pacman.userInputDirection);\r\n                if (nextTile && nextTile.tileType === 'PATH') {\r\n                    this.pacman.confirmUserDirection();\r\n                    this.pacman.setTargetCoord(nextTile.coord);\r\n                } else {\r\n                    let nextTile = this.getNextTileInDirection(this.pacman.currentCoord, this.pacman.direction);\r\n                    if (nextTile && nextTile.tileType === 'PATH') {\r\n                        this.pacman.setTargetCoord(nextTile.coord);\r\n                    } else {\r\n                        this.pacman.direction = '';\r\n                        this.pacman.state = 'IDLE';\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    setPacmanTargetTile(tile) {\r\n        this.pacman.setTargetCoord(tile.coord);\r\n    }\r\n\r\n    addPointOfCurrentPacmanTile() {\r\n        let currentTile = this.board.getTile(this.pacman.currentCoord);\r\n        if (currentTile.hasPoint) {\r\n            this.addScore(10);\r\n            currentTile.removePoint();\r\n        }\r\n    }\r\n\r\n    getNextTileInDirection(currentCoord, direction) {\r\n        if(direction && currentCoord){\r\n        let directionMatrice = DIRECTION_MATRICES[direction];\r\n        let coordToMove = addCoord(directionMatrice, currentCoord);\r\n        return this.board.getTile(coordToMove);\r\n        } else return false;\r\n    }\r\n\r\n    addScore(value) {\r\n        this.score += value;\r\n        this.scoreElement.textContent = this.score;\r\n    }\r\n\r\n}","import Game from \"./game\";\r\n\r\nfunction docReady(fn) {\r\n    // see if DOM is already available\r\n    if (document.readyState === \"complete\" || document.readyState === \"interactive\") {\r\n        // call on next available tick\r\n        setTimeout(fn, 1);\r\n    } else {\r\n        document.addEventListener(\"DOMContentLoaded\", fn);\r\n    }\r\n}    \r\n\r\n\r\ndocReady(()=>{\r\n    const game = new Game();\r\n    game.initGame();\r\n    game.startGameLoop();\r\n})\r\n\r\n"]}