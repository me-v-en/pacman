parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"NRet":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BONEY_BODY=exports.BONEY_HEAD=exports.ISAAC_SPRITE=exports.PILL_IMAGE=exports.COIN_IMAGE=exports.BG_IMAGE=exports.CTX=exports.SCORE_ELEMENT=exports.CANVAS_ELEMENT=void 0;var e=document.getElementById("canvas");exports.CANVAS_ELEMENT=e;var t=document.getElementById("score");exports.SCORE_ELEMENT=t;var o=canvas.getContext("2d");exports.CTX=o,o.imageSmoothingEnabled=!1;var E=document.getElementById("bgBoard");exports.BG_IMAGE=E;var r=document.getElementById("coin");exports.COIN_IMAGE=r;var s=document.getElementById("pill");exports.PILL_IMAGE=s;var n=document.getElementById("isaacSprite");exports.ISAAC_SPRITE=n;var d=document.getElementById("boneyHead");exports.BONEY_HEAD=d;var p=document.getElementById("boneyBody");exports.BONEY_BODY=p;
},{}],"rOsU":[function(require,module,exports) {
module.exports={animationDuration:200,stepAnimationDuration:50,framesStep:10,spriteSize:32,tileSize:32,boardWidth:28,boardHeight:31,canvasWidth:840,canvasHeight:930,ennemiesData:[{initialCoord:[12,13],initialTarget:[13,11],scatterTarget:[1,26],spawnTimeout:2e3},{initialCoord:[13,13],initialTarget:[13,11],scatterTarget:[1,1],spawnTimeout:4e3},{initialCoord:[14,13],initialTarget:[13,11],scatterTarget:[26,1],spawnTimeout:6e3},{initialCoord:[15,13],initialTarget:[14,11],scatterTarget:[26,29],spawnTimeout:8e3}],boardArray:[["X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X"],["X",".",".",".",".",".",".",".",".",".",".",".",".","X","X",".",".",".",".",".",".",".",".",".",".",".",".","X"],["X",".","X","X","X","X",".","X","X","X","X","X",".","X","X",".","X","X","X","X","X",".","X","X","X","X",".","X"],["X","O","X","X","X","X",".","X","X","X","X","X",".","X","X",".","X","X","X","X","X",".","X","X","X","X","O","X"],["X",".","X","X","X","X",".","X","X","X","X","X",".","X","X",".","X","X","X","X","X",".","X","X","X","X",".","X"],["X",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","X"],["X",".","X","X","X","X",".","X","X",".","X","X","X","X","X","X","X","X",".","X","X",".","X","X","X","X",".","X"],["X",".","X","X","X","X",".","X","X",".","X","X","X","X","X","X","X","X",".","X","X",".","X","X","X","X",".","X"],["X",".",".",".",".",".",".","X","X",".",".",".",".","X","X",".",".",".",".","X","X",".",".",".",".",".",".","X"],["X","X","X","X","X","X",".","X","X","X","X","X",".","X","X",".","X","X","X","X","X",".","X","X","X","X","X","X"],["X","X","X","X","X","X",".","X","X","X","X","X",".","X","X",".","X","X","X","X","X",".","X","X","X","X","X","X"],["X","X","X","X","X","X",".","X","X",".",".",".",".",".",".",".",".",".",".","X","X",".","X","X","X","X","X","X"],["X","X","X","X","X","X",".","X","X",".","X","X","X","-","-","X","X","X",".","X","X",".","X","X","X","X","X","X"],["X","X","X","X","X","X",".","X","X",".","X","h","h","h","h","h","h","X",".","X","X",".","X","X","X","X","X","X"],[".",".",".",".",".",".",".",".",".",".","X","h","h","h","h","h","h","X",".",".",".",".",".",".",".",".",".","."],["X","X","X","X","X","X",".","X","X",".","X","h","h","h","h","h","h","X",".","X","X",".","X","X","X","X","X","X"],["X","X","X","X","X","X",".","X","X",".","X","X","X","X","X","X","X","X",".","X","X",".","X","X","X","X","X","X"],["X","X","X","X","X","X",".","X","X",".",".",".",".",".",".",".",".",".",".","X","X",".","X","X","X","X","X","X"],["X","X","X","X","X","X",".","X","X",".","X","X","X","X","X","X","X","X",".","X","X",".","X","X","X","X","X","X"],["X","X","X","X","X","X",".","X","X",".","X","X","X","X","X","X","X","X",".","X","X",".","X","X","X","X","X","X"],["X",".",".",".",".",".",".",".",".",".",".",".",".","X","X",".",".",".",".",".",".",".",".",".",".",".",".","X"],["X",".","X","X","X","X",".","X","X","X","X","X",".","X","X",".","X","X","X","X","X",".","X","X","X","X",".","X"],["X",".","X","X","X","X",".","X","X","X","X","X",".","X","X",".","X","X","X","X","X",".","X","X","X","X",".","X"],["X","O",".",".","X","X",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","X","X",".",".","O","X"],["X","X","X",".","X","X",".","X","X",".","X","X","X","X","X","X","X","X",".","X","X",".","X","X",".","X","X","X"],["X","X","X",".","X","X",".","X","X",".","X","X","X","X","X","X","X","X",".","X","X",".","X","X",".","X","X","X"],["X",".",".",".",".",".",".","X","X",".",".",".",".","X","X",".",".",".",".","X","X",".",".",".",".",".",".","X"],["X",".","X","X","X","X","X","X","X","X","X","X",".","X","X",".","X","X","X","X","X","X","X","X","X","X",".","X"],["X",".","X","X","X","X","X","X","X","X","X","X",".","X","X",".","X","X","X","X","X","X","X","X","X","X",".","X"],["X",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","X"],["X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X"]]};
},{}],"dURd":[function(require,module,exports) {
"use strict";function r(r,e){return u(r)||o(r,e)||n(r,e)||t()}function t(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(r,t){if(r){if("string"==typeof r)return e(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(r):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(r,t):void 0}}function e(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}function o(r,t){var n=r&&("undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"]);if(null!=n){var e,o,u=[],a=!0,i=!1;try{for(n=n.call(r);!(a=(e=n.next()).done)&&(u.push(e.value),!t||u.length!==t);a=!0);}catch(c){i=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(i)throw o}}return u}}function u(r){if(Array.isArray(r))return r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.modulo=s,exports.moduloCoord=f,exports.getDirectionFromCoord=d,exports.addCoord=p,exports.substractCoord=v,exports.distanceBetweenCoords=y,exports.compareArrays=h,exports.DIRECTION_MATRICES=void 0;var a=require("./data.json"),i=a.canvasWidth,c=a.canvasHeight,l={LEFT:[-1,0],RIGHT:[1,0],UP:[0,-1],DOWN:[0,1]};function s(r,t){var n=(r%t+t)%t;return n<0?n+Math.abs(t):n}function f(r){return[s(r[0],i),s(r[1],c)]}function d(t){var n=Object.entries(l).find(function(n){var e=r(n,2),o=(e[0],e[1]);return h(t,o)});if(n)return n[0]}function p(r,t){return r.map(function(r,n){return r+t[n]})}function v(r,t){return r.map(function(r,n){return r-t[n]})}function y(r,t){var n=Math.pow(r[0]-t[0],2),e=Math.pow(r[1]-t[1],2);return Math.sqrt(n+e)}function h(r,t){if((null==r?void 0:r.length)!=(null==t?void 0:t.length))return!1;for(var n=0;n<r.length;n++)if(r[n]!=t[n])return!1;return!0}exports.DIRECTION_MATRICES=l;
},{"./data.json":"rOsU"}],"zP0G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./canvas"),t=require("./utils");function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}var s=require("./data.json"),o=s.tileSize,n=function(){function t(e,r){switch(i(this,t),this.tileType="",this.coord=r,this.hasPoint=!1,this.hasSuperPoint=!1,e){case"X":this.tileType="WALL";break;case".":this.tileType="PATH",this.hasPoint=!0;break;case"O":this.tileType="PATH",this.hasSuperPoint=!0;break;case"-":this.tileType="GATE";break;case"h":this.tileType="HOME"}}return a(t,[{key:"removePoint",value:function(){this.hasPoint=!1,this.hasSuperPoint=!1}},{key:"drawTile",value:function(){if(this.hasPoint&&e.CTX.drawImage(e.COIN_IMAGE,this.coord[0]*o,this.coord[1]*o,o,o),this.hasSuperPoint){e.CTX.drawImage(e.PILL_IMAGE,this.coord[0]*o-8,this.coord[1]*o-8,o+16,o+16)}}}]),t}();exports.default=n;
},{"./canvas":"NRet","./utils":"dURd","./data.json":"rOsU"}],"GCdN":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=function(){function t(){e(this,t),this.initState()}return n(t,[{key:"initState",value:function(){this.score=0,this.gameState="START",this.board,this.pacman,this.boneys}}]),t}(),r=new i,a={STATE:r};exports.default=a;
},{}],"C0wJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("./tile")),r=require("./canvas"),t=require("./utils"),a=i(require("./state"));function i(e){return e&&e.__esModule?e:{default:e}}function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function o(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function u(e,r,t){return r&&o(e.prototype,r),t&&o(e,t),e}var l=require("./data.json"),d=l.boardArray,s=l.boardArray[0].length,f=l.boardArray.length,c=l.canvasWidth,h=l.canvasHeight,v=function(){function i(){n(this,i),this.boardTiles=[],this.initBoard()}return u(i,[{key:"initBoard",value:function(){this.boardTiles=[];for(var r=0;r<f;r++){for(var t=[],a=0;a<s;a++){var i=new e.default(d[r][a],[a,r]);t.push(i)}this.boardTiles.push(t)}}},{key:"getTile",value:function(e){if(e){var r=(0,t.modulo)(e[0],s),a=(0,t.modulo)(e[1],f);return this.boardTiles[a][r]}}},{key:"drawBoard",value:function(){r.CTX.drawImage(r.BG_IMAGE,0,0,r.CANVAS_ELEMENT.width,r.CANVAS_ELEMENT.height),this.drawTiles()}},{key:"drawTiles",value:function(){this.boardTiles.forEach(function(e){e.forEach(function(e){e.drawTile()})})}},{key:"getNextTileInDirection",value:function(e,r){if(!r||!e)return!1;var i=t.DIRECTION_MATRICES[r],n=(0,t.addCoord)(i,e);return a.default.board.getTile(n)}}]),i}();exports.default=v;
},{"./tile":"zP0G","./canvas":"NRet","./utils":"dURd","./state":"GCdN","./data.json":"rOsU"}],"BRyw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./canvas"),e=require("./utils");function i(t,e){return s(t)||a(t,e)||r(t,e)||n()}function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(t,e){if(t){if("string"==typeof t)return o(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function a(t,e){var i=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=i){var n,r,o=[],a=!0,s=!1;try{for(i=i.call(t);!(a=(n=i.next()).done)&&(o.push(n.value),!e||o.length!==e);a=!0);}catch(u){s=!0,r=u}finally{try{a||null==i.return||i.return()}finally{if(s)throw r}}return o}}function s(t){if(Array.isArray(t))return t}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,i){return e&&c(t.prototype,e),i&&c(t,i),t}var m=require("./data.json"),d=m.tileSize,l=m.spriteSize,f=m.animationDuration,p=m.stepAnimationDuration,v=m.framesStep,T=["DOWN","RIGHT","UP","LEFT"],C=function(){function n(t){u(this,n),this.init(t)}return h(n,[{key:"init",value:function(t){this.ennemyData=t,this.currentCoord=t.initialCoord,this.movingCoord=this.currentCoord,this.targetCoord=t.initialTarget,this.scatterCoord=t.scatterTarget,this.spawnTimeout=t.spawnTimeout,this.justSpawned=!0,this.direction="",this.userInputDirection="",this.beginningGameTimestamp=null,this.animTimestamp=null,this.stepAnimationTimeStamp=null,this.stepAnimation=0,this.state="SPAWN"}},{key:"canMove",value:function(t){return this.beginningGameTimestamp?t-this.beginningGameTimestamp>this.spawnTimeout:(this.beginningGameTimestamp=t,!1)}},{key:"setDirection",value:function(t){this.direction=t}},{key:"getOppositeDirection",value:function(){switch(this.direction){case"UP":return"DOWN";case"DOWN":return"UP";case"LEFT":return"RIGHT";case"RIGHT":return"LEFT";default:return null}}},{key:"setMovingCoord",value:function(t){var e=this;this.movingCoord=t,this.animTimestamp=(new Date).getTime(),this.direction=this.computeDirection(),window.setTimeout(function(){e.currentCoord=t},f)}},{key:"updateState",value:function(){switch(this.state){case"SPAWN":(0,e.compareArrays)(this.currentCoord,this.targetCoord)&&(this.targetCoord=this.scatterCoord,this.state="SCATTER");break;case"SCATTER":(0,e.compareArrays)(this.currentCoord,this.scatterCoord)&&(this.state="CHASE")}}},{key:"computeDirection",value:function(){var t=(0,e.substractCoord)(this.movingCoord,this.currentCoord);return(0,e.getDirectionFromCoord)(t)}},{key:"isAnimationFinished",value:function(){return this.currentCoord===this.movingCoord}},{key:"isEnnemyKilled",value:function(t){return(0,e.compareArrays)(t,this.currentCoord)}},{key:"isTilePossible",value:function(t){return this.justSpawned?["PATH","GATE","HOME"].includes(t.tileType):"PATH"===(null==t?void 0:t.tileType)}},{key:"updateAnimation",value:function(){return null}},{key:"draw",value:function(t){if(!this.characterIsOutOfScreen()){var e,n;this.stepAnimationTimeStamp||(this.stepAnimationTimeStamp=t);var r=i(this.getCoordToDraw(),2);e=r[0],n=r[1],this.drawOnCanvas(e,n,t)}}},{key:"characterIsOutOfScreen",value:function(){return 27===this.movingCoord[0]&&0===this.currentCoord[0]||0===this.movingCoord[0]&&27===this.currentCoord[0]}},{key:"getCoordToDraw",value:function(){if(this.isAnimationFinished())return this.currentCoord;var t=this.getProgressOfAnimation(),e=this.movingCoord[0]-this.currentCoord[0],i=this.movingCoord[1]-this.currentCoord[1];return[this.currentCoord[0]+e*t,this.currentCoord[1]+i*t]}},{key:"drawOnCanvas",value:function(t,e,i){i-this.stepAnimationTimeStamp>p&&this.incrementStepAnimation(i),this.drawBody(t,e),this.drawHead(t,e)}},{key:"drawBody",value:function(e,i){t.CTX.save(),e=e*d-3,i=(i-.2)*d-3;var n=0,r=this.stepAnimation,o=!1;"LEFT"!==this.direction&&"RIGHT"!==this.direction||(n=2),"LEFT"===this.direction&&(o=!0),r>7&&(n++,r%=8),o&&(t.CTX.translate(e+d,i),t.CTX.scale(-1,1),e=0,i=0),t.CTX.drawImage(t.BONEY_BODY,r*l,n*l,d,d,e,i,d+6,d+6),t.CTX.restore()}},{key:"drawHead",value:function(e,i){var n=this;t.CTX.save(),e=e*d-3,i=(i-.6)*d-3;var r=T.findIndex(function(t){return t===n.direction});-1===r&&(r=0);var o=!1;"LEFT"===this.direction&&(o=!0,r=1),o&&(t.CTX.translate(e+d,i),t.CTX.scale(-1,1),e=0,i=0),t.CTX.drawImage(t.BONEY_HEAD,r*l,0,d,d,e,i,d+6,d+6),t.CTX.restore()}},{key:"incrementStepAnimation",value:function(t){this.stepAnimation++,this.stepAnimation=this.stepAnimation%v,this.stepAnimationTimeStamp=t}},{key:"getProgressOfAnimation",value:function(){return((new Date).getTime()-this.animTimestamp)/f}}]),n}();exports.default=C;
},{"./canvas":"NRet","./utils":"dURd","./data.json":"rOsU"}],"KNzD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./state"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}var r=require("./data.json"),o=r.animationDuration,u=function(){function e(t){n(this,e),this.init(t)}return a(e,[{key:"init",value:function(t){this.pacman=t}},{key:"update",value:function(){var t=this.computePathPacman();t?this.setMovingCoord(t.coord):(this.pacman.direction="",this.pacman.state="IDLE")}},{key:"computePathPacman",value:function(){if(this.pacman.direction||this.isUserInputValid()){var e=t.default.board.getNextTileInDirection(this.pacman.currentCoord,this.pacman.userInputDirection);if("PATH"===(null==e?void 0:e.tileType))return this.confirmUserDirection(),e;var n=t.default.board.getNextTileInDirection(this.pacman.currentCoord,this.pacman.direction);return"PATH"===(null==n?void 0:n.tileType)?(this.setMovingCoord(n.coord),n):void 0}}},{key:"setMovingCoord",value:function(t){var e=this;this.pacman.state="MOVING",this.pacman.movingCoord=t,this.pacman.animTimestamp=(new Date).getTime(),window.setTimeout(function(){e.pacman.currentCoord=t},o)}},{key:"isUserInputValid",value:function(){return(new Date).getTime()-this.pacman.inputTimestamp>2e3?null:this.pacman.userInputDirection}},{key:"confirmUserDirection",value:function(){this.pacman.direction=this.pacman.userInputDirection}}]),e}();exports.default=u;
},{"./data.json":"rOsU","./state":"GCdN"}],"wDgG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./canvas"),n=e(require("./state"));function e(t){return t&&t.__esModule?t:{default:t}}function r(t,n){return c(t)||s(t,n)||i(t,n)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t,n){if(t){if("string"==typeof t)return o(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?o(t,n):void 0}}function o(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function s(t,n){var e=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=e){var r,a,i=[],o=!0,s=!1;try{for(e=e.call(t);!(o=(r=e.next()).done)&&(i.push(r.value),!n||i.length!==n);o=!0);}catch(c){s=!0,a=c}finally{try{o||null==e.return||e.return()}finally{if(s)throw a}}return i}}function c(t){if(Array.isArray(t))return t}function u(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function m(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,n,e){return n&&m(t.prototype,n),e&&m(t,e),t}var l=require("./data.json"),h=l.tileSize,d=l.spriteSize,f=l.animationDuration,v=l.stepAnimationDuration,y=l.framesStep,C=function(){function n(t){u(this,n),this.init(t)}return p(n,[{key:"init",value:function(t){this.pacman=t,this.stepAnimationTimeStamp=null,this.stepAnimation=0}},{key:"draw",value:function(t){if(!this.characterIsOutOfScreen()){var n,e;this.stepAnimationTimeStamp||(this.stepAnimationTimeStamp=t);var a=r(this.getCoordToDraw(),2);n=a[0],e=a[1],this.drawOnCanvas(n,e,t)}}},{key:"characterIsOutOfScreen",value:function(){return 27===this.pacman.movingCoord[0]&&0===this.pacman.currentCoord[0]||0===this.pacman.movingCoord[0]&&27===this.pacman.currentCoord[0]}},{key:"getCoordToDraw",value:function(){var t,n;if("MOVING"===this.pacman.state){var e=this.getProgressOfAnimation(),r=this.pacman.movingCoord[0]-this.pacman.currentCoord[0],a=this.pacman.movingCoord[1]-this.pacman.currentCoord[1];t=this.pacman.currentCoord[0]+r*e,n=this.pacman.currentCoord[1]+a*e}return"IDLE"===this.pacman.state&&(t=this.pacman.currentCoord[0],n=this.pacman.currentCoord[1]),[t,n]}},{key:"incrementStepAnimation",value:function(t){this.stepAnimation++,this.stepAnimation=this.stepAnimation%y,this.stepAnimationTimeStamp=t}},{key:"getProgressOfAnimation",value:function(){return((new Date).getTime()-this.pacman.animTimestamp)/f}},{key:"drawOnCanvas",value:function(t,n,e){e-this.stepAnimationTimeStamp>v&&this.incrementStepAnimation(e),this.drawBody(t,n),this.drawHead(t,n)}},{key:"drawBody",value:function(n,e){t.CTX.save(),n=n*h-3,e=(e-.1)*h-3;var r=0,a=this.stepAnimation,i=7,o=!1;"LEFT"!==this.pacman.direction&&"RIGHT"!==this.pacman.direction||(r=2,i=0),"LEFT"===this.pacman.direction&&(o=!0),(a+=i)>=8&&(r++,a%=8),o&&(t.CTX.translate(n+h,e),t.CTX.scale(-1,1),n=0,e=0),t.CTX.drawImage(t.ISAAC_SPRITE,a*d,r*d,h,h,n,e,h+6,h+6),t.CTX.restore()}},{key:"drawHead",value:function(n,e){t.CTX.save(),n=n*h-3,e=(e-.5)*h-3;var r=this.stepAnimation>=8?1:0,a=!1,i=0;"UP"===this.pacman.direction&&(i=4),"RIGHT"===this.pacman.direction&&(i=2),"LEFT"===this.pacman.direction&&(i=2,a=!0),r+=i,a&&(t.CTX.translate(n+h,e),t.CTX.scale(-1,1),n=0,e=0),t.CTX.drawImage(t.ISAAC_SPRITE,r*d,0,h,h,n,e,h+6,h+6),t.CTX.restore()}}]),n}();exports.default=C;
},{"./data.json":"rOsU","./canvas":"NRet","./state":"GCdN"}],"fnOe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./canvas"),t=a(require("./pacmanBehaviour")),i=a(require("./pacmanAnimation")),n=a(require("./state"));function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e}var s=require("./data.json"),c=s.tileSize,d=s.spriteSize,l=s.animationDuration,f=s.stepAnimationDuration,h=s.framesStep,p=function(){function a(e){r(this,a),this.init(e),this.pacmanBehaviour=new t.default(this),this.pacmanAnimation=new i.default(this)}return u(a,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[1,14];this.currentCoord=e,this.movingCoord=e,this.state="IDLE",this.direction="",this.userInputDirection="",this.inputTimestamp=null}},{key:"update",value:function(){this.isAnimationFinished()&&(this.addPoint(),this.pacmanBehaviour.update())}},{key:"addPoint",value:function(){var e=n.default.board.getTile(n.default.pacman.currentCoord);(e.hasPoint||e.hasSuperPoint)&&(this.addScore(10),e.removePoint())}},{key:"addScore",value:function(e){this.setScore(n.default.score+e)}},{key:"setScore",value:function(t){n.default.score=t,e.SCORE_ELEMENT.textContent=n.default.score}},{key:"setUserInputDirection",value:function(e){this.userInputDirection=e,this.inputTimestamp=(new Date).getTime()}},{key:"isAnimationFinished",value:function(){return this.currentCoord===this.movingCoord}},{key:"updateAnimation",value:function(){return null}},{key:"draw",value:function(e){this.pacmanAnimation.draw(e)}}]),a}();exports.default=p;
},{"./canvas":"NRet","./pacmanBehaviour":"KNzD","./pacmanAnimation":"wDgG","./state":"GCdN","./data.json":"rOsU"}],"ZxoE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("./board")),t=require("./canvas"),n=o(require("./ghost")),a=o(require("./pacman")),i=o(require("./tile")),r=o(require("./state")),u=require("./utils");function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function s(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}var f=require("./data.json"),c=f.ennemiesData,v=["DOWN","UP","RIGHT","LEFT"],m=function(){function i(){l(this,i),r.default.score=0,r.default.gameState="START",this.initGame()}return s(i,[{key:"initGame",value:function(){r.default.board=new e.default,r.default.pacman=new a.default,r.default.boneys=this.initEnnemies(),r.default.gameState="START",this.draw()}},{key:"startGameLoop",value:function(){this.bindEventHandler(),window.requestAnimationFrame(this.loop.bind(this))}},{key:"loop",value:function(e){var t=e-this.lastRender;this.lastRender=e,this.draw(t,e),this.update(t,e),window.requestAnimationFrame(this.loop.bind(this))}},{key:"update",value:function(e,t){this.updateGameState(),"END"!==r.default.gameState&&(r.default.pacman.update(),this.updateEnnemies(t))}},{key:"updateGameState",value:function(){this.isPacmanDead()&&(r.default.gameState="END")}},{key:"isPacmanDead",value:function(){var e=!1;e:for(var t=0;t<r.default.boneys.length;t++){if(r.default.boneys[t].isEnnemyKilled(r.default.pacman.currentCoord)){e=!0;break e}}return e}},{key:"draw",value:function(e,n){t.CTX.fillStyle="#2c2a2a",t.CTX.fillRect(0,0,t.CANVAS_ELEMENT.width,t.CANVAS_ELEMENT.height),r.default.board.drawBoard(),r.default.pacman.draw(n),this.drawEnnemies(n)}},{key:"initEnnemies",value:function(){var e=[];return c.forEach(function(t){e.push(new n.default(t))}),e}},{key:"updateEnnemies",value:function(e){var t=this;r.default.boneys.forEach(function(n){t.updateEnnemy(n,e)})}},{key:"updateEnnemy",value:function(e,t){if(e.isAnimationFinished()&&e.canMove(t)){e.updateState();var n=this.getEnnemyPossibleTiles(e);n.length>1&&"CHASE"===e.state&&this.getTarget(e);var a=this.computeNearestTileToTarget(e,n);a&&e.setMovingCoord(a.coord)}}},{key:"getEnnemyPossibleTiles",value:function(e){var t=this,n=e.currentCoord;return v.filter(function(t){return t!=e.getOppositeDirection()}).map(function(e){return t.getNextTileInDirection(n,e)}).filter(function(t){return e.isTilePossible(t)})}},{key:"computeNearestTileToTarget",value:function(e,t){e.targetCoord;var n=null,a=null;return t.forEach(function(t){var i=(0,u.distanceBetweenCoords)(t.coord,e.targetCoord);(null===n||i<n)&&(n=i,a=t)}),a}},{key:"getTarget",value:function(e){"CHASE"!==!e.state&&(e.justSpawned=!1,e.targetCoord=r.default.pacman.movingCoord)}},{key:"drawEnnemies",value:function(e){r.default.boneys.forEach(function(t){t.draw(e)})}},{key:"getNextTileInDirection",value:function(e,t){if(!t||!e)return!1;var n=u.DIRECTION_MATRICES[t],a=(0,u.addCoord)(n,e);return r.default.board.getTile(a)}},{key:"bindEventHandler",value:function(){document.addEventListener("keydown",this.keydownEventHandler.bind(this))}},{key:"unbindEventHandler",value:function(){document.removeEventListener("keydown",this.keydownEventHandler)}},{key:"keydownEventHandler",value:function(e){var t=e.which;37!==t&&81!==t||(r.default.pacman.setUserInputDirection("LEFT"),e.preventDefault()),39!==t&&68!==t||(r.default.pacman.setUserInputDirection("RIGHT"),e.preventDefault()),38!==t&&90!==t||(r.default.pacman.setUserInputDirection("UP"),e.preventDefault()),40!==t&&83!==t||(r.default.pacman.setUserInputDirection("DOWN"),e.preventDefault())}}]),i}();exports.default=m;
},{"./board":"C0wJ","./canvas":"NRet","./ghost":"BRyw","./pacman":"fnOe","./tile":"zP0G","./state":"GCdN","./data.json":"rOsU","./utils":"dURd"}],"fWRU":[function(require,module,exports) {
"use strict";var e=t(require("./game"));function t(e){return e&&e.__esModule?e:{default:e}}function n(e){"complete"===document.readyState||"interactive"===document.readyState?setTimeout(e,1):document.addEventListener("DOMContentLoaded",e)}n(function(){var t=new e.default;t.initGame(),t.startGameLoop()});
},{"./game":"ZxoE"}]},{},["fWRU"], null)
//# sourceMappingURL=script.6ff4f46f.js.map