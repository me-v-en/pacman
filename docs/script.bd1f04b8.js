parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"NRet":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ENNEMY_BODY=exports.ENNEMY_HEAD=exports.ISAAC_SPRITE=exports.PILL_IMAGE=exports.COIN_IMAGE=exports.BG_IMAGE=exports.CTX=exports.SCORE_ELEMENT=exports.CANVAS_ELEMENT=void 0;var e=document.getElementById("canvas");exports.CANVAS_ELEMENT=e;var t=document.getElementById("score");exports.SCORE_ELEMENT=t;var E=canvas.getContext("2d");exports.CTX=E,E.imageSmoothingEnabled=!1;var o=document.getElementById("bgBoard");exports.BG_IMAGE=o;var r=document.getElementById("coin");exports.COIN_IMAGE=r;var n=document.getElementById("pill");exports.PILL_IMAGE=n;var s=document.getElementById("isaacSprite");exports.ISAAC_SPRITE=s;var d=document.getElementById("ennemyHead");exports.ENNEMY_HEAD=d;var p=document.getElementById("ennemyBody");exports.ENNEMY_BODY=p;
},{}],"rOsU":[function(require,module,exports) {
module.exports={animationDuration:200,stepAnimationDuration:100,framesStep:10,spriteSize:32,tileSize:32,boardWidth:28,boardHeight:31,canvasWidth:840,canvasHeight:930,ennemiesData:[{initialCoord:[12,13],initialTarget:[13,11],scatterTarget:[1,26],spawnTimeout:2e3},{initialCoord:[13,13],initialTarget:[13,11],scatterTarget:[1,1],spawnTimeout:4e3},{initialCoord:[14,13],initialTarget:[13,11],scatterTarget:[26,1],spawnTimeout:6e3},{initialCoord:[15,13],initialTarget:[14,11],scatterTarget:[26,29],spawnTimeout:8e3}],boardArray:[["X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X"],["X",".",".",".",".",".",".",".",".",".",".",".",".","X","X",".",".",".",".",".",".",".",".",".",".",".",".","X"],["X",".","X","X","X","X",".","X","X","X","X","X",".","X","X",".","X","X","X","X","X",".","X","X","X","X",".","X"],["X","O","X","X","X","X",".","X","X","X","X","X",".","X","X",".","X","X","X","X","X",".","X","X","X","X","O","X"],["X",".","X","X","X","X",".","X","X","X","X","X",".","X","X",".","X","X","X","X","X",".","X","X","X","X",".","X"],["X",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","X"],["X",".","X","X","X","X",".","X","X",".","X","X","X","X","X","X","X","X",".","X","X",".","X","X","X","X",".","X"],["X",".","X","X","X","X",".","X","X",".","X","X","X","X","X","X","X","X",".","X","X",".","X","X","X","X",".","X"],["X",".",".",".",".",".",".","X","X",".",".",".",".","X","X",".",".",".",".","X","X",".",".",".",".",".",".","X"],["X","X","X","X","X","X",".","X","X","X","X","X",".","X","X",".","X","X","X","X","X",".","X","X","X","X","X","X"],["X","X","X","X","X","X",".","X","X","X","X","X",".","X","X",".","X","X","X","X","X",".","X","X","X","X","X","X"],["X","X","X","X","X","X",".","X","X",".",".",".",".",".",".",".",".",".",".","X","X",".","X","X","X","X","X","X"],["X","X","X","X","X","X",".","X","X",".","X","X","X","-","-","X","X","X",".","X","X",".","X","X","X","X","X","X"],["X","X","X","X","X","X",".","X","X",".","X","h","h","h","h","h","h","X",".","X","X",".","X","X","X","X","X","X"],[".",".",".",".",".",".",".",".",".",".","X","h","h","h","h","h","h","X",".",".",".",".",".",".",".",".",".","."],["X","X","X","X","X","X",".","X","X",".","X","h","h","h","h","h","h","X",".","X","X",".","X","X","X","X","X","X"],["X","X","X","X","X","X",".","X","X",".","X","X","X","X","X","X","X","X",".","X","X",".","X","X","X","X","X","X"],["X","X","X","X","X","X",".","X","X",".",".",".",".",".",".",".",".",".",".","X","X",".","X","X","X","X","X","X"],["X","X","X","X","X","X",".","X","X",".","X","X","X","X","X","X","X","X",".","X","X",".","X","X","X","X","X","X"],["X","X","X","X","X","X",".","X","X",".","X","X","X","X","X","X","X","X",".","X","X",".","X","X","X","X","X","X"],["X",".",".",".",".",".",".",".",".",".",".",".",".","X","X",".",".",".",".",".",".",".",".",".",".",".",".","X"],["X",".","X","X","X","X",".","X","X","X","X","X",".","X","X",".","X","X","X","X","X",".","X","X","X","X",".","X"],["X",".","X","X","X","X",".","X","X","X","X","X",".","X","X",".","X","X","X","X","X",".","X","X","X","X",".","X"],["X","O",".",".","X","X",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","X","X",".",".","O","X"],["X","X","X",".","X","X",".","X","X",".","X","X","X","X","X","X","X","X",".","X","X",".","X","X",".","X","X","X"],["X","X","X",".","X","X",".","X","X",".","X","X","X","X","X","X","X","X",".","X","X",".","X","X",".","X","X","X"],["X",".",".",".",".",".",".","X","X",".",".",".",".","X","X",".",".",".",".","X","X",".",".",".",".",".",".","X"],["X",".","X","X","X","X","X","X","X","X","X","X",".","X","X",".","X","X","X","X","X","X","X","X","X","X",".","X"],["X",".","X","X","X","X","X","X","X","X","X","X",".","X","X",".","X","X","X","X","X","X","X","X","X","X",".","X"],["X",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".",".","X"],["X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X","X"]]};
},{}],"dURd":[function(require,module,exports) {
"use strict";function r(r,e){return u(r)||o(r,e)||n(r,e)||t()}function t(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(r,t){if(r){if("string"==typeof r)return e(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(r):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(r,t):void 0}}function e(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}function o(r,t){var n=r&&("undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"]);if(null!=n){var e,o,u=[],a=!0,i=!1;try{for(n=n.call(r);!(a=(e=n.next()).done)&&(u.push(e.value),!t||u.length!==t);a=!0);}catch(c){i=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(i)throw o}}return u}}function u(r){if(Array.isArray(r))return r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.modulo=s,exports.moduloCoord=f,exports.getDirectionFromCoord=d,exports.addCoord=p,exports.substractCoord=v,exports.distanceBetweenCoords=y,exports.compareArrays=h,exports.DIRECTION_MATRICES=void 0;var a=require("./data.json"),i=a.canvasWidth,c=a.canvasHeight,l={LEFT:[-1,0],RIGHT:[1,0],UP:[0,-1],DOWN:[0,1]};function s(r,t){var n=(r%t+t)%t;return n<0?n+Math.abs(t):n}function f(r){return[s(r[0],i),s(r[1],c)]}function d(t){var n=Object.entries(l).find(function(n){var e=r(n,2),o=(e[0],e[1]);return h(t,o)});if(n)return n[0]}function p(r,t){return r.map(function(r,n){return r+t[n]})}function v(r,t){return r.map(function(r,n){return r-t[n]})}function y(r,t){var n=Math.pow(r[0]-t[0],2),e=Math.pow(r[1]-t[1],2);return Math.sqrt(n+e)}function h(r,t){if((null==r?void 0:r.length)!=(null==t?void 0:t.length))return!1;for(var n=0;n<r.length;n++)if(r[n]!=t[n])return!1;return!0}exports.DIRECTION_MATRICES=l;
},{"./data.json":"rOsU"}],"zP0G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./canvas"),t=require("./utils");function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}var s=require("./data.json"),o=s.tileSize,n=function(){function t(e,r){switch(i(this,t),this.tileType="",this.coord=r,this.hasPoint=!1,this.hasSuperPoint=!1,e){case"X":this.tileType="WALL";break;case".":this.tileType="PATH",this.hasPoint=!0;break;case"O":this.tileType="PATH",this.hasSuperPoint=!0;break;case"-":this.tileType="GATE";break;case"h":this.tileType="HOME"}}return a(t,[{key:"removePoint",value:function(){this.hasPoint=!1,this.hasSuperPoint=!1}},{key:"drawTile",value:function(){if(this.hasPoint&&e.CTX.drawImage(e.COIN_IMAGE,this.coord[0]*o,this.coord[1]*o,o,o),this.hasSuperPoint){e.CTX.drawImage(e.PILL_IMAGE,this.coord[0]*o-8,this.coord[1]*o-8,o+16,o+16)}}}]),t}();exports.default=n;
},{"./canvas":"NRet","./utils":"dURd","./data.json":"rOsU"}],"GCdN":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var i=function(){function t(){e(this,t),this.initState()}return n(t,[{key:"initState",value:function(){this.score=0,this.gameState="START",this.board,this.pacman,this.ennemies}}]),t}(),r=new i,a={STATE:r};exports.default=a;
},{}],"C0wJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("./tile")),r=require("./canvas"),t=require("./utils"),a=i(require("./state"));function i(e){return e&&e.__esModule?e:{default:e}}function n(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function o(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function u(e,r,t){return r&&o(e.prototype,r),t&&o(e,t),e}var l=require("./data.json"),d=l.boardArray,s=l.boardArray[0].length,f=l.boardArray.length,c=l.canvasWidth,h=l.canvasHeight,v=function(){function i(){n(this,i),this.boardTiles=[],this.initBoard()}return u(i,[{key:"initBoard",value:function(){this.boardTiles=[];for(var r=0;r<f;r++){for(var t=[],a=0;a<s;a++){var i=new e.default(d[r][a],[a,r]);t.push(i)}this.boardTiles.push(t)}}},{key:"getTile",value:function(e){if(e){var r=(0,t.modulo)(e[0],s),a=(0,t.modulo)(e[1],f);return this.boardTiles[a][r]}}},{key:"drawBoard",value:function(){r.CTX.drawImage(r.BG_IMAGE,0,0,r.CANVAS_ELEMENT.width,r.CANVAS_ELEMENT.height),this.drawTiles()}},{key:"drawTiles",value:function(){this.boardTiles.forEach(function(e){e.forEach(function(e){e.drawTile()})})}},{key:"getNextTileInDirection",value:function(e,r){if(!r||!e)return!1;var i=t.DIRECTION_MATRICES[r],n=(0,t.addCoord)(i,e);return a.default.board.getTile(n)}}]),i}();exports.default=v;
},{"./tile":"zP0G","./canvas":"NRet","./utils":"dURd","./state":"GCdN","./data.json":"rOsU"}],"RWiE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("./state")),t=require("./utils");function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}var a=require("./data.json"),s=a.animationDuration,u=["DOWN","UP","RIGHT","LEFT"],c=function(){function n(e){r(this,n),this.init(e)}return o(n,[{key:"init",value:function(e){this.ennemy=e}},{key:"update",value:function(e){this.updateState(),this.computePath()}},{key:"updateState",value:function(){switch(this.ennemy.state){case"SPAWN":(0,t.compareArrays)(this.ennemy.currentCoord,this.ennemy.targetCoord)&&(this.ennemy.targetCoord=this.ennemy.scatterCoord,this.ennemy.state="SCATTER");break;case"SCATTER":(0,t.compareArrays)(this.ennemy.currentCoord,this.ennemy.scatterCoord)&&(this.ennemy.state="CHASE")}}},{key:"computePath",value:function(){var e=this.getPossibleTiles();e.length>1&&"CHASE"===this.ennemy.state&&this.getTarget();var t=this.computeNearestTileToTarget(e);t&&this.setMovingCoord(t.coord)}},{key:"getPossibleTiles",value:function(){var t=this,n=this.ennemy.currentCoord;return u.filter(function(e){return e!=t.getOppositeDirection()}).map(function(t){return e.default.board.getNextTileInDirection(n,t)}).filter(function(e){return t.isTilePossible(e)})}},{key:"isTilePossible",value:function(e){return this.ennemy.justSpawned?["PATH","GATE","HOME"].includes(e.tileType):"PATH"===(null==e?void 0:e.tileType)}},{key:"computeNearestTileToTarget",value:function(e){var n=this.ennemy.targetCoord,r=null,i=null;return e.forEach(function(e){var o=(0,t.distanceBetweenCoords)(e.coord,n);(null===r||o<r)&&(r=o,i=e)}),i}},{key:"getTarget",value:function(){"CHASE"!==!this.ennemy.state&&(this.ennemy.justSpawned=!1,this.ennemy.targetCoord=e.default.pacman.movingCoord)}},{key:"computeDirection",value:function(){var e=(0,t.substractCoord)(this.ennemy.movingCoord,this.ennemy.currentCoord);return(0,t.getDirectionFromCoord)(e)}},{key:"getOppositeDirection",value:function(){switch(this.ennemy.direction){case"UP":return"DOWN";case"DOWN":return"UP";case"LEFT":return"RIGHT";case"RIGHT":return"LEFT";default:return null}}},{key:"setMovingCoord",value:function(e){var t=this;this.ennemy.movingCoord=e,this.ennemy.animTimestamp=(new Date).getTime(),this.ennemy.direction=this.computeDirection(),window.setTimeout(function(){t.ennemy.currentCoord=e},s)}}]),n}();exports.default=c;
},{"./data.json":"rOsU","./state":"GCdN","./utils":"dURd"}],"Gy9a":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./canvas"),n=t(require("./state"));function t(e){return e&&e.__esModule?e:{default:e}}function r(e,n){return u(e)||s(e,n)||o(e,n)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,n){if(e){if("string"==typeof e)return a(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?a(e,n):void 0}}function a(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function s(e,n){var t=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=t){var r,i,o=[],a=!0,s=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(u){s=!0,i=u}finally{try{a||null==t.return||t.return()}finally{if(s)throw i}}return o}}function u(e){if(Array.isArray(e))return e}function m(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function c(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,n,t){return n&&c(e.prototype,n),t&&c(e,t),e}var d=require("./data.json"),h=d.tileSize,f=d.spriteSize,y=d.animationDuration,v=d.stepAnimationDuration,p=d.framesStep,C=["DOWN","RIGHT","UP","LEFT"],T=function(){function n(e){m(this,n),this.init(e)}return l(n,[{key:"init",value:function(e){this.ennemy=e,this.stepAnimationTimeStamp=null,this.stepAnimation=0}},{key:"draw",value:function(e){if(!this.characterIsOutOfScreen()){var n,t;this.stepAnimationTimeStamp||(this.stepAnimationTimeStamp=e);var i=r(this.getCoordToDraw(),2);n=i[0],t=i[1],this.drawOnCanvas(n,t,e)}}},{key:"characterIsOutOfScreen",value:function(){return 27===this.ennemy.movingCoord[0]&&0===this.ennemy.currentCoord[0]||0===this.ennemy.movingCoord[0]&&27===this.ennemy.currentCoord[0]}},{key:"isAnimationFinished",value:function(){return this.ennemy.currentCoord===this.ennemy.movingCoord}},{key:"getCoordToDraw",value:function(){if(this.isAnimationFinished())return this.ennemy.currentCoord;var e=this.getProgressOfAnimation(),n=this.ennemy.movingCoord[0]-this.ennemy.currentCoord[0],t=this.ennemy.movingCoord[1]-this.ennemy.currentCoord[1];return[this.ennemy.currentCoord[0]+n*e,this.ennemy.currentCoord[1]+t*e]}},{key:"incrementStepAnimation",value:function(e){this.stepAnimation++,this.stepAnimation=this.stepAnimation%p,this.stepAnimationTimeStamp=e}},{key:"getProgressOfAnimation",value:function(){return((new Date).getTime()-this.ennemy.animTimestamp)/y}},{key:"drawOnCanvas",value:function(e,n,t){t-this.stepAnimationTimeStamp>v&&this.incrementStepAnimation(t),this.drawBody(e,n),this.drawHead(e,n)}},{key:"drawBody",value:function(n,t){e.CTX.save(),n=n*h-3,t=(t-.2)*h-3;var r=0,i=this.stepAnimation,o=!1;"LEFT"!==this.ennemy.direction&&"RIGHT"!==this.ennemy.direction||(r=2),"LEFT"===this.ennemy.direction&&(o=!0),i>7&&(r++,i%=8),o&&(e.CTX.translate(n+h,t),e.CTX.scale(-1,1),n=0,t=0),e.CTX.drawImage(e.ENNEMY_BODY,i*f,r*f,h,h,n,t,h+6,h+6),e.CTX.restore()}},{key:"drawHead",value:function(n,t){var r=this;e.CTX.save(),n=n*h-3,t=(t-.6)*h-3;var i=C.findIndex(function(e){return e===r.ennemy.direction});-1===i&&(i=0);var o=!1;"LEFT"===this.ennemy.direction&&(o=!0,i=1),o&&(e.CTX.translate(n+h,t),e.CTX.scale(-1,1),n=0,t=0),e.CTX.drawImage(e.ENNEMY_HEAD,i*f,0,h,h,n,t,h+6,h+6),e.CTX.restore()}}]),n}();exports.default=T;
},{"./data.json":"rOsU","./canvas":"NRet","./state":"GCdN"}],"Dqyk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./utils"),i=n(require("./ennemyBehaviour")),t=n(require("./ennemyAnimation"));function n(e){return e&&e.__esModule?e:{default:e}}function r(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function a(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,i,t){return i&&a(e.prototype,i),t&&a(e,t),e}var u=require("./data.json"),s=function(){function n(e){r(this,n),this.init(e),this.ennemyBehaviour=new i.default(this),this.ennemyAnimation=new t.default(this)}return o(n,[{key:"init",value:function(e){this.ennemyData=e,this.currentCoord=e.initialCoord,this.movingCoord=this.currentCoord,this.targetCoord=e.initialTarget,this.scatterCoord=e.scatterTarget,this.spawnTimeout=e.spawnTimeout,this.justSpawned=!0,this.direction="",this.userInputDirection="",this.beginningGameTimestamp=null,this.animTimestamp=null,this.state="SPAWN"}},{key:"canMove",value:function(e){return this.beginningGameTimestamp?e-this.beginningGameTimestamp>this.spawnTimeout:(this.beginningGameTimestamp=e,!1)}},{key:"setDirection",value:function(e){this.direction=e}},{key:"update",value:function(e){this.isAnimationFinished()&&this.canMove(e)&&this.ennemyBehaviour.update(e)}},{key:"isPacmanKilled",value:function(i){return(0,e.compareArrays)(i,this.currentCoord)}},{key:"isAnimationFinished",value:function(){return this.currentCoord===this.movingCoord}},{key:"updateAnimation",value:function(){return null}},{key:"draw",value:function(e){this.ennemyAnimation.draw(e)}}]),n}();exports.default=s;
},{"./utils":"dURd","./ennemyBehaviour":"RWiE","./ennemyAnimation":"Gy9a","./data.json":"rOsU"}],"KNzD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("./state"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}var r=require("./data.json"),o=r.animationDuration,u=function(){function e(t){n(this,e),this.init(t)}return a(e,[{key:"init",value:function(t){this.pacman=t}},{key:"update",value:function(){var t=this.computePathPacman();t?this.setMovingCoord(t.coord):(this.pacman.direction="",this.pacman.state="IDLE")}},{key:"computePathPacman",value:function(){if(this.pacman.direction||this.isUserInputValid()){var e=t.default.board.getNextTileInDirection(this.pacman.currentCoord,this.pacman.userInputDirection);if("PATH"===(null==e?void 0:e.tileType))return this.confirmUserDirection(),e;var n=t.default.board.getNextTileInDirection(this.pacman.currentCoord,this.pacman.direction);return"PATH"===(null==n?void 0:n.tileType)?(this.setMovingCoord(n.coord),n):void 0}}},{key:"setMovingCoord",value:function(t){var e=this;this.pacman.state="MOVING",this.pacman.movingCoord=t,this.pacman.animTimestamp=(new Date).getTime(),window.setTimeout(function(){e.pacman.currentCoord=t},o)}},{key:"isUserInputValid",value:function(){return(new Date).getTime()-this.pacman.inputTimestamp>2e3?null:this.pacman.userInputDirection}},{key:"confirmUserDirection",value:function(){this.pacman.direction=this.pacman.userInputDirection}}]),e}();exports.default=u;
},{"./data.json":"rOsU","./state":"GCdN"}],"wDgG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("./canvas"),e=n(require("./state"));function n(t){return t&&t.__esModule?t:{default:t}}function a(t,e){return c(t)||s(t,e)||r(t,e)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function s(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=n){var a,i,r=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(a=n.next()).done)&&(r.push(a.value),!e||r.length!==e);o=!0);}catch(c){s=!0,i=c}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return r}}function c(t){if(Array.isArray(t))return t}function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function h(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}var p=require("./data.json"),l=p.tileSize,f=p.spriteSize,d=p.animationDuration,v=p.stepAnimationDuration,A=p.framesStep,y=function(){function e(t){m(this,e),this.init(t)}return h(e,[{key:"init",value:function(t){this.pacman=t,this.stepAnimationTimeStamp=null,this.stepAnimation=0,this.isFrameAfterDeath=!1}},{key:"draw",value:function(t){if(!this.characterIsOutOfScreen()){var e,n;"DEAD"!==this.pacman.state||this.isFrameAfterDeath||(this.isFrameAfterDeath=!0,this.resetAnimation(t)),this.stepAnimationTimeStamp||(this.stepAnimationTimeStamp=t);var i=a(this.getCoordToDraw(),2);e=i[0],n=i[1],this.drawOnCanvas(e,n,t)}}},{key:"resetAnimation",value:function(t){this.stepAnimation=0,this.stepAnimationTimeStamp=t}},{key:"characterIsOutOfScreen",value:function(){return 27===this.pacman.movingCoord[0]&&0===this.pacman.currentCoord[0]||0===this.pacman.movingCoord[0]&&27===this.pacman.currentCoord[0]}},{key:"getCoordToDraw",value:function(){var t,e;if("MOVING"===this.pacman.state){var n=this.getProgressOfAnimation(),a=this.pacman.movingCoord[0]-this.pacman.currentCoord[0],i=this.pacman.movingCoord[1]-this.pacman.currentCoord[1];t=this.pacman.currentCoord[0]+a*n,e=this.pacman.currentCoord[1]+i*n}return"IDLE"!==this.pacman.state&&"DEAD"!==this.pacman.state||(t=this.pacman.currentCoord[0],e=this.pacman.currentCoord[1]),[t,e]}},{key:"incrementStepAnimation",value:function(t){"DEAD"===this.pacman.state&&this.stepAnimation>2?(this.stepAnimation=3,this.stepAnimationTimeStamp=t):(this.stepAnimation++,this.stepAnimation=this.stepAnimation%A,this.stepAnimationTimeStamp=t)}},{key:"getProgressOfAnimation",value:function(){return((new Date).getTime()-this.pacman.animTimestamp)/d}},{key:"drawOnCanvas",value:function(t,e,n){n-this.stepAnimationTimeStamp>v&&this.incrementStepAnimation(n),"DEAD"===this.pacman.state?this.drawDeath(t,e):(this.drawBody(t,e),this.drawHead(t,e))}},{key:"drawDeath",value:function(e,n){var a=[{x:0,y:3},{x:0,y:4},{x:2,y:3},{x:3,y:2}];t.CTX.save();var i=e*l-16,r=(n-.5)*l-16;t.CTX.drawImage(t.ISAAC_SPRITE,a[this.stepAnimation].x*f*2+6,a[this.stepAnimation].y*f*2+9,2*l-12,2*l-12,i,r,2*l,2*l),t.CTX.restore()}},{key:"drawBody",value:function(e,n){t.CTX.save(),e=e*l-3,n=(n-.1)*l-3;var a=0,i=this.stepAnimation,r=7,o=!1;"LEFT"!==this.pacman.direction&&"RIGHT"!==this.pacman.direction||(a=2,r=0),"LEFT"===this.pacman.direction&&(o=!0),(i+=r)>=8&&(a++,i%=8),o&&(t.CTX.translate(e+l,n),t.CTX.scale(-1,1),e=0,n=0),t.CTX.drawImage(t.ISAAC_SPRITE,i*f,a*f,l,l,e,n,l+6,l+6),t.CTX.restore()}},{key:"drawHead",value:function(e,n){t.CTX.save(),e=e*l-3,n=(n-.5)*l-3;var a=this.stepAnimation>=8?1:0,i=!1,r=0;"UP"===this.pacman.direction&&(r=4),"RIGHT"===this.pacman.direction&&(r=2),"LEFT"===this.pacman.direction&&(r=2,i=!0),a+=r,i&&(t.CTX.translate(e+l,n),t.CTX.scale(-1,1),e=0,n=0),t.CTX.drawImage(t.ISAAC_SPRITE,a*f,0,l,l,e,n,l+6,l+6),t.CTX.restore()}}]),e}();exports.default=y;
},{"./data.json":"rOsU","./canvas":"NRet","./state":"GCdN"}],"fnOe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./canvas"),t=a(require("./pacmanBehaviour")),i=a(require("./pacmanAnimation")),n=a(require("./state"));function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e}var s=require("./data.json"),c=s.tileSize,d=s.spriteSize,l=s.animationDuration,f=s.stepAnimationDuration,h=s.framesStep,p=function(){function a(e){r(this,a),this.init(e),this.pacmanBehaviour=new t.default(this),this.pacmanAnimation=new i.default(this)}return u(a,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[1,14];this.currentCoord=e,this.movingCoord=e,this.state="IDLE",this.direction="",this.userInputDirection="",this.inputTimestamp=null}},{key:"update",value:function(){this.isAnimationFinished()&&(this.addPoint(),this.pacmanBehaviour.update())}},{key:"addPoint",value:function(){var e=n.default.board.getTile(n.default.pacman.currentCoord);(e.hasPoint||e.hasSuperPoint)&&(this.addScore(10),e.removePoint())}},{key:"addScore",value:function(e){this.setScore(n.default.score+e)}},{key:"setScore",value:function(t){n.default.score=t,e.SCORE_ELEMENT.textContent=n.default.score}},{key:"setUserInputDirection",value:function(e){this.userInputDirection=e,this.inputTimestamp=(new Date).getTime()}},{key:"isAnimationFinished",value:function(){return this.currentCoord===this.movingCoord}},{key:"setDead",value:function(){this.state="DEAD"}},{key:"draw",value:function(e){this.pacmanAnimation.draw(e)}}]),a}();exports.default=p;
},{"./canvas":"NRet","./pacmanBehaviour":"KNzD","./pacmanAnimation":"wDgG","./state":"GCdN","./data.json":"rOsU"}],"ZxoE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=d(require("./board")),t=require("./canvas"),n=d(require("./ennemy")),a=d(require("./pacman")),i=d(require("./tile")),u=d(require("./state")),r=require("./utils");function d(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var f=require("./data.json"),c=f.ennemiesData,m=["DOWN","UP","RIGHT","LEFT"],p=function(){function i(){l(this,i),u.default.score=0,u.default.gameState="START",this.initGame()}return s(i,[{key:"initGame",value:function(){u.default.board=new e.default,u.default.pacman=new a.default,u.default.ennemies=this.initEnnemies(),u.default.gameState="START",this.draw()}},{key:"startGameLoop",value:function(){this.bindEventHandler(),window.requestAnimationFrame(this.loop.bind(this))}},{key:"loop",value:function(e){var t=e-this.lastRender;this.lastRender=e,this.draw(t,e),this.update(t,e),window.requestAnimationFrame(this.loop.bind(this))}},{key:"update",value:function(e,t){this.updateGameState(),"END"!==u.default.gameState&&(u.default.pacman.update(),this.updateEnnemies(t))}},{key:"updateGameState",value:function(){this.isPacmanDead()&&(u.default.pacman.setDead(),u.default.gameState="END")}},{key:"isPacmanDead",value:function(){var e=!1;e:for(var t=0;t<u.default.ennemies.length;t++){if(u.default.ennemies[t].isPacmanKilled(u.default.pacman.currentCoord)){e=!0;break e}}return e}},{key:"draw",value:function(e,n){t.CTX.fillStyle="#2c2a2a",t.CTX.fillRect(0,0,t.CANVAS_ELEMENT.width,t.CANVAS_ELEMENT.height),u.default.board.drawBoard(),this.drawEnnemies(n),u.default.pacman.draw(n)}},{key:"initEnnemies",value:function(){var e=[];return c.forEach(function(t){e.push(new n.default(t))}),e}},{key:"updateEnnemies",value:function(e){u.default.ennemies.forEach(function(t){t.update(e)})}},{key:"drawEnnemies",value:function(e){u.default.ennemies.forEach(function(t){t.draw(e)})}},{key:"bindEventHandler",value:function(){document.addEventListener("keydown",this.keydownEventHandler.bind(this))}},{key:"unbindEventHandler",value:function(){document.removeEventListener("keydown",this.keydownEventHandler)}},{key:"keydownEventHandler",value:function(e){var t=e.which;37!==t&&81!==t||(u.default.pacman.setUserInputDirection("LEFT"),e.preventDefault()),39!==t&&68!==t||(u.default.pacman.setUserInputDirection("RIGHT"),e.preventDefault()),38!==t&&90!==t||(u.default.pacman.setUserInputDirection("UP"),e.preventDefault()),40!==t&&83!==t||(u.default.pacman.setUserInputDirection("DOWN"),e.preventDefault())}}]),i}();exports.default=p;
},{"./board":"C0wJ","./canvas":"NRet","./ennemy":"Dqyk","./pacman":"fnOe","./tile":"zP0G","./state":"GCdN","./data.json":"rOsU","./utils":"dURd"}],"fWRU":[function(require,module,exports) {
"use strict";var e=t(require("./game"));function t(e){return e&&e.__esModule?e:{default:e}}function n(e){"complete"===document.readyState||"interactive"===document.readyState?setTimeout(e,1):document.addEventListener("DOMContentLoaded",e)}n(function(){var t=new e.default;t.initGame(),t.startGameLoop()});
},{"./game":"ZxoE"}]},{},["fWRU"], null)
//# sourceMappingURL=script.bd1f04b8.js.map